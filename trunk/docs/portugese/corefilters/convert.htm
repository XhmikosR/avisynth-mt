<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <title> Avisynth Colorspace Conversion Filter</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body>
<h2>
<a NAME="ConvertTo"></a>ConvertToRGB / ConvertToRGB24 / ConvertToRGB32<br>
  ConvertToYUY2 / ConvertBackToYUY2 / ConvertToYV12</h2>
<p><code>ConvertToRGB </code>(<var>clip [, string &quot;matrix&quot;] [, bool "interlaced"]</var>)<br>
  <code>ConvertToRGB24 </code>(<var>clip [, string &quot;matrix&quot;] [, bool "interlaced"]</var>)<br>
  <code>ConvertToRGB32 </code>(<var>clip [, string &quot;matrix&quot;] [, bool "interlaced"]</var>)<br>
  <code>ConvertToYUY2 </code>(<var>clip [, string &quot;matrix&quot;] [, bool "interlaced"]</var>)<br>
<code>ConvertToYV12 </code>(<var>clip [, string &quot;matrix&quot;] [, bool "interlaced"]</var>)<br>
  <code>ConvertBackToYUY2 </code>(<var>clip [, string &quot;matrix&quot;]</var>)

<p>
  <var>matrix</var>: <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Padrão não especificado. Controla os
  coeficientes de cor e fatores de escala usados em conversões RGB - YUV.</span>
  <ul>
  <li><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">não especificado</span> : Usa coeficientes Rec.601,
    escalados para a faixa de TV [16,235].
  <li>&quot;PC.601&quot; : Usa coeficientes Rec.601, mantém faixa completa [0,255].
  <li>&quot;Rec709&quot; : Usa coeficientes Rec.709, escalados para a faixa de TV.
  <li>&quot;PC.709&quot; : Usa coeficientes Rec.709, mantém faixa completa.
  </ul>
<p>
  <var>interlaced</var>: <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Padrão</span> false. Usa <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">plano entrelaçado para conversões de croma YV12
  - YUY2/RGB.</span>
</p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">AviSynth antes da v2.50 pode tratar internamente
de dois formatos de cor, RGB e YUY2. A partir da v2.50 AviSynth também pode
lidar com um terceiro formato de cor, YV12. Estes filtros se convertem entre si.
Se o vídeo já estiver no formato especificado, será passado inalterado. RGB
é assumido ao longo deste doc para significar RGBA = RGB32.</span> <code>ConvertToRGB</code>
<code><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA"><font color="#000000">converte
para RGB32, a menos que seu clipe seja RGB24.</font> </span></code><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;
mso-fareast-font-family:&quot;Times New Roman&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA">Se
você precisa 24-bit RGB por alguma razão, use</span> <code>ConvertToRGB24</code>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">explicitamente e</span> <code>ConvertToRGB32</code> 
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">para fazer o contrário.</span>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">A sintaxe e a operação de</span>
  <code>ConvertToRGB24</code> <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">são idênticas ao</span> <code>ConvertToRGB</code>,
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">exceto que o formato de saída é 24-bit; se a
fonte for RGB32, o canal alfa será retirado.</span><p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Desde a v2.51/v2.52 está incluído um parâmetro</span> <var>interlaced</var>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">opcional</span> (<var>interlaced</var><i>=</i>false
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">é a operação padrão).</span> <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Quando fixado false é assumido</span> <var>clip</var>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">progressivo, quando fixado true é assumido que</span>
<var>clip</var>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">é entrelaçado. Esta opção está incluída
porque por exemplo (assumindo que clipe é entrelaçado YV12):</span>
<pre>SeparateFields(clip)
ConvertToYV12
Weave</pre>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">é incorretamente amostrada. <span style="mso-spacerun: yes">&nbsp;</span>Ao
invés é melhor usar:</span>
<pre>ConvertToYV12(clip, interlaced=true)</pre>
Note, que <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">fixando</span> <var>interlaced</var>=true <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">só faz algo se a conversão YV12 &lt; - &gt;
YUY2/RGB é pedida, caso contrário simplesmente é ignorada. Mais sobre isto
pode ser achado aqui</span> &quot;<a href="http://www.avisynth.org/FieldbasedVideo"><cite>Color conversions and interlaced / field-based video</cite></a>&quot;.
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Ao contrário do que se poderia esperar, não há
nenhuma forma de converter YUV a RGB. Em AviSynth as duas mais comuns são
implementadas: Rec.601 e Rec.709 (nomeadas depois das suas especificações
oficiais). Embora não seja correto em todos os casos, o seguinte pode ser na
maioria dos casos:</span>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">O primeiro (Rec.601) deve ser usado quando sua
fonte for DivX/XviD ou uma captura analógica:</span><pre>ConvertToRGB(clip)</pre>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">O segundo (Rec.709) deve ser usado quando sua
fonte for DVD ou HDTV:</span><pre>ConvertToRGB(clip, matrix=&quot;rec709&quot;)</pre>
<p>
Na <em>v2.56</em>, <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">o oposto também está disponível, que é</span></p>
<pre>ConvertToYUY2(clip, matrix=&quot;rec709&quot;) ou ConvertToYV12(clip, matrix=&quot;rec709&quot;)</pre>
<p>
Na <em>v2.56</em>, <var>matrix</var>=&quot;pc.601&quot; (e <var>matrix</var>=&quot;pc.709&quot;)
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">permite fazer a conversão RGB &lt; - &gt; YUV
mantendo a gama luma, assim RGB [0,255] &lt; - &gt; YUV [0,255] (em vez do
usual/padrão RGB [0,255] &lt; - &gt; YUV [16,235]).</span></p>
<p>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Todos o filtros de VirtualDub (carregados com</span> <code>LoadVirtualdubPlugin</code>,
s<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">uportam só entradas RGB32 - veja</span> <a href="../syntax.htm">Plugins</a>)<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">.</span></p>
<p><b>RGB24, RGB32:</b>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">As cores são armazenadas como valores de
vermelho, verde e azul. Em RGB32 há um canal Alfa extra para opacidade. As
dimensões das imagens podem ter qualquer valor.</span>
<p><b>YUY2:</b>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">A figura é armazenada como um valor de luma Y e
dois valores de cor U, V. Para dois píxeis horizontais há só um valor de
croma e dois de luma (dois Y, um U, um V). Então a largura tem que ser um múltiplo
de dois.</span>
<p><b>YV12:</b>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Igual a YUY2 mas há só um valor de croma para 4
píxeis (um quadrado 2x2). Ambas as dimensões da imagem têm que ser um múltiplo
de dois, se o vídeo é entrelaçado, a altura tem que ser um múltiplo de
quatro porque o quadrado 2x2 é tomado de um campo, não de um quadro.</span>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Algumas funções conferem as regras de dimensão,
outras sobre os parâmetros e pode haver ainda algumas onde uma distorção de
quadro ou um erro acontece.</span>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Trabalhando em YUY2 é mais rápido que em RGB.
YV12 é até mais rápido e é o formato MPEG nativo, assim há menos conversões
de colorspace.</span>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">A conversão de um lado para outro não é sem
perdas, então use o mínimo de conversões quanto possível. Se forem necessárias
muitas conversões, use</span> <code>ConvertBackToYUY2</code>
 <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">para converter a YUY2, se sua fonte já era YUY2.
 Isto reduzirá <i>colorblurring</i> (cor borrada), mas ainda assim pode haver
 alguma perda de precisão.</span>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Na maioria dos casos, o filtro de ConvertToRGB não
deve ser necessário. Se a saída do Avisynth é no formato YUY2 e uma aplicação
espera RGB, o sistema usará o codec YUY2 instalado para fazer a conversão. Porém,
se não há nenhum codec YUY2, ou se (como é o caso com codec ATI e algum outro
YUY2) o codec converte incorretamente de YUY2 para RGB, você pode usar o filtro
do AviSynth para converter.</span>
<p><a href="http://www.math.berkeley.edu/~benrg/huffyuv.html" target="_parent">Huffyuv</a>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">agirá como o codec de sistema YUY2 se nenhum
outro codec está instalado, assim se você instala Huffyuv e <i>desinstala
todos os outros codecs YUY2,</i> então você nunca precisará</span> <code>ConvertToRGB</code>.
<p><code>ConvertToRGB24</code> e <code>ConvertToRGB32</code>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">podem ser usados para forçar AviSynth a usar um
método de armazenagem específico para dados RGB. Dados RGB24 são freqüentemente
muito mais lentos a processar que dados RGB32, assim se sua fonte for RGB24, você
pode obter um ganho de velocidade convertendo para RGB32. Não há nenhuma
vantagem conhecida em usar RGB24 exceto que TMPGEnc e VFApi requerem entradas
RGB24).</span>
<pre># <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Há uma leve distorção causada pela conversão entre YUV e RGB.</span>
# <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Vamos tentar ver isso.</span>
control = ConvertToYUY2()
test = ConvertToYUY2(ConvertToRGB(ConvertToYUY2(ConvertToRGB(control))))
test = ConvertToYUY2(ConvertToRGB(test))
return Subtract(test,control)</pre>
<p><kbd>$Date: 2006/03/26 18:11:19 $ Portuguese translation by RoLon</kbd></p>
<form><input TYPE="Button" VALUE="Back"
onClick="history.go(-1)"></form>
</body>
</html>
