<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <title>Overlay Filter</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body >
<h2>
<a href="#Tone" name="SuperEQ"></a>Overlay&nbsp; <font size="3">(Sobreposição)</font>
</h2>
<p align="left"><code>Overlay </code>(<var>clip, clip overlay, int ''x'', int
''y'', clip ''mask'', float ''opacity'', string ''mode'', bool ''greymask'',
string ''output'', bool ''ignore_conditional'', bool ''pc_range''</var>)<br>
  <br>
  <code>
Overlay</code>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">sobrepõe dois clipes com um deslocamento de
sobreposição opcional da imagem, usando diferentes métodos. Além disso a
opacidade pode ser ajustada para sobrepor o clipe.</span><br>
  <br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">A entrada para a sobreposição pode ser qualquer
colorspace, não importa se o clipe é diferente! Os clipes de entrada são
convertidos internamente ao formato YUV geral (sem subamostragem de croma),
assim é possível o filtro produzir outro colorspace da entrada. Também é
possível introduzir vídeo em diferentes colorspaces, bem como convertidos sem
problemas. Não é recomendado porém, usar overlay ''apenas'' para conversões
de colorspace, porque é mais lento e tem qualidade ligeiramente pior.</span>&nbsp;<br>
  <br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Em geral todos os clipes são tratados com
valores de 0-&gt;255. Isto significa que os números não serão cortados à
gama CCIR 601.&nbsp; Depois use</span>
<a href="limiter.htm"><code>Limiter</code></a>  <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">para esta tarefa.</span><p align="left"><b><i><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Máscaras também devem ter valores de 0-&gt;255.
</span></i></b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;
mso-fareast-font-family:&quot;Times New Roman&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA">Você
pode usar</span>
<a href="histogram.htm"><code>Histogram</code></a> em modo <code>Histogram</code>(&quot;levels&quot;)
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">para ver as entradas de cor. Se sua máscara
estiver na gama CCIR 601, use</span> <a href="coloryuv.htm"><code>ColorYUV</code></a>(levels=&quot;TV-&gt;PC&quot;)
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">para re-escalar os níveis de cor.</span><br>
  <br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Não é recomendado fazer sobreposição em
material entrelaçado, a menos que você saiba como fazer.</span>&nbsp;
<h4 align="left"><b>Parâmetros:</b></h4>
<p align="left"><b>clip</b><br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Este clipe será a base e a imagem de sobreposição
que será colocada em cima dele.</span>&nbsp;<p align="left"><b>overlay<br>
</b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Esta é a imagem que será colocada (sobreposta)
em cima do clipe básico. O colorspace ou dimensões da imagem não têm que se
igualar ao clipe básico.</span><p align="left"><b>x &amp;
y<br>
</b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Estas duas variáveis definem a colocação da
imagem overlay (de sobreposição) no clipe básico em píxeis. A variável pode
ser positiva ou negativa.</span><br>
<i><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Os valores padrões são 0.</span></i><p align="left"><b>mask<br>
</b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto será usado como a máscara de transparência
para a imagem de sobreposição. A máscara deve ter o mesmo tamanho do clipe de
sobreposição. Por padrão, só os componentes cinzas (luma) da imagem são
usados. Quanto mais escura é a imagem, mais transparente será a imagem de
sobreposição.</span><br>
<i><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Não há padrão, mas a não especificação é
equivalente a ter um clipe 255.</span></i><p align="left"><b>opacity<br>
</b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto fixa a transparência da imagem. O valor vai
de 0.0 a 1.0, onde 0.0 é transparente e 1.0 é completamente opaco (se nenhuma
máscara é usada). Quando usado com máscara este valor é multiplicado pelo
valor dela para formar a opacidade final.</span><br>
<i>O valor <span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">padrão </span> é 1.0</i><p align="left"><b>mode<br>
</b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Mode define como seu clipe deve ser sobreposto em
sua imagem.</span>&nbsp;
<table border="1" width="100%">
  <tr>
    <td width="8%"><b>Modo</b></td>
    <td width="92%"><b>Descrição</b></td>
  </tr>
  <tr>
    <td width="8%">Blend</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Este é o modo padrão. Quando a opacidade é 1.0
      e não há máscara, a imagem de sobreposição será copiada sobre a
      original. Mistura transparente normal é usada em caso contrário.</span></td>
  </tr>
  <tr>
    <td width="8%">Add</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto incluirá o vídeo de sobreposição ao básico,
      tornando o vídeo mais brilhante. Para fazer comparável ao RGB, áreas de
      luma mais brilhante influenciam o croma e as deixam mais brancas.</span></td>
  </tr>
  <tr>
    <td width="8%">Subtract</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">O oposto de Add. Isto tornará as áreas mais
      escuras.</span></td>
  </tr>
  <tr>
    <td width="8%">Multiply</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto também escurecerá a imagem, mas trabalha
      diferente de subtract.</span></td>
  </tr>
  <tr>
    <td width="8%">Chroma</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto sobreporá apenas a informação de cor do
      clipe de sobreposição à imagem básica.</span></td>
  </tr>
  <tr>
    <td width="8%">Luma</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto sobreporá só a informação de
      luminosidade do clipe de sobreposição à imagem básica.</span></td>
  </tr>
  <tr>
    <td width="8%">Lighten</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto copiará a informação de luminosidade do
      clipe de sobreposição ao clipe básico, mas só se ela for mais clara
      que a imagem básica.</span></td>
  </tr>
  <tr>
    <td width="8%">Darken</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto copiará a informação de luminosidade do
      clipe de sobreposição ao clipe básico, mas só se a sobreposição for
      mais escura que a imagem básica.</span></td>
  </tr>
  <tr>
    <td width="8%">SoftLight</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto vai clarear ou escurecer o clipe básico,
      baseado no nível de luminosidade do clipe de sobreposição. Se ela for
      mais escura que luma = 128, a imagem básica será mais escura. Se mais
      clara que luma=128, a imagem básica será mais clara. Isto é útil para
      acrescentar sombras a uma imagem. Pintando com preto ou branco puros
      produz uma área distintamente mais escura ou mais clara mas não resulta
      em puro preto ou branco.</span></td>
  </tr>
  <tr>
    <td width="8%">HardLight</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto vai clarear ou escurecer o clipe básico,
      baseado no nível de luminosidade do clipe de sobreposição Se ela for
      mais escura que luma = 128, a imagem básica será mais escura. Se for
      mais clara que luma=128, a imagem básica será mais clara. Isto é útil
      para acrescentar sombras a uma imagem. Pintando com preto ou branco puros,
      resulta em preto ou branco puros.</span></td>
  </tr>
  <tr>
    <td width="8%">Difference</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto exibirá a diferença entre o clipe e a
      sobreposição. Note que igual a <a href="http://www.avisynth.org/index.php?page=Subtract">Subtract</a>
      nenhuma diferença é exibida como grey=127 (cinza). Se você quiser a
      diferença pura, use <a href="coloryuv.htm">ColorYUV</a>(off_y=-127).</span></td>
  </tr>
  <tr>
    <td width="8%">Exclusion</td>
    <td width="92%"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto inverterá a imagem baseado na luminosidade
      da sobreposição da imagem. Misturando com branco inverte os valores de
      cores básicos; misturando com preto nada muda.</span></td>
  </tr>
</table>
<p align="left"><i>O valor <span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">padrão </span>é Blend</i><p align="left"><b>greymask<br>
</b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Esta opção especifica se o croma da máscara
deve ser usado para transparência de croma. Para propósito geral este modo não
deve ser desativado. Filtros externos como mSharpen e Masktools podem exportar
mapas de croma apropriados.</span><br>
<i>O <span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">padrão </span>é true</i><p align="left"><b>output<br>
</b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">É possível a sobreposição retornar outro
colorspace. As saídas possíveis de colorspaces são &quot; YUY2 &quot;, YV12
&quot;, RGB32 &quot; e &quot; RGB24 &quot;.</span><br>
<i>O <span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">padrão </span>é input colorspace</i><p align="left"><b>ignore_conditional<br>
</b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Isto fará <i>Overlay</i>&nbsp; ignorar qualquer
variável condicional dada. Veja a seção &quot;Variáveis Condicionais&quot;
para uma avaliação</span><br>
<i>O <span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">padrão </span>é false</i><p align="left"><b>pc_range<br>
</b><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Quando fixado true, fará todas as conversões
internas RGB - &gt; YUV - &gt; RGB assumirem a gama luma entre 0 e 255 em vez da
gama padrão 16-&gt;235. Só é recomendado mudar esta colocação se você sabe
como fazer. Veja a seção em &quot;considerações RGB&quot; abaixo.</span><br>
<i>O <span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">padrão </span>é false</i><h3 align="left">Considerações
RGB</h3>
<p align="left"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Esta seção descreverá como Overlay se comporta
quando lhe é dado uma ou mais fontes de RGB.</span><br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Um ou mais entradas de Overlay são permitidas
para dados RGB. Porém, como Overlay está processando material no colorspace
YUV, conduzirá a uma conversão de RGB para YUV. Há dois modos para esta
conversão, reforçados <span style="mso-spacerun: yes">&nbsp;</span>pelo parâmetro
&quot;pc_range&quot;. Este parâmetro estenderá a faixa YUV de 16 a 235 (esta
é a gama usada por todos os conversores do Avisynth) para 0 a 255. Há alguns
casos em que habilitar pc_range é uma boa idéia:</span>
<ul>
  <li>
    <p align="left"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Ao sobrepor um clipe RGB com os modos
    &quot;add&quot;, &quot;subtract&quot; ou &quot;multiply&quot;, sua gama é
    melhor, se for de 0 a 255, desde que permita áreas completamente escuras a
    não influenciar o resultado (em vez de somar 16 a todo valor).</span></li>
  <li>
    <p align="left"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Ao NÃO produzir uma conversão de colorspace. Se
    produzir colorspace (RGB vs YUV) diferente da entrada, a escala estará
    errada. Se pc_range for true e a entrada é RGB, quando a saída é YUY2, o
    YUY2 terá uma gama inválida e não a gama CCIR 601.</span></li>
</ul>
<p align="left"><b>Produzindo RGB</b></p>
<p align="left"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Pode ser uma boa idéia deixar Overlay produzir
YUY2, até mesmo se sua entrada colorspace for RGB, pois isto evita que uma
conversão colorspace volte da YUV para RGB. Fique ciente que seu material pode
ficar &quot;re-escalado&quot;, como mencionado antes, se você usar pc_range =
true. Você pode corrigir isso usando ''ColorYUV(levels
=&quot;pc-&gt;tv&quot;)'' para reconverter à gama de 16 a 235.</span></p>
<p align="left"><b><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-US;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Entrando RGB para clipe de máscara</span></b></p>
<p align="left"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">O clipe de máscara RGB pode se comportar um
pouco diferente ao que poderia ser esperado. Se sempre usa uma máscara cinza e
não desativa ''greymask'' você terá o resultado que espera. Note que os
valores de clipe de máscara nunca são escalados, assim estará automaticamente
na gama de 0-&gt;255, copiados diretamente dos valores de RGB.</span></p>
<p><strong>Usando o canal alfa RGB32&nbsp;</strong></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Overlay nunca usará o canal alfa dado a um clipe
RGB32. Se você quer extrair o canal alfa de um clipe RGB32 pode usar o comando </span><a href="../../../../../Documents%20and%20Settings/Rotildo%20Longo/Meus%20documentos/showalpha.htm"><code><span style="font-family: Microsoft Sans Serif; text-decoration: none; text-underline: none; mso-bidi-font-size: 12.0pt; mso-fareast-font-family: Times New Roman; mso-bidi-font-family: Times New Roman; mso-ansi-language: PT-BR; mso-fareast-language: PT-BR; mso-bidi-language: AR-SA"><font size="2">ShowAlpha</font></span></code></a><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"> para extrair sua informação. Para manter a máxima
qualidade é recomendado extrair o alfa como RGB.</span></p>
<h3 align="left">Variáveis Condicionais</h3>
<p align="left"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">As variáveis &quot; globais OL_opacity_offset
&quot;, OL_x_offset &quot; e &quot; OL_y_offset &quot; são lidas em cada quadro
e aplicado. É possível modificar estas variáveis que com </span><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;
mso-fareast-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"><a href="../../../../../Documents%20and%20Settings/Rotildo%20Longo/Meus%20documentos/ConditionalFilter.htm"><code><span style="mso-ascii-font-family:&quot;Microsoft Sans Serif&quot;;mso-hansi-font-family:&quot;Microsoft Sans Serif&quot;;
mso-bidi-font-family:&quot;Microsoft Sans Serif&quot;;text-decoration:none;text-underline:
none">FrameEvaluate</span></code></a></span><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:
&quot;Times New Roman&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA">. Os valores destas
variáveis serão acrescentados ao original em cada quadro. Assim se você
especifica &quot;x = 100&quot; como um parâmetro de filtro e a &quot;variável&quot;
global OL_x_offset <span style="mso-spacerun: yes">&nbsp;</span>é fixada a 50,
a </span><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">sobreposição</span><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:
&quot;Times New Roman&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA"> será colocada em x =
150.</span><br>
<br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Se você está usando múltiplos filtros isto
pode ser desativados com o parâmetro.&quot;ignore_conditional = true&quot;</span></p>
<p align="left"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Há um exemplo de modificação condicional na página
</span><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA"><a href="../../../../../Documents%20and%20Settings/Rotildo%20Longo/Meus%20documentos/conditionalreader.htm"><code><span style="mso-ascii-font-family:&quot;Microsoft Sans Serif&quot;;
mso-hansi-font-family:&quot;Microsoft Sans Serif&quot;;mso-bidi-font-family:&quot;Microsoft Sans Serif&quot;;
text-decoration:none;text-underline:none">ConditionalReader</span></code></a></span><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;
mso-fareast-font-family:&quot;Times New Roman&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:PT-BR;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA">.</span></p>
<h3 align="left">Exemplos</h3>
<p align="left"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># Prepara algumas fontes.</span></p>
<div align="left">
  <pre align="left">bg = colorbars(512,384).converttoyuy2()
text = blankclip(bg).subtitle(&quot;Colorbars&quot;, size=92, text_color=$ffffff).coloryuv(levels=&quot;tv-&gt;pc&quot;)</pre>
</div>
<p align="left"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># Isto sobreporá o texto em três versões
diferentes.</span></p>
<div align="left">
  <pre align="left">overlay(bg, text, x=50, y=20, mode=&quot;subtract&quot;, opacity=0.25)
overlay(text, x=50, y=120, mode=&quot;add&quot;, opacity=0.5)
overlay(text, x=50, y=240, mode=&quot;blend&quot;, opacity=0.7)</pre>
</div>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># Isto sobreporá yuy2clip com rgbclip coma uma máscara
yuy2 (note que a gama luma da máscara é [0-255]).</span>
<pre>Overlay(yuy2clip, rgbclip, mask = rgbclip.ShowAlpha(&quot;yuy2&quot;))</pre>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># que é igual a</span>
<pre>mask = rgbclip.ShowAlpha(&quot;rgb&quot;).ConvertToYUY2.ColorYUV(levels=&quot;TV-&gt;PC&quot;)
Overlay(yuy2clip, rgbclip, mask)</pre>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># que é igual a</span>
<pre>mask = rgbclip.ShowAlpha(&quot;rgb&quot;)
Overlay(yuy2clip, rgbclip, mask)</pre>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># Isto pega a média de dois clipes. Pode ser
usado para combinar duas capturas de radiodifusões diferentes para reduzir ruído,
por exemplo. Uma discussão desta idéia pode ser achada [<a href="http://forum.doom9.org/showthread.php?s=&amp;threadid=28438">aqui</a>].
Um escrito de amostra (claro que você tem que assegurar que os quadros dos dois
clipes sejam exatamente iguais, use <a href="deleteframe.htm">DeleteFrame</a>
se necessário):</span></p>
<pre>clip1 = AviSource(&quot;F:\shakira-underneath_your_clothes.avi&quot;)
clip2 = AviSource(&quot;F:\shakira-underneath_your_clothes2.avi&quot;)
Overlay(clip1, clip2, mode=&quot;blend&quot;, opacity=0.5)</pre>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># Use um fundo azul (ou qualquer outra cor -
blue.jpg é uma sobreposição de quadro azul com subtítulos num retângulo
preto) como máscara. O retângulo preto que contém os subtítulos será visível
no clipe fonte (que é ColorBars aqui):</span></p>
<pre>testcard = ColorBars()

<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># pegue um clipe de máscara azul (o mesmo azul que é usado em ColorBars: R16 G16 B180)</span>
maskclip = BlankClip(clip=testcard, color=$0f0fb4)

<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># Exemplo de arquivo de subtítulo com fundo azul como acima</span>
subs = ImageSource(&quot;F:\TestClips\blue.jpg&quot;).ConvertToRGB32

maskclip = ColorKeyMask(subs, $0f0fb4, 60)

Overlay(testcard, subs, mask=ShowAlpha(maskclip), mode=&quot;blend&quot;, opacity=1)</pre>
<table border="1" width="50%">
  <tr>
    <td width="25%" align="center"><img border="0" src="../pictures/corefilters/overlay_blue.jpg" width="512" height="384"></td>
    <td width="25%" align="center"><img border="0" src="../pictures/corefilters/overlay_subs.png" width="512" height="384"></td>
  </tr>
</table>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Uma tolerância de 60 é usada aqui porque o azul
não é inteiramente uniforme. Próximo aos retângulos pretos o azul é
determinado por R23 G22 B124. Provavelmente devido à compressão de blue.jpg.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA"># Mova um ponto vermelho (ou qualquer outra cor)
em um clipe com ConditionalReader (dot.bmp é um vermelho em um fundo preto):</span></p>
<pre>a1 = ColorBars().Trim(0,399)
a2 = ImageSource(&quot;F:\TestClips\dot.bmp&quot;).ConvertToRGB32

<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">#a2.GreyScale retorna um ponto cinzento em um fundo preto; Levels faz o ponto branco</span>
mask_clip = Mask(a2, a2.GreyScale.Levels(0, 1, 75, 0, 255))
Overlay(a1, a2, mask=ShowAlpha(mask_clip), y=0, x=0, mode=&quot;blend&quot;, opacity=1)

ConditionalReader(&quot;xoffset.txt&quot;, &quot;ol_x_offset&quot;, false)
ConditionalReader(&quot;yoffset.txt&quot;, &quot;ol_y_offset&quot;, false)</pre>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Faça xoffset.txt que contêm as posições x e
yoffset.txt que contêm as posições y do ponto móvel (veja <a href="conditionalreader.htm">ConditionalReader</a>
para mais info), e ponha na mesma pasta do seu escrito:</span></p>
<table border="1" width="100%">
  <tr>
    <td width="50%">
      <pre>xoffset.txt

Type int
Default -50

R 0 100 20
I 100 200 20 250
R 200 300 250
I 300 400 250 400</pre>
    </td>
    <td width="50%">
      <pre>yoffset.txt

Type int
Default -50

R 0 100 20
I 100 200 20 350
R 200 300 350
I 300 400 350 40</pre>
    </td>
  </tr>
</table>
<table border="1" width="100%">
  <tr>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/overlay_dot.png" width="512" height="384"></td>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/overlay_dot2.png" width="512" height="384"></td>
  </tr>
</table>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">assim o ponto se move deste jeito: (20,20) - &gt;
(250,350) - &gt; (400,40). Nb, também é possível fazer isto com Anime.</span></p>
<h3>Log de Mudanças:</h3>
<table border="1" width="100%">
  <tr>
    <td width="8%"> v2.54</td>
    <td width="92%"> Lançamento Inicial</td>
  </tr>
</table>
<p align="left"><kbd>$Date: 2006/03/26 18:11:19 $ Portuguese translation by
RoLon</kbd></p>
<form>
  <p><input TYPE="Button" VALUE="Back"
onClick="history.go(-1)"></p>
</form>

</body>
</html>
