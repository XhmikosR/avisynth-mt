<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="ru"><head>
  <meta http-equiv="Content-Language" content="ru">

  <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
  <title>AVISource / OpenDMLSource / AVIFileSource / WAVSource Avisynth Filter</title>

  <link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!-- Automatically generated, don't change: $Id: avisource.htm,v 1.9 2008/09/08 16:43:47 fizick Exp $ --></head>

<body>
<h2><a name="AVISource"></a>AVISource / OpenDMLSource / AVIFileSource / WAVSource</h2>

<p><code>AVISource </code>(<var>string filename [, ...], bool "audio" = true, string
"pixel_type" = YV12, [string fourCC]</var>)<br>
<code>OpenDMLSource </code>(<var>string filename [, ...], bool "audio" = true, string "pixel_type" = YV12,
[string fourCC]</var>)<br>
<code>AVIFileSource </code>(<var>string filename [, ...], bool "audio" = true, string "pixel_type" = YV12,
[string fourCC]</var>)<br>
<code>WAVSource </code>(<var>string filename [, ...]</var>)
</p>
<p><code>AVISource</code>
берет как аргумент одно или более имен файлов в кавычках, и считывает
файлы используя или Video-for-Windows "AVIFile" интерфейс или встроеный
в AviSynth OpenDML код (взятый из VirtualDub'а). Этот фильтр может
считывать любой файл, для которого существует AVIFile хендлер
(обработчик). Это включает не только AVI файлы, но также WAV файлы, AVS
(AviSynth скрипт) файлы, и VDR (фреймсервер ВиртуалДуба) файлы. Если вы
напечатали несколько имен файлов в качестве аргумента, клипы будут
срощены вместе с помощью <code><a href="splice.htm">UnalignedSplice</a></code>. 
Логический аргумент  <var>"audio&quot; </var>является опциональным и по умолчанию равен <code>true</code>.
</p>
<p><code>AVISource</code> фильтр изучает файл для установления его типа и направляет его подходящему AVIFile или OpenDML обработчику.
В случае, если имеются проблемы с одним или другим обработчиком,
можно также использовать <code>OpenDMLSource</code> и <code>AVIFileSource</code>
фильтры, которые форсируют использование конкретного обработчика.
Каждый из обработчиков может считывать обычные (&lt; 2GB) AVI файлы, но
только OpenDML обработчик может считывать файлы больших размеров и
только AVIFile обработчик может считывать файлы других типов, таких как
WAV, VDR, и AVS.
</p>
<p>До <em>v2.04</em>, <code>WAVSource</code> был известен также как <tt>AVIFileSource</tt>.
В последующих версиях, <code>WAVSource</code> больше не пытается открывать видео потоки.
Это может быть полезно если хочется вытащить аудио поток из AVI файла,
но видео поток поврежден или его метод компрессии не поддерживается в текущей системе.
</p>
<p>С <em>v2.04</em> встроена поддержка АСМ (Менеджер Аудио Компрессии) аудио (например mp3-AVI).
<code>AVISource</code> больше не может открывать WAV-файлы, с которыми необходимо работать используя <code>WAVSource</code>.
</p>
<p>С <em>v2.06</em> параметр <var>pixel_type</var> (по умолчанию YUY2)
позволяет выбрать выходной формат декомпрессора.
Разрешенные значения: "YUY2", "RGB32" и "RGB24".
Если параметр опущен, AviSynth будет использовать первый формат,
поддерживаемый декомпрессором (в следующем порядке : YUY2, RGB32,
RGB24).
Этот параметр не имеет эффекта для видео в некомпрессированном формате
(YUY2,
RGB32 or RGB24), потому что в этом случае никакой декомпрессор не будет
использован.
С <em>v2.5</em> значение по умолчанию параметра <var>pixel_type</var>
изменено на YV12. Иными словами: если Вы не укажете что-нибудь, то
фильтр будет пробовать выдавать AVI в виде YV12, если это невозможно,
то попробует YUY2 и если это также невозможно, то попробует RGB.
</p>
<p>Иногда цвета будут искажены при загрузке DivX клипа в AviSynth 2.5
(цветовые каналы U И V поменяны местами), из-за ошибки в DivX (5.02 и
старше). Можно использовать <a href="swap.htm"><code>SwapUV</code></a> для коррекции этого.
</p>
<p>С <em>v2.53</em> <code>AVISource</code> также может открывать видео DV типа 1 (только видео, не аудио).
</p>
<p>С <em>v2.55</em> добавлена опция <var> fourCC</var>. FourCC это
четырех-буквенный код (FOUR Character Code) в начале медиа файла, в
основном связанный с avi, который говорит,
какой кодек должна использовать система для декодирования файла. Это
можно использовать чтобы заставить AviSynth открывать файл, используя
другой кодек.
Список четырех-буквенных FOURCC кодов можно найти <a href="http://www.fourcc.org/index.php?http%3A//www.fourcc.org/codecs.php"><cite>здесь</cite></a>. По умолчанию используется четырехбуквенный код из файла avi.
</p>
<p>Некоторые MJPEG/DV кодеки не выдают правильный выход по стандарту CCIR 601 при использовании <code>AVISource</code>. Проблема может возникать если входной и выходной форматы цвета кодека различны.
Например если входной формат цвета YUY2, а выходной формат цвета RGB или наоборот. Есть два варианта решения:
</p>
<p>1) Форсировать одинаковый с входным выходной формат цвета. Так например (если входной формат RGB): </p>
<pre>AVISource("file.avi", pixel_type="RGB32")</pre>

<p>2) Скорректировать это фильтром <a href="coloryuv.htm">ColorYUV</a>:
</p>
<pre>AVISource("file.avi").ColorYUV(levels="PC-&gt;TV")</pre>

<p>Некоторые связанные обсуждения на форумах:
<br>
<cite><a href="http://forum.doom9.org/showthread.php?s=&amp;postid=330657">MJPEG
codecs</a></cite>
<br>
<cite><a href="http://forum.doom9.org/showthread.php?s=&amp;threadid=58110">DV
codecs</a></cite>
</p>
<p>Примеры:</p>

<pre>AVISource("d:\capture.avi")&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # заметка С программистам: бэкслеши не дублируются
AVISource("c:/capture/00.avi")&nbsp;&nbsp;&nbsp;&nbsp; # прямые слеши работают тоже
WAVSource("f:\soundtrack.wav")&nbsp;&nbsp;&nbsp;&nbsp; # это работает 
WAVSource("f:/soundtrack.wav")&nbsp;&nbsp;&nbsp;&nbsp; # и это тоже

# Следующее означает то же, что и AVISource("cap1.avi") + AVISource("cap2.avi")
AVISource("cap1.avi","cap2.avi")

# Следующее отключает аудио и запрашивает RGB32 декомпрессию
AVISource("cap.avi",false,"RGB32")

# Следующее открывает DV используя Canopus DV кодек
AviSource(&quot;cap.avi&quot;, false, fourCC=&quot;CDVC&quot;)

# Следующее открывает avi (например DivX3) используя XviD кодек  
AviSource(&quot;cap.avi&quot;, false, fourCC=&quot;XVID&quot;)

# Соединение двух клипов, где один из них не содержит аудио.
# При соединении клипы должны быть совместимыми (иметь одинаковые чвойства видео и аудио):
A = AviSource(&quot;FileA.avi&quot;)
B = AviSource(&quot;FileB.avi&quot;) # Нет аудио потока
A ++ AudioDub(B, BlankClip(A))  </pre>
<p>Некоторые форматы сжатия накладывают предел числа вызовов AviSource() в скрипте. 
Некоторые люди достигли этого предела с около 50 вызовами AviSource в скрипте. 
Смотри <cite><a href="http://forum.doom9.org/showthread.php?t=131687">обсуждение</a></cite>.</p>

<p><b>Изменения:</b></p>

<table border="1">

<tbody>
<tr>
<td>v2.55</td>
<td>Добавлена fourCC опция.</td>
</tr>
</tbody>
</table>

<p><kbd>
$English Date: 2008/07/11 18:20:45 $ <br>
Русский перевод 09.05.2005 Drakon Rider <a href="http://drakan.ru">drakan.ru</a>
<br>Обновления 26.08.2005-17.08.2008 Fizick
</kbd></p>

<form><input value="Назад" onclick="history.go(-1)" type="button"></form>

</body></html>