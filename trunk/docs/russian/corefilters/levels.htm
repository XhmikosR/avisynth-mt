<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="ru">
<head>
<meta http-equiv="Content-Language" content="ru">
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <title>Levels Avisynth Filter</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: levels.htm,v 1.4 2008/09/08 16:43:48 fizick Exp $
-->
</head>
<body >
<h2>
<a NAME="Levels"></a>Levels
</h2>
<p><code>Levels </code>(<var>clip, int input_low, float gamma, int input_high,
int output_low, int output_high, bool "coring"</var>)
<p>Фильтр <code>Levels</code> регулирует яркость, контрастность и величину гамма-коррекции (которая должна быть &gt; 0).
 Параметры <var>input_low</var> и <var>input_high</var> определяют, какие входные пикселы считаются 
 как полностью черные (низкое значение, low) и полностью белые(высокое значение, high), 
 параметры <var>output_low</var> и <var>output_high</var> 
 определяют выходные значения, соответствующие полностью черному и белому, 
 и параметр <var>gamma</var> управляет уровнем нелинейности преобразования.
  Чтобы быть точным, функция преобразования: 
<br>
<blockquote>output = [(input - input_low) / (input_high -
input_low)]<sup>1/gamma</sup>
(output_high - output_low) + output_low</blockquote>
Это один из тех фильтров, для которых было бы замечательно иметь графический пользовательский интерфейс.
 Т.к. я не могу предложить графический пользовательский интерфейс (по крайней мере в текущем виде AviSynth),
  я решил, что я хотя бы могу сделать этот фильтр совместимым с фильтром от VirtualDub когда клип в формате RGB.
   В этом случае можно взять числа из диалога Levels программы "VirtualDub" и ввести их как параметры для 
   <code>Levels</code> фильтра и получить аналогичные результаты. 
   Однако, входные и выходные параметры могут быть больше 255.

<p>При обработке информации в YUV режиме, <code>Levels</code>  делает гамма-коррекцию только информации по яркости,
 но не по цветности.
  Гамма-коррекция на самом деле является концепцией RGB формата и я не знаю как ее сделать правильно для YUV.
   Однако, если <var>gamma</var>=1.0, фильтр должен иметь одинаковый эффект в RGB и YUV режимах. 
   Для регулирования яркости или контрастности лучше использовать 
   <a href="tweak.htm">Tweak</a> или <a href="coloryuv.htm">ColorYUV</a>,
    потому что <code>Levels</code>  изменяет также и цветность клипа.

<p>В <em>v2.53</em> добавлено опциональное <var>coring</var> = <var>true/false</var> 
(true по умолчанию, что отражает поведение старых версий).<br> 
<var>coring</var>=true: входной диапазон яркости ограничивается значениями [16,235] (и цветность [16,240]),
результат *масштабируется* из [16,235] в [0,255], выполняется преобразование согласно указанной выше формуле, 
и выход *масштабируется* обратно из [0,255] в [16,235].<br>
<var>coring</var>=false: выполняется преобразование согласно указанной выше формуле. 

<pre># не изменяет [16,235] клип, но сжимает  (или ограничивает) [0,255] клип в [16,235]:

Levels(0, 1, 255, 0, 255)

# входная яркость масштабируется из [16,235] к [0,255],
# производится конверсия [0,255]-&gt;[16,235] согласно формуле,
# выход масштабируется обратно из [0,255] к [16,235]. 
# Например все значения яркости в пределах [0,16] конвертируются в 30
Levels(0, 1, 255, 16, 235)

# гамма-корректирует изображение для отображения в светлом окружении :
# пример: яркость 16 остается 16, 59 конвертируется в 79, и.т.д..
Levels(0, 1.3, 255,0, 255)

# инвертирует изображение (делает фото-негатив):
# пример: яркость 16 конвертируется в 235
Levels(0, 1, 255, 255, 0)

# не изменяет [0,255] клип; не изменяет [16,235]:
Levels(0, 1, 255, 0, 255, coring=false)

# масштабирует [0,255] клип в [16,235]:
Levels(0, 1, 255, 16, 235, coring=false)  # это то же что и ColorYUV(levels=&quot;PC-&gt;TV&quot;)

# масштабирует [16,235] клип в [0,255]:
Levels(16, 1, 235, 0, 255, coring=false)  # это то же что и ColorYUV(levels=&quot;TV-&gt;PC&quot;)</pre>

<p><kbd>$English Date: 2005/11/15 21:23:11 $ <br>
Русский перевод 11.05.2005 Drakon Rider <a href="http://drakan.ru">drakan.ru</a><br>
Обновлен 17.12.2005 Fizick
</kbd></p>
<form><input TYPE="Button" VALUE="Назад"
onClick="history.go(-1)"></form>
</body>
</html>
