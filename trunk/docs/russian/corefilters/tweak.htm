<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="ru">
<head>
<meta http-equiv="Content-Language" content="ru">
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
  <title>Tweak Avisynth Filter</title>
  <link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: tweak.htm,v 1.5 2008/09/08 16:43:48 fizick Exp $
-->
</head>
<body>
<h2>
<a name="Tweak"></a>Tweak
</h2>
<p><code>Tweak </code>(<var>clip, float &quot;hue&quot;, float &quot;sat&quot;,
  float &quot;bright&quot;, float &quot;cont&quot;, bool &quot;coring&quot;,
  bool &quot;sse&quot;, float &quot;startHue&quot;, float &quot;endHue&quot;,
  float &quot;maxSat&quot;, float &quot;minSat&quot;, float &quot;interp&quot;</var>)
</p>
<p>Функция реализует способ настройки цветового тона (hue),
насыщенности (saturation), яркости и контраста видео-клипа.
С версии <em>v2.58</em>, как насыщенность, так и цветовой тон могут подстроены,
для насыщенности в диапазоне [<var>minSat</var>, <var>maxSat</var>]
и тон в диаразоне [<var>startHue</var>, <var>endHue</var>]. <var>interp</var>
интерполирует настроенную насыщенность для предотвращения полосатости.
</p>
<p><var>Hue</var>: (-180.0 ... +180.0, по умолчанию 0.0) используется
для регулировки цветового тона изображения. Положительные значения
сдвигают цвет изображения в сторону красного. Отрицательные - в сторону
зеленого.
</p>
<p><var>Sat</var>: (0.0 ... 10.0, по умолчанию 1.0) используется для
регулировки цветовой насыщенности изображения. Значения выше 1.0
увеличивают насыщенность. Значения ниже 1.0 - уменьшают. Для удаления
цвета (gr<span lang="en-us">e</span>yscale) используйте sat=0.
</p>
<p><var>Bright</var>: (-255.0 ... 255.0, по умолчанию 0.0) используется
для регулировки яркости изображения. Положительные значения увеличивают
яркость. Отрицательные - уменьшают.
</p>
<p><var>Cont</var>: (0.0 ... 10.0, по умолчанию 1.0) используется для
регулировки контрастности изображения. Положительные значения
увеличивают контрастность. Отрицательные - уменьшают.
</p>
<p> <i><var>coring</var> = </i>true/false (необязательный; по
умолчанию true, что соответствует поведению в старых версиях).
Когда установлен в true - означает&nbsp; то, что яркость (Y) обрезается
диапазоном [16,235], а когда установлен в false&nbsp; - диапазон
яркости не изменяется. [добавлен в версии <em>2.53</em>.]
</p>
<p> <var>sse</var> = true/false необязательный; по умолчанию false),
при true отменяет запрет SSE кода в случае необходимости
(возможно на процессорах AMD должно работать быстрее). [добавлен в
версии <em>2.56</em>.]
</p>
<p> <var>startHue</var> (по умолчанию 0), <var>endHue</var> (по умолчанию 360): (оба от
0 до 360; даны в градусах.). Тон и насыщенность будут подстроены в диапазоне [<var>startHue</var>,
<var>endHue</var>] если startHue&lt;endHue. Заметьте, что тон является периодическим, таким образом
тон 360 градусов соответствует тону 0 градусов. Если
endHue&lt;startHue то диапазон [<var>endHue</var>, 360] и [0, <var>startHue</var>]
будет выбран (то есть против часовой стрелки). Если вам надо выбрать, например, диапазон [350,370], 
вы должны указать startHue=370 и endHue=350. Таким образом, при использовании величин по умолчанию
будут обрабатываться все пикселы.</p>
<p><var>maxSat</var> (по умолчанию 150), <var>minSat</var>
(по умолчанию 0): (оба от 0 до 150 с minSat&lt;maxSat; даны в процентах).
Тон и насыщенность будут подстроены для величин в диапазоне [<var>minSat</var>,<var>maxSat</var>]. 
Практически насыщенность пиксела будет в диапазоне [0,100] (то есть 0-100%), так как они отвечают
корректным RGB пикселам (100% отвечает R=255, G=B=0, что имеет насыщенность 119). 
Пересвет (до 150%) позволен для некорректных RGB пикселов (150%
отвечает U=V=255, что имеет насыщенность sqrt(127^2+127^2) = 180). Таким образом
при использовании величн по умолчанию все пикселы будут обработаны.
<p><var>interp</var>:
(от 0 до 32, по умолчанию 16) используется для интерполяции построенной насыщенности. 
Инрерполяция производится в диапазоне [<var>minSat</var>-<var>interp</var>, <var>minSat</var>]
и [<var>maxSat</var>, <var>maxSat</var>+<var>interp</var>]. Нет интерполяции
для interp=0, что может быть полезно если клип состоит из однородных цветов.
Интерполяция является линейной.</p>
<h3>Использование и примеры: подстройка контраста и яркости</h3>
<table border="1" width="100%">
  <tr>
    <td width="100%" align="center"><img border="0" src="../pictures/corefilters/tweak_original.jpg" width="480" height="360"></td>
  </tr>
  <tr>
    <td width="100%" align="center">оригинал</td>
  </tr>
</table>
<p>Есть две проблемы с этим изображением. Оно слишком темное, и контраст слишком мал
(детали дерева не видимы например). Во-первых мы будем увеличивать яркость, чтобы сделать
картинку менее темной (левая картинка ниже).
Во-вторых, мы будем увеличивать контраст, чтобы сделать детали в темных местах более видимыми
(правая картинка ниже). Однако удостоверьтесь, что яркие части не стали чрезмерно яркими.
<table border="1" width="100%">
  <tr>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/tweak_bright20.jpg" width="480" height="360"></td>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/tweak_bright20_cont12.jpg" width="480" height="360"></td>
  </tr>
  <tr>
    <td width="50%" align="center">bright=20</td>
    <td width="50%" align="center">bright=20, cont=1.2</td>
  </tr>
</table>
<h3>Использование и примеры: подстройка насыщенности</h3>
<table border="1" width="75%">
  <tr>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/tweak_original2.jpg" width="320" height="418"></td>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/tweak_sat075.jpg" width="320" height="418"></td>
  </tr>
  <tr>
    <td width="50%" align="center">original</td>
    <td width="50%" align="center">sat=0.75</td>
  </tr>
</table>
<p>Предположим мы хотим понизить насыщенность кожи девушки, а
фон должен остаться нетронутым. Правильный путь сделать это: установить sat=0, и
понижать диапазон тона пока вы не найдете корректный диапазон тона, который должен быть обработан.
Это может быть сделано с использованием вектроскопа, но также и вручную. (При необходимости
диапазон насыщенности также может быть указан, если темные и светлые части
этого тона не должны быть обработаны.) Результат приведен ниже.</p>
<table border="1" width="75%">
  <tr>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/tweak_hue105-138.jpg" width="320" height="418"></td>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/tweak_hue105-138_sat075.jpg" width="320" height="418"></td>
  </tr>
  <tr>
    <td width="50%" align="center">sat=0, startHue=105, endHue=138</td>
    <td width="50%" align="center">sat=0.75, startHue=105, endHue=138</td>
  </tr>
</table>
<p>Вместо этого, мы можем также попробовать &quot;выбрать&quot; кожу девушки
путем только сужения диапазона насыщенности. Результат показан ниже. В данном случае
результаты практически идентичны.</p>
<table border="1" width="75%">
  <tr>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/tweak_sat70-50.jpg" width="320" height="418"></td>
    <td width="50%" align="center"><img border="0" src="../pictures/corefilters/tweak_sat70-50_sat075.jpg" width="320" height="418"></td>
  </tr>
  <tr>
    <td width="50%" align="center">sat=0, maxSat=75, minSat=55</td>
    <td width="50%" align="center">sat=0.75, maxSat=75, minSat=55</td>
  </tr>
</table>
<p><b>История изменений:</b></p>
<table border="1">
  <tbody>
    <tr>
      <td>v2.56</td>
      <td>добавлен sse=true/false для разрешения sse кода<br>
      </td>
    </tr>
    <tr>
      <td>v2.58</td>
      <td>добавлены startHue, endHue, maxSat, minSat и interp</td>
    </tr>
  </tbody>
</table>
<p><kbd>$English Date: 2007/08/22 20:51:54 $<br>
Русский перевод 21.05.2005 Turyst04 <a href="mailto:Turyst04@nextmail.ru">Turyst04@nextmail.ru</a><br>
Добавления 11.06.2007-26.08.2007 Fizick http://avisynth.org.ru</kbd></p>
<form><input value="Back" onclick="history.go(-1)" type="button"></form>
</body>
</html>