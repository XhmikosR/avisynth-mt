<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="ru">
<head>
<meta http-equiv="Content-Language" content="ru">
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Subtitle Avisynth Filter</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: subtitle.htm,v 1.7 2008/12/06 17:51:58 fizick Exp $
-->
</head>
<body>
<h2>Subtitle</h2>
<p><code>Subtitle </code>(<var>clip, string text,
  int&nbsp;&quot;x&quot;,
  int&nbsp;&quot;y&quot;,
  int&nbsp;&quot;first_frame&quot;,
  int&nbsp;&quot;last_frame&quot;,
  string&nbsp;&quot;font&quot;,
  float&nbsp;&quot;size&quot;,
  int&nbsp;&quot;text_color&quot;,
  int&nbsp;&quot;halo_color&quot;,
  int&nbsp;&quot;align&quot;,
  int&nbsp;&quot;spc&quot;,
  int&nbsp;&quot;lsp&quot;,
  float&nbsp;&quot;font_width&quot;,
  float&nbsp;&quot;font_angle&quot;,
  bool&nbsp;&quot;interlaced&quot;</var>)</p>

<code>Subtitle </code> (<var>clip, string text</var>)</p>
<p>Фильтр <code>Subtitle</code> вставляет в группу кадров строку текста (с использованием сглаживания - anti-aliasing).
Если необходимо вставить несколько титров или титр из нескольких строк, нужно использовать фильтр <code>Subtitle</code>
несколько раз подряд. Видимо, он не очень подходит для сколько-нибудь сложных случаев использования.
Все параметры, кроме самой текстовой строки, являются необязательными. Можно задавать их в произвольном порядке, 
используя конструкцию вида <i>name</i>=<i>value</i>.</p>
<p><b>Параметры</b></p>
<p><var>text</var> – текст, размещаемый на кадрах в интервале <var>first_frame</var> – <var>last_frame</var>. 
<p>(<var>x</var>,<var>y</var>) – координаты текста (см. ниже таблицу точек привязки).
Можно установить их в -1 для автоматического центрирования текста по горизонтали и/или вертикали.
Другие отрицательные значения <var>x</var> и <var>y</var> могут быть использованы, чтобы задать субтитры частично вне экрана. 
<b>Предупреждение:</b> Если ваш скрипт использует Subtitle вместе с <a href="animate.htm">Animate</a>,
и отрицательными величинами <var>x</var> или <var>y</var>, то <var>x</var> или
<var>y</var> могут в некоторый момент стать -1, вызывая глюки на видео.</p>
<p><var>font</var> – шрифт (любой из установленных в системе, см. папку 'windows\fonts'). 
<p><var>size</var> – размер шрифта (видимо, в пикселах, а не в пунктах – прим.перев.)
<p><var>text_color</var> и <var>halo_color</var> задают цвет текста и окантовки соответственно в шестнадцатиричных RGB величинах, как в формате html 
(т.е. три двузначных шестнадцатиричных числа, записанных подряд. Только перед ними надо ставить символ $, т.к. # уже
используется для обозначения комментария).
<p>Параметр <var>align</var> (выравнивание) позволяет задать точку привязки, т.е. тот угол текста, координаты которого задаются в 
<var>x</var>, <var>y</var>, значение аналогично цифровому блоку клавиатуры :</p>
<table border="1" width="100%">
  <tr>
    <td width="15%">&lt;левый угол&gt; 7 &lt;верх&gt;</td>
    <td width="15%"> 	&lt;середина&gt; 8 &lt;верх&gt;</td>
    <td width="15%"> 	&lt;правый угол&gt; 9 &lt;верх&gt;</td>
    <td width="25%"> 	верхний край текста имеет координату y для align=7,8,9</td>
  </tr>
  <tr>
    <td width="15%">&lt;левый угол&gt; 4 &lt;базовая линия&gt;</td>
    <td width="15%"> 	&lt;середина&gt; 5 &lt;базовая линия&gt;</td>
    <td width="15%"> 	&lt;правый угол&gt; 6 &lt;базовая линия&gt;</td>
    <td width="25%"> 	базовая линия (нижний край букв типа 'к', 'а', не имеющих выступающих вниз элементов) имеет координату y для align=4,5,6</td>
  </tr>
  <tr>
    <td width="15%">&lt;левый угол&gt; 1 &lt;низ&gt;</td>
    <td width="15%"> 	&lt;середина&gt; 2 &lt;низ&gt;</td>
    <td width="15%"> 	&lt;правый угол&gt; 3 &lt;низ&gt;</td>
    <td width="25%"> 	нижний край текста имеет координату y для align=1,2,3</td>
  </tr>
  <tr>
    <td width="15%">левый край текста имеет координату x для align=1,4,7</td>
    <td width="15%">середина текста имеет координату x для align=2,5,8</td>
    <td width="15%">правый край текста имеет координату x для align=3,6,9</td>
    <td width="25%">&nbsp;</td>
  </tr>
</table>
<p> Примечание: установка для середины по высоте не предусмотрена.</p>
<p> Параметр <var>spc</var> позволяет регулировать межсимвольный интервал (положительное число увеличивает, 
    отрицательное уменьшает интервал относительно номинала). Согласно документации Visual C++ по 
    функции SetTextCharacterExtra(), выполняющей данную задачу, 
    значение задаётся в логических единицах и округляется до ближайшего 0.125 пиксела. Это бывает полезно 
    для подгонки шрифта текста под размер шрифта в титрах фильмов, который обычно шире при той же высоте, 
    или для заполнения заданного 
    прямоугольника текстом с равными межсимвольными расстояниями.</p>
<p>Многострочный текст использующий &quot;\n&quot; добавлен в <em>v2.57</em> и это используется если установлен параметр <var>lsp</var>. 
Он устанавливает интервал между строками в единицах 0.125 пиксела.</p>

<p>Параметр <var>font_width</var> позволяет вам изменять, в единицах 0.125,
  аспектное отношение знака символов согласно документации Visual C++ для
  функции CreateFont(). Он соотносится к параметру <var>size</var> через
  аспектное значение по умолчанию GDI и натуральное аспектное значение выбранного шрифта.</p>

<p>Параметр <var>font_angle</var> позволяет вам изменять угол наклона 
  текста в 0.1 градус приращениях против часовой стрелки.</p>

<p>Параметр <var>interlaced</var>, если включен, снижает мерцания от резких
  тонких вертикальных переходов на чересстрочных дисплеях. Он делает это путем увеличения
  окна для понижения ступенчатости включением 0.5 веса пиксела от строк сверху и снизу, 
  это эффективно применяет мягкое вертикальное размывание.</p>

<p> Краткая форма вызова функции (со всеми параметрами по умолчанию) полезна, 
когда важен не внешний вид текста, а содержание, например, для вывода 
    отладочной информации. Пример: если вы используете фильтр <a href="stack.htm"> StackVertical</a> 
    для отображения нескольких вариантов кадра и хотите как-то пометить их.</p>
<p> Этот фильтр используется в команде <a href="version.htm"> Version</a> и для отображения собщений об ошибке, а также
    в фильтрах типа <a href="showframes.htm">ShowFrameNumber</a> c друзъями.</p>
<p>
    <b>Значения по умолчанию:</b>
<table border="1" width="50%">
  <tr>
    <td width="10%"><var>clip</var></td>
    <td width="50%">            last&nbsp;</td>
  </tr>
  <tr>
    <td width="10%"><var>text</var></td>
    <td width="50%">            должен быть определён</td>
  </tr>
  <tr>
    <td width="10%"><var>x</var></td>
    <td width="50%">            8 если align=1,4,7 или не задан; -1 если align=2,5,8; width-8 если align=3,6,9&nbsp;</td>
  </tr>
  <tr>
    <td width="10%"><var>y</var></td>
    <td width="50%">            height-1 если align=1,2,3; size если align=4,5,6 или не задан; 0 если align=7,8,9</td>
  </tr>
  <tr>
    <td width="10%"><var>first_frame</var></td>
    <td width="50%">            0</td>
  </tr>
  <tr>
    <td width="10%"><var>last_frame</var></td>
    <td width="50%">            framecount(clip)-1</td>
  </tr>
  <tr>
    <td width="10%"><var>font</var></td>
    <td width="50%">            "Arial"</td>
  </tr>
  <tr>
    <td width="10%"><var>size</var></td>
    <td width="50%">18.0</td>
  </tr>
  <tr>
    <td width="10%"><var>text_color</var></td>
    <td width="50%">            $FFFF00 &lt;непрозрачный желтый&gt;</td>
  </tr>
  <tr>
    <td width="10%"><var>halo_color</var></td>
    <td width="50%">            0 &lt;черный&gt;</td>
  </tr>
  <tr>
    <td width="10%"><var>align</var></td>
    <td width="50%">            Обычно 4 &lt;левый угол, базовая линия&gt;; если x=-1, то 5 &lt;середина и базовая линия&gt;</td>
  </tr>
  <tr>
    <td width="10%"><var>spc</var></td>
    <td width="50%">            0 &lt;без дополнительных интервалов шрифта&gt;</td>
  </tr>
  <tr>
    <td width="10%"><var>lsp</var></td>
    <td width="50%">            0 &lt;многострочный не разрешен&gt;</td>
  </tr>
  <tr>
    <td width="10%"><var>font_width</var></td>
    <td width="50%">            0 &lt;system default></td>
  </tr>
  <tr>
    <td width="10%"><var>font_angle</var></td>
    <td width="50%">            0.0 градусов</td>
  </tr>
  <tr>
    <td width="10%"><var>interlaced</var></td>
    <td width="50%">            нет</td>
  </tr>
</table>
<p>
    <b>Примеры</b>
<pre># сообщение посередине клипа:
AviSource(&quot;D:\clip.avi&quot;)
Subtitle(&quot;Hello world!&quot;, align=5)</pre>
<pre># сообщение в верхнем левом углу с заданным шрифтом, размером и цветом:
AviSource(&quot;D:\clip.avi&quot;)
Subtitle(&quot;Hello world!&quot;, font=&quot;georgia&quot;, size=24, text_color=$ff0000, align=9)</pre>
<pre># Печатает текст в несколько строк:
# без текстовых ореолов
BlankClip()
Subtitle("Some text on line 1\\nMore text on line 1\nSome text on line 2", \
          lsp=10, halo_color=$ff000000)

# Это дает результат:
Some text on line 1\nMore text on line 1
Some text on line 2</pre>
<p>
    <b>Особенности в разных версиях</b>
<table border="1" width="50%">
  <tr>
    <td width="10%">v2.58</td>
    <td width="50%">Добавлены font_width, font_angle, interlaced и alpha color смешивание.</td>
  </tr>
  <tr>
    <td width="10%">v2.57</td>
    <td width="50%">Добавлен многострочный текст и параметр межстрочного интервала.</td>
  </tr>
  <tr>
    <td width="10%">v2.07</td>
    <td width="50%">Добавлены параметры align и spc.<br>
        Задание y=-1 вычисляет середину по вертикали (вертикальное выравнивание не меняется)&nbsp;<br>
        Значения x и y по умолчанию зависят от выравнивания (в прежних версиях x=8, y=size)&nbsp;</td>
  </tr>
  <tr>
    <td width="10%">v1.00</td>
    <td width="50%">Задание x=-1 центрирует по горизонтали (недокументировано до v2.07)</td>
  </tr>
</table>
<p><kbd>$English Date: 2008/11/16 13:59:30 $<br>
Русский перевод 18.05.2005 Eugene Vasiliev (eugvas<span>&#64;</span>mccme.ru)<br>
Обновления 31.12.2006-06.12.2008 Fizick http://avisynth.org.ru</kbd></p>
<FORM>
<INPUT TYPE="Button" VALUE="Back"
onClick="history.go(-1)">
</form>
</body>
</html>
