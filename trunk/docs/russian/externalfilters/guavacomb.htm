<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ru">
<head>
<title>GuavaComb</title>
  <meta content="text/html; charset=windows-1251" http-equiv="Content-Type">
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: guavacomb.htm,v 1.3 2006/12/13 21:01:40 fizick Exp $ 
-->
</head>
<body>
<h1>GuavaComb</h1>
<h2>Общая информация</h2>
<b>автор:</b>  Lindsey Dubb
<br><b>версия:</b>  0.9a<br>
<b>закачка:</b>  <a href="http://www.avisynth.org/warpenterprises/">http://www.avisynth.org/warpenterprises/</a><br>
<b>категория:</b> Плагины для телепередач<br>
<b>требования:</b> YUY2 цветовой формат
<hr>
<h3>Описание</h3>
        <p>Этот фильтр удаляет ползание точек (dot crawl), радужные помехи (rainbows),
          и некоторые виды мерцания (shimmering).
        Эффект наиболее заметен на генерированных компьютером изображениях
        подобно субтитрам, картам погоды, и логотипам каналов при использовании композитного или
        плохо разделенного S-Video сигнала. Нормальное видео улучшается более слабо.</p>
        <p>Отметьте, что данный фильтр никак не относится к “comb” (гребенке) в смысле,
        используемом многими в видео сообществе! Он вовсе не предполагает снизить артефакты сплетения (weave)
        полей кадра (тянущиеся горизонтальные линии, гребенка). Для этого, Вам необходимо посмотреть на фильтры,
        предназначенные для деинтерлейса.</p>
        <p>Данный "гребенчатый" (comb) фильтр работает только во времени, не пространственно. В результате,
        он поможет борьбе с ползанием точек, радужными помехами,
        и мерцанием только в стационарных частях видео.</p>
        <p>Данный фильтр работает в цветовом пространстве YUY2. Так что если Ваш клип закодирован
        в RGB цветах, Вы должны сначала обработать его с ConvertToYUY2().
        Он предназначен для прогона на материале, который захвачен в полном разрешении NTSC или
        PAL — Вы можете прогнать его на другом видео, но это вероятно 
        не даст много хорошего.</p>
        <p>Чтобы использовать Guava, Ваш компьютер должен быть способен выполнять инструкции MMX.
        Это означает что будет работать любой компьютер, более недавний чем оригинальный 
        Pentium I.</p>
        <h3>Кто должен использовать его?</h3>
        <p>Guava предназначен для всех, обрабатывающих композитный сигнал. Это то
        что Вы имеете, если используете внутренний ТВ тюнер или коннектор RCA
        (тюльпан).</p>
        <p>Гребенчатый фильтр может также дать результат, если Ваш S-Video источник 
        не очень хорошо разделен. DVD должны иметь высокое разделение если они
        внутренние или подключены с S-Video. Лазерные диски и S-VHS видеомагнитофоны бывают разными  —
        если они имеют “3D гребенчатый фильтр”, тогда ползание точек должно уже быть убрано. 
        Если Вы имеете любой другой вид гребенчатого фильтра, тогда GuavaComb 
        может или не может помочь — Вы должны судить сами.
        Если Ваш S-VHS магнитофон или проигрыватель Лазерных дисков не имеет гребенчатого фильтра, тогда
        данный Временной Гребенчатый фильтр должен дать результат.</p>
        <p>Другой вопрос, который следует держать в мыслях, это качество Вашей входной видеокарты (захвата).
        Если Ваша входная видеокарта имеет свой собственный 2D гребенчатый фильтр, 
        тогда Guava будет много менее полезен. Но GuavaComb может помочь в некоторых местах, где 2D
        фильтр не может, так что это может быть еще одним достойным применением.</p>
        <p>SECAM обращается с цветом методом, очень отличающимся от PAL или NTSC. Исключая
        видео с Саудовской Аравии (которая использует SECAM с кодированием цвета в подобном PAL-у стиле),
        данный фильтр не должен быть использован на SECAM клипах.</p>
        <h3>Настройки</h3>
        <p>К сожалению, наилучшие настройки для данного фильтра зависят от
        деталей Вашей карты видеозахвата. В частности, некоторые неясные настройки
        типа усиление контуров яркости (luma peaking) (на карте Bt8x8) может значительно повлиять на настройки,
        которые должны использовать ВЫ.</p>
        <p><var>Либо &quot;NTSC&quot; или &quot;PAL&quot;</var>; Эта настройка не имеет умолчания.
        </i></p>
        <p>Вы вероятно можете предположить, как выбрать это —
        &quot;NTSC&quot; для видео Японии и Северной Америки, &quot;PAL&quot;
        для большинства другого материала. Если вы выберете неверно, данный фильтр будет 
        более чем бесполезным.</p>
        <p>В настоящий момент существует также третий режим, называемый
        &quot;Progressive&quot;. Он предназначен для тестирования, чтобы увидеть, может ли
        этот фильтр быть использован для коррекции артефактов сжатия. Я не имею идей, 
        будет ли он реально делать что-либо хорошее.</p>
        <p><var>Recall</var> (память)<br>
        <i>Целое от 0 до 99; 85 по умолчанию</i></p>
        <p>Это по настоящему важная настройка. Она определяет, как далеко в прошлое
        будет смотреть Guava, чтобы подтвердить, что в действительности происходит 
        некоторое мерцание. Установите ее высокой (выше 75%) чтобы избежать артефактов
        на сценах с повторяющимся движением. Установите ее выше (сверх 85%) чтобы
        избежать проблем с телеграфными (биржевыми) лентами (ticker tapes). Но не устанавливайте ее слишком высоко
        (выше 95%), иначе фильтру понадобится большое время, чтобы заработать.</p>
        <p>Если вы меняете эту настройку, пройдет некоторое время, прежде чем
        экран установится. По настоящему высокие настройки (выше 90%) нуждаются в особенно 
        большой длительности.</p>
        <p><var>MaxVariation</var>(максимальная вариация)<br>
        <i>Целое от 0 до 100; 25 по умолчанию</i></p>
        <p>Эта опция позволяет вам выбрать, насколько может измениться цвет, прежде чем
        фильтр решит, что разница должна быть из-за движения. Это важная настройка
        для избежания артефактов, но к сожалению немного хитрая для выбора.</p>
        <p>Чем меньше вы установите ее, тем менее часто вы будете видеть переходные пятна
        при переключении сцен. Но если вы установите ее слишком низкой, вы не удалите
        многих перекрестных помех (crosstalk).</p>
        <p>Наилучшие настройки зависят от деталей вашей карты захвата. Например,
        если вы использует карту на Bt8x8 и имеете разрешенную опцию "Luma Peaking",
        вам надо увеличить эту настройку на от 10 до 15 очков.</p>
        <p>Нет интуитивного способа выбрать <var>MaxVariation</var>,
        так что вот введение, чтобы помочь вам установить ее:</p>
        <ul>
          <li>Во первых, найдите наихудшее стационарное ползание точек или радугу из имеющихся.
            В США, Заголовки (Head­lines) CNN является надежным (прим. перев. - шутка?) источником, 
            так же как “T” на логотипе станции музыки Кантри и радарные карты на канале погоды.
            Если вы получили опорное видео, подключите его через композит и запишите
            статический кадр с соседствующими зелеными и красными полосами. 
            (НО если ваша карта захвата имеет 2D гребенчатый фильтр,
            то цветные полосы не будут работать, так как гребенчатый фильтр карты
            исправит это.)
          <li>Установите Recall и Activation в очень малые величины — 0 должен подойти.
            Установите <var>MaxVariation</var> действительно высокой (порядка 80).
            Артефакты должны исчезнуть.
          <li>Уменьшите вашу <var>MaxVariation</var> пока 
            ползание точек или мерцания вернутся. Затем увеличьте ее достаточно для того,
            чтобы артефакты снова исчезли. Вы получили оптимальную величину параметра.
          <li>Помните переключиться назад к более разумным значениям Recall и Activation..</li>
        </ul>
        <p>&nbsp;</p>
        <p><var>Activation</var>(активация)</p>
        <p>Эта настройка имеет много более слабый эффект. Если вы установите ее высокой, 
        фильтр будет корректировать, только если было непрерываемое мерцание.
        Установите ее низкой, и фильтр будет терпеть большее прерывание — 
        но также будет немного более восприимчивым к артефактам.</p>
        <p>Если вы будете применять шумовой фильтр перед Guava, вы должны установить
        настройку низкой — 30% работает хорошо для меня. Без шумопонижающего фильтра, вам надо
        установить ее достаточно высокой (около 70%) чтобы избежать переходных пятен,
        при исчезновении ползания точек. Если вы не заботитесь о мерцаниях и
        просто хотите устранить ползания точек, вы можете безопасно установить ее около 100%.</p>
        <p><b>Взгляд на проблемы</b></p>
        <p>Существует несколько главных видов проблем, на которых надо обратить внимание. 
        Наиболее важная происходит на переходах сцен, где области, которые показывали ползание точек,
        могут быть потенциально усреднены с первым полем после перехода.
        Второй наиболее важный видимый артефакт - это отдельные
        некорректно смешанные (blended) пикселы, где есть быстрое движение. Они оба могут
        значительно уменьшены путем снижения настройки <var>MaxVariation</var>.
        <p>Последнее (но вообще менее значимое) место для проверки - 
        с повторяющимся движением — Если случится, что оно произойдет с нехорошей 
        частотой, Guava может ошибочно интерпретировать его как перекрестную помеху (crosstalk). 
        В частности, такие попадания могут вызвать эффекты стробоскопа. Также некоторые 
        телеграфные (биржевые) ленты (ticker tapes) 
        могут быть ошибочно восприняты как перекрестные помехи (crosstalk). 
        Вы можете в общем избежать таких проблем путем увеличения настройки <var>Recall</var>.</p>
        <hr>
        <h3>Где я должен поместить его в моем скрипте?</h3>
        <p>Вообще говоря, лучше всего выполнить гребенчатую фильтрацию сразу после любых 
        сглаживающих фильтров. Исключением является "Peach Smoother", который
        работает наилучшим образом сразу после гребенчатого фильтра. Это потому, что Peach будет
        в противном случае интерпретировать цветовую перекрестную помеху как шум, 
        препятствуя сглаживанию вокруг него.</p>
        <p>Гребенчатая фильтрация должна определенно проводиться перед любыми шагами обратного телекино преобразования.
        Цветная перекрестная помеха может плохим образом сбить обратное телекино, так что 
        стоит устранить ее перед попытками выявить раскладку (pattern) полей pulldown.</p>
        <hr>
        <h3>Черт возьми, что такое гребенчатый (Comb) фильтр?</h3>
        <p>Технически выражаясь, он усредняет перекрест (взаимовлияние) цветности/яркости,
        вызываемый их несовершенным разделением из композитного сигнала. Он называется
        "гребенчатым" (“comb”) по в действительности туманной причине — так как частотный отклик
        выглядит (очень в небольшой степени) немного подобно гребенке (прим. 
        перев. - ряд максимумов отклика на некоторых частотах на более ровном 
        фоне). Видимо, инженеры обработки
        сигналов помешались на наведении лоска.
        (прим. перев. - не факт, что GuavaComb имеет тот же алгоритм, что и телевизионные цифровые гребенчатые фильтры.)</p>
        <table border="1" width="100%">
          <tr>
            <td width="50%">Вот пример проблемы, взятый с американского кабельного телевидения
                с внутренним тюнером. Есть сильное ползание точек (heavy dot crawl)
                в номере года, и более слабые проблемы в и вокруг
                другого текста. На экране эти точки кажутся движущимися 
                медленно вверх.</td>
            <td width="50%"><img alt="CNN without Guava Comb" src="../pictures/externalfilters/gcomb_off_election.png" align="right" width="614" height="527">
            </td>
          </tr>
          <tr>
            <td width="50%">А вот эффект  GuavaComb фильтра на тот же рисунок.
                Посредством исправления ползания точек, остается банальный 
                заголовок.</td>
            <td width="50%"><img alt="CNN with Guava Comb" src="../pictures/externalfilters/gcomb_on_election.png" align="right" width="614" height="527">
            </td>
          </tr>
        </table>
        <table width="100%" border="1">
          <tbody>
            <tr>
              <td><img alt="Джек без Guava Comb" src="../pictures/externalfilters/gcomb_off_jack.jpg" align="left" width="134" height="202">
                <p>По причине того, что редко перекрест так очевиден, как в той последней графике,
                часто есть слабый перекрест на краях в мультфильмах и нормальном видео.
                Например, первая картинка показывает "Джека"
                без фильтрации.</p>
              </td>
            </tr>
            <tr>
              <td><img alt="Jack with Guava Comb" src="../pictures/externalfilters/gcomb_on_jack.jpg" align="left" width="134" height="202">
                <p>...и здесь он после гребенчатой фильтрации. Заметьте сглаженную
                границу между его головой/шеей и фоном. (Игнорируйте всякую всячину под его губами — это пришло от
                сжатия изображения.)<br>
                </p>
              </td>
            </tr>
            <tr>
              <td><img alt="CNN без Guava Comb" src="../pictures/externalfilters/gcomb_off_seattle_channel.png" align="right" width="491" height="252">
                <p>Здесь вы видите другой эффект цветовой перекрестной помехи —
                радужные помехи (rainbows).</p>
              </td>
            </tr>
            <tr>
              <td><br>
                <img alt="CNN с Guava Comb" src="../pictures/externalfilters/gcomb_on_seattle_channel.png" align="right" width="491" height="252">
                <p>А это - картинка из того же клипа, исправленная
                Guava Comb.</p>
              </td>
            </tr>
          </tbody>
        </table>

<p><kbd>$English Date: 2004/08/13 21:57:25 $<br>
Русский перевод 29.06.2005-04.12.2006 Fizick http://bag.hotmail.ru</kbd></p>
</body>
</html>