<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<title>Resize Avisynth Filter</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body>
<h2>BicubicResize / BilinearResize / BlackmanResize / GaussResize / LanczosResize /
Lanczos4Resize / PointResize / SincResize / Spline16Resize / Spline36Resize / Spline64Resize</h2>
<p><code>BicubicResize </code>(<var>clip, int target_width, int target_height, float 
  "b=1./3.", float "c=1./3.", float "src_left", float "src_top", 
  float "src_width", float "src_height"</var>)<br>
  <code>BilinearResize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float "src_width", 
  float "src_height"</var>)<br>
  <code>BlackmanResize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float "src_width", float "src_height", int "taps=4"</var>)<br>
  <code>GaussResize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float "src_width", float "src_height", float "p=30.0"</var>)<br>
  <code>LanczosResize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float "src_width", float "src_height", int "taps=3"</var>)<br>
  <code>Lanczos4Resize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float "src_width", float "src_height"</var>)<br>
   <code>PointResize </code>(<var>clip, int target_width, int target_height, float "src_left", 
  float "src_top", float "src_width", float "src_height"</var>)<br>
  <code>SincResize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float "src_width", float "src_height", int &quot;taps=4&quot;</var>)<br>
  <code>Spline16Resize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float "src_width", float "src_height"</var>)<br>
  <code>Spline36Resize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float "src_width", float "src_height"</var>)<br>
  <code>Spline64Resize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float "src_width", float "src_height"</var>)
</p>
<h3>Obecné informace</h3>
<p>Od&nbsp; <em>v2.56</em> mù¾ete pou¾ít posuny (jako v <A href="crop.htm">Crop</A>)&nbsp;pro v¹echny zmìny velikosti:<br>
t.j.<br>
<code>GaussResize </code>(<var>clip, int target_width, int target_height, float 
  "src_left", float "src_top", float -"src_right", float
-"src_top"</var>)</p>
<p>Pro v¹echny zmìny velikosti mù¾ete 
pou¾ít&nbsp;roz¹íøenou syntaxi, která 
  provede oøezání pøed&nbsp;zmìnou velikosti. Jsou pak provedeny&nbsp;stejné operace&nbsp;jako kdy¾ vlo¾íte pøed Resize filtr&nbsp;Crop, jen mù¾e 
  být zaznamenán malý rozdíl v rychlosti.</p>

<p>V¹imnìte si, ¾e obrysy jsou mírnì
  odli¹né, Crop&nbsp;dává&nbsp;tvrdé absolutní&nbsp;hranice,&nbsp;okraje (laloky) filtru Resize&nbsp;lze roz¹íøit&nbsp;do&nbsp;oøíznuté oblasti, ale ne&nbsp;za fyzickou hranici&nbsp;obrazu.</p>

<p>Pro odstranìní jakýchkoliv tvrdých&nbsp;okrajù 
nebo&nbsp;pruhù od VHS hlav&nbsp;pou¾ijte&nbsp; <A href="crop.htm">Crop</A>,&nbsp;pou¾ití oøezání ve filtru&nbsp;Resize&nbsp;mù¾e roz¹íøit&nbsp;¹um z pruhù
  do&nbsp;pøilehlých výstupních&nbsp;pixelù.&nbsp;Pou¾ijte oøezaní&nbsp;ve filtru Resize&nbsp;pro zachování pøesného rendrování&nbsp;obrysù, kdy¾ vyøezáváte&nbsp;èást úplného
  obrazu.</p>

      <pre>Crop(10,10,200,300).BilinearResize(100,150)

# co¾ je témìø to samé jako
BilinearResize(100,150,10,10,200,300)</pre>
    
<p>Dùle¾ité:&nbsp;AviSynth má zcela 
oddìlenou&nbsp;vertikální a&nbsp;horizontální zmìnu velikosti. Pokud je
  vstup stejný jako výstup v jedné ose, pak&nbsp;bude zmìna velikosti pøeskoèena.&nbsp;Která zmìna&nbsp;bude jako první,&nbsp;se 
  urèuje&nbsp;podle toho která má nejmen¹í pomìr zmen¹ení. To je za úèelem zachování&nbsp;maximální kvality, tak&nbsp;má&nbsp;v 
  poøadí druhá&nbsp;zmìna velikosti&nbsp;nejlep¹í mo¾ný zdroj obrazu. Ulo¾ení obrazu bude mít dopad na to jaký operand, který "by mìl" být pou¾it 
  pro rozmìry pøi zmìnì velikosti a oøezávání, viz. <a href="crop.htm">Crop</a></p>
<h3>BilinearResize
</h3>
<p>Filtr&nbsp; <code>BilinearResize</code> mìní rozmìr vstupního video 
  snímku na&nbsp;libovolné nové rozli¹ení. Kdy¾ doplníte&nbsp;volitelné argumenty&nbsp; <var>source</var>   , 
  je výsledek stejný jako&nbsp;kdyby jste na klip pou¾ili <code><A href="crop.htm">Crop</A></code>  
  s tìmito argumenty pøed filtr <code>BilinearResize</code>. </p>
<p><code>BilinearResize</code>&nbsp;pou¾ívá standardní&nbsp;bilineární filtrování a&nbsp;je témìø identický s&nbsp;s filtrem&nbsp;"precise bilinear" 
  ve VirtualDubu. Pouze "témìø"&nbsp;proto¾e filtr ve&nbsp;VirtualDubu jak se zdá&nbsp;má faktor zmìny velikosti mírnì chybný, a to 
  tak, ¾e&nbsp;pixely&nbsp;vpravo a nahoøe&nbsp;jsou buï&nbsp;oøíznuty nebo duplikovány. (Tato chyba je pozorovatelná&nbsp;a¾ pøi dvojnásobném nebo vìt¹ím 
  zvìt¹ní obrazu,&nbsp;ale jinak je nevýznamná, tak¾e bych se toho zase moc nebál.) </p>
      <pre>Pøíklady:
# Naète video soubor a zmìní velikost snímku na 240x180 (z jakéhokoliv pøedchozího rozmìru) 
AVISource(&quot;video.avi&quot;).BilinearResize(240,180) 

#Naète video s rozli¹ením 720x480 (CCIR601) a zmìní jeho rozli¹ení na 352x240 (VCD),
# zachová pøitom správný pomìr stran
AVISource(&quot;dv.avi&quot;).BilinearResize(352, 240, 8, 0, 704, 480)

# nebo, co¾ je to samé
AviSource(&quot;dv.avi&quot;).BilinearResize(352, 240, 8, 0, -8, -0)

# Vyøízne pravý horní kvadrant 320x240 z videa a zmìní jeho velikost
# aby jím vyplnil celý snímek
BilinearResize(320,240,160,0,160,120)
</pre>
    
<h3>BicubicResize
</h3>
<p><tt><code>BicubicResize</code></tt> je podobný jako <tt><code>BilinearResize</code></tt>,&nbsp;kromì toho, ¾e místo lineární filtraèní funkce&nbsp;pou¾ívá&nbsp;Mitchell-Netravaliho&nbsp;dvouparametrický kubický 
  filtr. Parametry <i>b</i> a <i>c</i>&nbsp;mohou být pou¾ity pro úpravu&nbsp;kubických vlastností, nìkdy se jim pøiøazují termíny 'blurring-rozmazání' a&nbsp;nebo&nbsp;&nbsp;'ringing-oscilace, zvonìní'.</p>
<p>S&nbsp; <i>b</i> = 0 a <i>c</i> =        0.75&nbsp;je filtr 
  pøesnì stejný&nbsp;jako filtr ve VirtualDubu "precise bicubic," a&nbsp;výsledky jsou identické kromì u¾ 
  vý¹e zmínìného problému ve VirtualDubu. Výchozí hodnoty&nbsp;jsou <i>b</i> = 1./3. a <i>c</i> = 
  
         1./3., co¾ jsou hodnoty doporuèené Mitchellem 
  a Netravalim&nbsp;proto¾e podle subjektivních testù poskytují nejpøíjemnìj¹í&nbsp;dojem lidskému vnímání. Vìt¹í hodnoty&nbsp; <i>b</i> 
  a <i>c</i>&nbsp;mohou vytváøet zajímavé&nbsp;pop-art efekty --&nbsp;napøíklad zkuste&nbsp; <i>b</i> 
  = 0 a <i>c</i> = -5. </p>
<p>Pokud zvìt¹ujete&nbsp;va¹e video,&nbsp;získáte na pohled mnohem lep¹í 
  výsledky&nbsp;s <tt><code>BicubicResize</code></tt>&nbsp;ne¾ s&nbsp;
  <tt><code>BilinearResize</code></tt>. Ale 
pokud&nbsp;ho zmen¹ujete, mù¾e být výsledek <FONT face=Courier 
color=#660033>BilinearResize</FONT> stejnì dobrý nebo dokonce lep¹í. 
Aèkoliv&nbsp;bikubický filtr ve 
  VirtualDubu&nbsp;vytváøí na pohled lep¹í&nbsp;obraz ne¾&nbsp;jeho bilineární filtr, je to hlavnì proto, ¾e&nbsp;bikubický filtr&nbsp;zostøuje obraz, ne 
  proto, ¾e&nbsp;lépe vzorkuje. Ostrý obraz je pìkný na pohled&nbsp;--&nbsp;dokud se&nbsp;ho nesna¾íte&nbsp;zkomprimovat, proto¾e pak&nbsp;se rychle stanou 
  protivnými.&nbsp;Výchozí <tt><code>BicubicResize</code></tt>         
        nezostøuje a¾ tolik jako ve VirtualDub, ale stále 
  zostøuje více ne¾ bilineární. Pokud plánujete kódovat&nbsp;va¹e video nízkým&nbsp;datovým tokem (bitrate),&nbsp;nedivil bych&nbsp;se kdyby <tt><code>BilinearResize</code></tt>
 vedl k lep¹ímu koneènému výsledku.</p>
<p>
  Pro nejvìt¹í výpoèetní pøesnost&nbsp;filtru&nbsp;zadávejte b a c&nbsp;tak aby odpovídaly tomuto vztahu&nbsp;:-
<pre>  b + 2 * c = 1</pre> To dává maximální&nbsp;hodnotu pro c =      
          0.5&nbsp;pøi b =      
  0.&nbsp;To je&nbsp;Catmull-Rom-ùv splajn. Co¾ je dobrý návrh&nbsp;pro zostøení.
<p>Od&nbsp;c &gt; 0.6&nbsp;zaèíná filtr&nbsp;"ring- 
oscilovat, zvonit". To 
  není opravdová ostrost,&nbsp;ale zvýraznìní obrysù (crispening) co¾ by jste získali&nbsp;napø. pøi nastavování
  ostrosti v TV. Záporné hodnoty nejsou povoleny&nbsp;pro b,&nbsp;pou¾ijte b =   0 pro hodnoty&nbsp;c &gt; 0.5. </p>
<h3>BlackmanResize</h3>
<p><code>BlackmanResize</code>   &nbsp;je modifikací <code>LanczosResize</code> , která má 
lep¹í&nbsp;kontrolu&nbsp;zvonících (ringing) artefaktù&nbsp;pro vysoký poèet&nbsp;vývodù (taps).&nbsp;Viz.
  <code>LanczosResize</code>&nbsp; vysvìtlení&nbsp;argumentu taps&nbsp;(výchozí:
  taps=4 1&lt;=taps&lt;=100). (pøidáno ve&nbsp; <em>v2.58</em>) </p>
<h3>GaussResize</h3>
<p><code>GaussResize</code> pou¾ívá gaussovu zmìnu velikosti&nbsp;s nastavitelným parametrem <var>p</var> (výchozí je&nbsp;30). <var>p</var>&nbsp;má rozsah&nbsp;od&nbsp;1&nbsp;do 100,&nbsp; kde 1&nbsp;znamená velmi rozmazaný&nbsp;a 100&nbsp;velmi
ostrý.
<code>GaussResize</code>&nbsp;pou¾ívá 4&nbsp;vývody a&nbsp;má podobnou rychlost&nbsp;&nbsp;jako <code>Lanczos4Resize</code>. (pøidán v&nbsp; <em>v2.56</em>)</p>
<h3>LanczosResize / Lanczos4Resize
</h3>
<p><tt><code>LanczosResize</code></tt>&nbsp;je alternativou&nbsp;k <tt><code>BicubicResize</code></tt>&nbsp;s vysokými hodnotami c&nbsp;okolo 0.6 ...
  0.75&nbsp;co¾ vytváøí pomìrnì silné zostøení. Obvykle nabízí&nbsp;lep¹í kvalitu&nbsp;(ménì artefaktù) a&nbsp;ostrý obraz.</p>

<p>Lanczos byl vytvoøen pro AviSynth proto¾e uchovává hodnì detailù, dokonce více ne¾
BicubicResize(x,y,0,0.75). Jak mo¾ná víte, èím více detailù snímek
má, tím obtí¾nìji se komprimuje. To znamená, ¾e Lanczos NENÍ
vhodný pro vide s nízkým datovým tokem, rùzné druhy Bicubic jsou pro to mnohem lep¹í.
Nicménì pokud máte dostateèný bitrate, pak vám pou¾ití Lanczos dá lep¹í
obraz, ale obecnì ho nedoporuèuji pro ripy na 1 CD proto¾e
bitrate je u nich obvykle pøíli¹ nízký (samozøejmì existují výjimky).</p>
<p>Vstupní parametr taps (výchozí 3, 1&lt;=taps&lt;=100) je roven
poètu lobes (ignorování zrcadlení kolem originálu).</p>

<p>Lanczos4Resize (pøidaný ve <em>v2.55</em>) je zkratkou pro LanczosResize(taps=4). Vytváøí 
  ostøej¹í obraz ne¾ LanczosResize s
výchozím taps=3, obzvlá¹» u¾iteèný je pøi zvìt¹ování snímkù klipu.</p>

<p><i>Upozornìní: vstupní argument&nbsp;nazvaný 
taps by mìly být opravdu
dílky-laloky (lobes). Kdy¾ diskutukeme resizery (mìnièe velikosti),
taps&nbsp;má&nbsp;jiný význam,&nbsp;jak je popsáno ní¾e (první
paragraf se týká LanczosResize(taps=2)):</i></p>

<p>&quot;Pro nadvzorkování (zvìt¹ování obrazu), je 
rozpìtí filtru je dáno tak, ¾e&nbsp;celá rovnice zahrnuje&nbsp;(falls across) 4&nbsp;vstupní vzorky,&nbsp;co¾ z
nìj dìlá filtr se 4 vývody - opìrnými místy&nbsp;(4-tap filter).&nbsp;Nezále¾í na tom jak velký bude výstupní
obraz&nbsp;-&nbsp;má stále 4 vývody.
<p>
Pro podvzorkování&nbsp;(zmen¹ení 
obrazu), je rovnice&nbsp;dána rozmìry tak, ¾e&nbsp;zahrnuje (fall across) 4 *cílové (destination)* vzorky, které jsou pøirozenì umístìny
v ¹ir¹ích intervalech&nbsp;ne¾ zdrojové&nbsp;vzorky. Tak¾e pro podvzorkování se souèinitelem&nbsp;2 (vytváøí polovièní obraz),&nbsp;filtr&nbsp;pokrývá 2*4= 
      8&nbsp;vstupních vzorkù, a&nbsp;proto&nbsp;tomu odpovídá&nbsp;8 vývodù.&nbsp;Pro 3x podvzorkování, potøebujete
3*4= 12 vývodù, atd.
<p>
Tedy celkový poèet vývodù (taps), které&nbsp;dostanete pro podvzorkování&nbsp;je&nbsp;pomìr podvzorkování&nbsp;&nbsp;krát&nbsp;poèet&nbsp;vstupních vývodù filtru (proto <b>T</b>x&nbsp;podvzorkování a
Lanczos<b>k</b>Resize&nbsp;vede k poètu vývodù&nbsp;&nbsp;T*2*k), toto se zaokrouhlí nahoru
k nejbli¾¹ímu sudému celému&nbsp;èíslu.&nbsp;Pro nadvzorkování,&nbsp;je to právì&nbsp; 2*k vývodù&quot;. Zdroj:
[<a href="http://archive2.avsforum.com/avs-vb/showthread.php?s=&amp;postid=4760581#post4760581">avsforum
post</a>].</p>
<h3>PointResize</h3>
<p><tt><code>PointResize</code></tt> je nejjednodu¹¹í mo¾ná zmìna 
velikosti. Pou¾ívá Point Sampler (Bodový vzorkovaè)&nbsp;nebo 
  algoritmus&nbsp;Nearest Neighbour (Nejbli¾¹í soused), co¾ obvykle vede k velmi kostkatému obrazu. Proto by mìl být 
  obecnì pou¾it jen, kdy¾&nbsp;chcete podøadnou kvalitu, nebo&nbsp;potøebujete&nbsp;èistì pixelové&nbsp;kresby.<br>Je velmi u¾iteèný pro zvìt¹ování malých oblastí pixelù&nbsp;pøi&nbsp;podrobné analýze. </p>
<h3>Spline16Resize/Spline36Resize/Spline64Resize</h3>
<p>Tøi&nbsp;filtry pro zmìnu velikosti zalo¾ené na splajnech&nbsp; (Pøidány ve <em>v2.56/v2.58</em>).</p>

<p><tt><code>Spline16Resize</code></tt>, <tt><code>Spline36Resize</code></tt>
a <tt><code>Spline64Resize</code></tt> jsou tøi Spline resizery. 
Jsou to (kubické) splajnové resizery z <a href="http://www.all-in-one.ee/~dersch/" class="external text" title="http://www.all-in-one.ee/~dersch/" rel="nofollow">Panorama
tools</a> , které pokládají spline pøes body vzorkù a pak odvozuje
jádro filtru z výsledného smíchání polynomù. Viz. <a href="http://forum.doom9.org/showthread.php?t=147117" class="external text" title="http://forum.doom9.org/showthread.php?t=147117" rel="nofollow">toto
vlákno</a> pro podrobnosti.</p>

<p>Smyslem Spline&nbsp;je&nbsp;být co mo¾ná nejostøej¹í pøi&nbsp;ménì zvonících&nbsp;artefaktech&nbsp;ne¾ vytváøí&nbsp;
<code>LanczosResize</code> . <code>Spline16Resize</code>&nbsp;pou¾ívá odmocninu&nbsp;sqrt(16)= 
 4&nbsp;vzorkových bodù, <code>Spline36Resize</code>&nbsp;pou¾ívá 6&nbsp;vzorkových 
bodù,&nbsp;atd ...&nbsp;Èím více vzorkových bodù&nbsp;je pou¾ito,&nbsp;tím bude
vá¹ klip ostøej¹í.&nbsp;Srovnání&nbsp;mezi nìkterými resizery&nbsp;je
<a href="http://web.archive.org/web/20060827184031/http://www.path.unimelb.edu.au/~dersch/interpolator/interpolator.html"
 class
="external&#13;&#10;&#13;&#10;
 text" title="http://web.archive.org/web/20060827184031/http://www.path.unimelb.edu.au/~dersch/interpolator/interpolator.html" rel="nofollow">zde</a>.</p>

<h3>SincResize</h3>
<p> <code>SincResize</code>  je pøidán ve <em>v2.6</em> a pou¾ívá zkrácenou (truncated)
sinc funkci jako resizer. Viz. LanczosResize pro vysvìtlení argumentu taps
(výchozí: taps=4; 1&lt;=taps&lt;=20).</p>

<p><b>Seznam zmìn:</b></p>
<table border="1">
  <tbody>
    <tr>
      <td>v2.55</td>
      <td>pøidán&nbsp;Lanczos4Resize</td>
    </tr>
    <tr>
      <td>v2.56</td>
	  <td>pøidány&nbsp;Spline16Resize, Spline36Resize, GaussResize
	      a parametr&nbsp;taps v&nbsp;LanczosResize; pøidána posunutí v èásti Crop&nbsp;filtrù xxxResize</td>
    </tr>
        <tr>
      <td>v2.58</td>
      <td>pøidány&nbsp;BlackmanResize, Spline64Resize</td>
    </tr>
    <tr>
      <td>v2.6</td>
      <td>pøidán SincResize</td>
    </tr>
    </tbody>
</table>
<p><kbd>$English Date: 2009/07/12 12:49:34 $</kbd></p>
<P><KBD>Èeský pøeklad:20.9.2009</KBD></P>
<FORM>
  <INPUT TYPE="button" VALUE="Zpìt"
 onClick="history.go(-1)">
</FORM>
</body>
</html>




















