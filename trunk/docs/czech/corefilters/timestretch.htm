<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <title>TimeStretch Filter</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body >
<h2>
<a NAME="TimeStretch"></a>TimeStretch
</h2>
<p><code>TimeStretch </code>(<var>clip, float "tempo", float "rate",
float "pitch", int "sequence", int "seekwindow",
int "overlap", bool "quickseek", int "aa"</var>)

<p><code>TimeStretch</code>&nbsp;umo¾òuje&nbsp;zmìnit tempo a vý¹ku tónù 
(tonálnost)&nbsp;zvuku pomocí parametrù&nbsp; <var>tempo</var>, <var>pitch</var> a&nbsp;rychlost pøehrávání pomocí parametru&nbsp; <var>rate</var> &nbsp;nezávisle   jeden na druhém, t.j.:</p>
<ul>
  <li> <var>tempo</var>&nbsp;mù¾e být zvý¹eno nebo sní¾eno&nbsp;pøi zachování pùvodní
    vý¹ky (pitch).
  <li> <var>pitch</var> (vý¹ka 
  tónù)&nbsp;mù¾e být zvý¹ena nebo sní¾ena pøi
    zachování&nbsp;pùvodního tempa.
  <li>Zmìní rychlost pøehrávání&nbsp; <var>rate</var>&nbsp;, která ovlivní&nbsp;tempo a vý¹ku
    (pitch) souèasnì.
  <li>Vybere jakoukoli kombinaci tempo/pitch/rate.</li>
</ul>
<p><b>Parametry:</b></p>
<p>Parametry rychlosti se zadávají v procentech, a&nbsp;výchozí je&nbsp;100. Pokud je <var>tempo</var>&nbsp;200 bude hrát dvakrát 
rychleji,&nbsp;pokud&nbsp;je 50,&nbsp;bude hrát polovièní rychlostí.&nbsp;Úprava
rychlosti&nbsp; <var>rate</var>&nbsp;je ekvivalentní s pou¾itím&nbsp; <A href="assumerate.htm">AssumeSampleRate</A>
a <A href="resampleaudio.htm">ResampleAudio</A>.</p>


<p>Algoritmus&nbsp;time-stretch&nbsp;má nìkolik parametrù, které 
mohou být ladìny&nbsp;pro optimalizaci&nbsp;kvality zvuku&nbsp;pro urèité aplikace.&nbsp;Aktuální výchozí&nbsp;parametry mají být voleny&nbsp;iterativní analýzou&nbsp;jestli¾e-pak&nbsp;(èili metodou:
"pokusù a omylù") pro získání&nbsp;nejlep¹í subjektivní&nbsp;zvukové kvality&nbsp;pøi zpracování&nbsp;pop/rock&nbsp;hudby,
ale v&nbsp;aplikacích&nbsp;zpracovávajících&nbsp;rùzné druhy zvukù&nbsp;mohou vést výchozí parametry&nbsp;k ne právì optimálnímu
výsledku.</p>
<p>Hodnoty výchozích parametrù algoritmu&nbsp;time-stretch jsou:</p>
<blockquote>
  <pre>Sequence     82
SeekWindow   28
Overlap      12</pre>
</blockquote>
<p>Tyto parametry&nbsp;mají následující vliv na algoritmus timestrech:</p>
<ul>
  <li><var>Sequence</var>: Toto je délka
  jedné sekvence zpracování&nbsp;v milisekundách, která urèuje&nbsp;jak je pùvodní zvuk&nbsp;rozøezaný v&nbsp;algoritmu
  time-stretch. Vìt¹í hodnoty&nbsp;znamenají, ¾e je pøi zpracování pou¾ito ménì sekvencí. V principu
  je vìt¹í&nbsp;hodnota&nbsp;lep¹í, kdy¾ zpomalujete tempo,&nbsp;ale&nbsp;hor¹í, kdy¾ se tempo zvy¹uje&nbsp;a naopak.<br>
  <li><var>SeekWindow</var>        
            
      : Délka okna vyhledávání&nbsp;v milisekundách&nbsp;je pro&nbsp;algoritmus, který hledá&nbsp;nejlep¹í&nbsp;mo¾né místo pøekrytí.
  To urèuje z jaké&nbsp;¹íøky "okna" vzorkù&nbsp;algoritmus mù¾e&nbsp;pou¾ít&nbsp;nalezené optimální&nbsp;místo smíchání, kdy¾ jsou sekvence
  zvuku&nbsp;spojovány.<br>
  <br>
           Èím je toto nastavení okna vìt¹í, tím je vìt¹í mo¾nost&nbsp;nalezení&nbsp;lep¹í pozice smíchání,
  ale zároveò&nbsp;vìt¹í hodnoty mohou zpùsobit "ují¾dìjící - driftující" zvukové artefakty, kvùli
  tomu, ¾e sousední sekvence&nbsp;mohou být vybrány ve více nestejných intervalech. Pokud jsou
  tyto artefakty ru¹ivé - zvuky&nbsp;konstantní frekvence&nbsp;se potulují kolem,&nbsp;zkuste sní¾it&nbsp;toto nastavení.<br>
  <li><var>Overlap</var>        
      : Délka pøekrytí v milisekundách. Kdy¾ jsou zvukové
  sekvence&nbsp;znovu míchány zpìt dohromady&nbsp;do formy&nbsp;nepøetr¾itého zvuku,&nbsp;tento parametr definuje&nbsp;jak moc budou po sobì
  jdoucí sekvence pøekryty.<br>
  <br>
  Nemìl by to být&nbsp;tak kritický parametr. Pokud sní¾íte nastavení&nbsp;
  <var>Sequence</var>  
        &nbsp;z velké hodnoty, mù¾ete zkusit&nbsp;men¹í hodnoty tohoto parametru. 
  <li><var>QuickSeek</var>:&nbsp;Rutina time-stretch&nbsp;má 
  rychlý re¾im&nbsp;'quick'&nbsp;který podstatnì urychluje&nbsp;algoritmus&nbsp;ale mù¾e&nbsp;zhor¹it kvalitu zvuku. 
  <li><var>aa</var>: Ovládá poèet 
  vývodù (tap)&nbsp;odru¹ovacího filtru Anti-alias&nbsp;pou¾ívaného
  pro&nbsp;zmìnu rychlosti.&nbsp;Nastavení na&nbsp;0&nbsp;vypne filtr.&nbsp;Hodnota musí&nbsp;být násobkem&nbsp;4.
  </li>
</ul>

<p>     Tabulka
dole shrnuje jak&nbsp;mohou být parametry&nbsp;upraveny&nbsp;pro rùzné aplikace:</p>
<table border="1">
  <tbody>
    <tr>
      <td valign="top"><b>Název parametru</b></td>
      <td valign="top"><b> Výchozí
hodnota</b></td>
      <td valign="top"><b>Vìt¹í hodnota
ovlivní...</b></td>
      <td valign="top"><b>Men¹í hodnota
ovlivní...</b></td>
      <td valign="top"><b>Hudba</b></td>
      <td valign="top"><b>Øeè</b></td>
      <td valign="top"><b>Vliv&nbsp;na ztí¾ení&nbsp;CPU</b></td>
    </tr>
    <tr>
      <td valign="top">
      <pre>Sequence</pre>
      </td>
      <td valign="top">Výchozí hodnota je&nbsp;relativnì velká, vybráno pro&nbsp;zpomalení tempa zvuku.</td>
      <td valign="top">   
     Vìt¹í hodnota je obvykle lep¹í
pro zpomalení&nbsp;tempa.&nbsp;Rostoucí hodnota pøibr¾ïuje "echo" artefakty&nbsp;pøi zpomalování&nbsp;tempa.</td>
      <td valign="top">    Men¹í
hodnoty by mìly být lep¹í pro zrychlení tempa. Sní¾ení hodnoty
urychluje "echo" artefakty pøi zpomalování tempa </td>
      <td valign="top">Výchozí hodnota je obvykle vyhovující.</td>
      <td valign="top"> Men¹í hodnota ne¾ výchozí
mù¾e být lep¹í.</td>
      <td valign="top"> Zvy¹ování hodnoty
parametru sni¾uje výpoèetní nároènost.</td>
    </tr>
    <tr>
      <td valign="top">
      <pre>SeekWindow</pre>
      </td>
      <td valign="top">Výchozí hodnota je&nbsp;relativnì velká, vybráno pro&nbsp;zpomalení tempa zvuku.</td>
      <td valign="top">S vìt¹ími hodnotami
se lépe nachází místa pøekrytí,&nbsp;ale mohou zpùsobit "drift" artefakty</td>
      <td valign="top">Men¹í hodnoty sni¾ují mo¾nost najít&nbsp;dobrou pozici pro smíchání, ale sni¾uje&nbsp;"drift" artefakty.</td>
      <td valign="top">Výchozí hodnota
je obvykle vyhovující,&nbsp;pokud neru¹í &nbsp;"drift" artefakty.</td>
      <td valign="top">Výchozí hodnota je obvykle vyhovující.</td>
      <td valign="top"> Zvy¹ování hodnoty
parametru zvy¹uje výpoèetní nároènost.</td>
    </tr>
    <tr>
      <td valign="top">
      <pre>Overlap</pre>
      </td>
      <td valign="top">Výchozí hodnota je&nbsp;relativnì velká, vybráno vhodnì pro&nbsp;vý¹e uvedené&nbsp;parametry.</td>
      <td valign="top">&nbsp;</td>
      <td valign="top">    
   Pokud sní¾íte nastavení&nbsp;"sequence ms", mù¾ete zkusit&nbsp;men¹í hodnotu.</td>
      <td valign="top">&nbsp;</td>
      <td valign="top">&nbsp;</td>
      <td valign="top"> Zvy¹ování hodnoty
parametru zvy¹uje výpoèetní nároènost.</td>
    </tr>
  </tbody>
</table>

<p><b>Poznámky:</b>
<ul>
<li>Toto NENÍ&nbsp;zcela pøesný plugin ve vztahu ke vzorkùm. 
Pokud ho pou¾ijete, mohou nastat mírné nepøesnosti.
Proto¾e&nbsp;se&nbsp;pou¾ívá&nbsp;desetinných&nbsp;hodnot&nbsp;(float values)&nbsp;mohou se objevit chyby zaokrouhlování, obzvlá¹tì na&nbsp;dlouhých audio vzorcích. Obecnì&nbsp;by ale
nepøesnost nemìla pøekroèit&nbsp;nìkolik desítek&nbsp;milisekund pro délku filmu.</li>

  <br>
  <li>Aktuálnì podporuje knihovna SoundTouch pouze 1 a 2 kanály. Pøi
    pou¾ití s více ne¾ 2 kanály, je ka¾dý kanál zpracován individuálnì v 1
    kanálovém re¾imu. To znièí fázové vztahy mezi
    kanály. Pro podrobnosti se podívejte na toto vlákno:-
    <a href=http://forum.doom9.org/showthread.php?t=71632>TimeStretch in
                         AVISynth 2.5.5 Alpha - Strange stereo effects ?</a></li>
                         
<br>
<li>SoundTouch je pou¾íván v re¾imu desetinných&nbsp;- float - vzorkù.</li>
</ul></p>
<p><b>Pøíklady:</b></p>
<pre>TimeStretch(pitch = 200) </pre>
<p>Toto vede ke zvý¹ení&nbsp; <var>pitch</var> (tonálnosti - vý¹ky)&nbsp;o jednu oktávu,
pøi zachování&nbsp;délky pùvodního vzorku.</p>
<pre>TimeStretch(pitch = 100.0*pow(2.0, 1.0/12.0)) </pre>
<p>Toto vede ke zvý¹ení&nbsp; <var>pitch</var>    o jeden pùltón,
pøi zachování&nbsp;délky pùvodního vzorku.</p>
<pre>TimeStretch(tempo = (100.0*25.0*1001.0)/24000.0)</pre>
<p>  Toto zmìní <var>tempo</var>&nbsp;z 
rychlosti&nbsp;Film&nbsp;na PAL beze zmìny
pitch - tonálnosti.</p>
<p><b>Podìkování:</b></p>
<p>Tato funkce pou¾ívá:</p>
<p>SoundTouch library Copyright (c) Olli Parviainen 2002-2006</p>
<p><a href="http://www.iki.fi/oparviai/soundtouch">http://www.iki.fi/oparviai/soundtouch</a><br>
<a href="http://www.surina.net/soundtouch">http://www.surina.net/soundtouch</a></p>
<p><b>Historie zmìn:</b></p>
<table border="1">
  <tbody>
    <tr>
      <td>v2.55</td>
      <td>Pùvodní vydání</td>
    </tr>
    <tr>
      <td>v2.57</td>
      <td>Vystaveny parametry&nbsp;soundtouch</td>
    </tr>
  </tbody>
</table>

<p><kbd>$English Date: 2008/12/24 22:55:01 $</kbd></p>
<P><KBD>Èeský pøeklad:12.2.2009</KBD></P>
<form>
  <p><input TYPE="button" VALUE="Zpìt"
 onClick="history.go(-1)"></p>
</form>

</body>
</html>













