<html>
<head>
<title>DVInfo</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: dvinfo.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $ 
-->
</head>
<body>
<h1>DVInfo</h1>
<h2>Pøehled</h2>
<b>autor:</b>  WarpEnterprises
<br><b>verze:</b> &nbsp;
<br><b>stáhnout: </b><a href="http://www.avisynth.org/warpenterprises/">http://www.avisynth.org/warpenterprises/</a><br>
<b>kategorie:</b> Rùzné pluginy<br>
<b>požadavky:</b> &nbsp;
<ul>
  <li>DV-AVI vstup</li>
</ul>
<hr>
<h2>Popis</h2>
<p>DVInfo ète informace jako èasový kód (Timecode) a datum nahrávky (Recording Date) v DV-AVI
souboru.</p>
<h3>Syntaxe</h3>
<p><tt><code>DVInfo</code> </tt>(<var>clip, string &quot;filename&quot;, string
&quot;output&quot;, int &quot;x&quot;, int &quot;y&quot;, string
&quot;font&quot;, int &quot;size&quot;, int &quot;text_color&quot;, int
&quot;halo_color&quot;, string &quot;rec_format&quot;,&nbsp;<br>
string &quot;tc_format&quot;, bool &quot;show_error&quot;, float
&quot;threshold&quot;, int &quot;autoframes&quot;</var>)</p>

<p>DVInfo otvírá DV-AVI soubor (Typ-1 a Typ-2, legacy a openDML &gt; 4GB
jsou podporovány) a ète èasový kód a èasové znaèky snímku, který prochází.
Pozor: NENAÈÍTÁ video nebo audio obsah 
AVI, to musí být provedeno PØÍMO PØEDTÍM pomocí AviSource!</p>
<p>Èasový kód a èas nahrávky jsou pak vytištìny do snímku jako by jste použili 
filtr Subtitle() a parametry x, y, font, size, text_color, halo_color jsou
pøedávány právì do Subtitle.</p>
<p>&quot;Run-time&quot; promìnné &quot;current_frame&quot;,
&quot;tc_time&quot;, &quot;rec_time&quot; jsou nastaveny tak, že je mùžete použít ve výrazu
(expression) v &quot;output&quot; (pracuje to podobnì jako u ScriptClip, na více podrobností
se podívejte do dokumentace).</p>
<p>Mùžete nastavit generovaný èasový formát pomocí parametrù rec_format a
tc_format.</p>

<p><b>2003-12-16</b>:Pøi &quot;threshold&quot;&gt;0 je zapnut výstup informace, jestliže je rozdíl
data nahrávky aktuálního a pøedchozího snímku vìtší než
&quot;threshold&quot; v sekundách. Po projetí poètu &quot;autoframes&quot; snímkù
je výstup vypnut. Tak dostanete údaje o nahrání jen pøi zmìnách scén.<br>
Pozor: použije se poslední <i>zpracovaný (processed)</i> snímek, což není pøedchozí 
snímek pøi vyhledávání (seekování) v klipu (pracuje jen pøi lineárním pøehrávání).<br>
S napø. threshold=0.5 a autoframes=2 mùžete zobrazit údaje každou sekundu v délce 2
snímkù.</p>

<p><b>2005-12-23:</b> Mùžete použít "fix_format" ke spuštìní vysílání v pevných intervalech (t.j. každou hodinu). 
Tento formátový øetìzec má stejnou syntaxi jako jiné, ale je použit jen vnitønì, pokud výsledek jeho 
zmìní má stejný efekt jako threshold. T.j. fix_format = "%H%M" zobrazí formát 
zadaný rec_format a tc_format pro autoframes snímkù pøi každé zmìnì minuty.</p>



<p>Nejlépe se to vysvìtlí na pøíkladu:</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>LoadPlugin(&quot;c:\myprojects\dvinfo\release\dvinfo.dll&quot;)

file = &quot;c:\myprojects\type2.avi&quot; # tak nebudete muset psát jméno souboru dvakrát

Avisource(file)          # Otevøe obsah videa

DVInfo(file, &quot;rec_time&quot;) # ète èasové znaèky záznamu
                         # tiskne je ve výchozím formátu do promìnné &quot;rec_time&quot;
                         # vyhodnotí tento výraz (který sestává jen z jedné promìnné)
                         # zobrazí výsledek použitím výchozích parametrù Subtitle</pre>
    </td>
  </tr>
</table>
<p>Mùžete dokonce vynechat &quot;rec_time&quot;, protože je to výchozí hodnota pro
&quot;output&quot;.</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>DVInfo(file)   # udìlá to samé jako výše</pre>
    </td>
  </tr>
</table>
<br>
<hr>
<p>Toto nebude pracovat (více než jeden soubor):</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>LoadPlugin(&quot;c:\myprojects\dvinfo\release\dvinfo.dll&quot;)

file1 = &quot;c:\myprojects\type2a.avi&quot;
file2 = &quot;c:\myprojects\type2b.avi&quot;

Avisource(file1)+Avisource(file2)  #Tohle je už OK

DVInfo(file1, &quot;rec_time&quot;)  # ale nyní se DVInfo snaží èíst ve file1 èísla snímkù z file2!
DVInfo(file2, &quot;rec_time&quot;)  # a naopak</pre>
    </td>
  </tr>
</table>
<p>Místo toho to napište takto:</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>LoadPlugin(&quot;c:\myprojects\dvinfo\release\dvinfo.dll&quot;)

file1 = &quot;c:\myprojects\type2a.avi&quot;
file2 = &quot;c:\myprojects\type2b.avi&quot;

Avisource(file1).DVInfo(file1, &quot;rec_time&quot;) + Avisource(file2).DVInfo(file2, &quot;rec_time&quot;)
# teï ète každý DVInfo svùj vlastní soubor
</pre>
    </td>
  </tr>
</table>
<p>Toto nebude pracovat (použití Trim):</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>LoadPlugin(&quot;c:\myprojects\dvinfo\release\dvinfo.dll&quot;)

file1 = &quot;c:\myprojects\type2a.avi&quot;

Avisource(file1)
Trim(1000,2000)
DVInfo(file1, &quot;rec_time&quot;)  # nyní DVInfo dostává špatná èísla snímkù</pre>
    </td>
  </tr>
</table>
<p>Místo toho to napište takto:</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>LoadPlugin(&quot;c:\myprojects\dvinfo\release\dvinfo.dll&quot;)

file1 = &quot;c:\myprojects\type2a.avi&quot;
file2 = &quot;c:\myprojects\type2b.avi&quot;

Avisource(file1).DVInfo(file1, &quot;rec_time&quot;) + Avisource(file2).DVInfo(file2, &quot;rec_time&quot;)
# teï ète každý DVInfo svùj vlastní soubor
</pre>
    </td>
  </tr>
</table>
<br>
<hr>
<h3>Více pøíkladù</h3>
<p>Mùžete upravit èasový formát (pro podrobnosti viz. AviSynth dokumentace &gt;&gt; Syntaxe &gt;&gt;
funkce Time ):</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>DVInfo(file, &quot;rec_time&quot;, rec_format=&quot;%H:%M:%S&quot;) # vytiskne jen èas bez data

nebo

DVInfo(file, &quot;rec_time&quot;, rec_format=&quot;%A, %H:%M:%S&quot;) # vytiskne plné jméno dne v týdnu plus èas</pre>
    </td>
  </tr>
</table>
<p>tc_time drží pozici na pásce v hodinách, minutách, sekundách a
snímcích.<br>
Vložím snímky do pozice dne v mìsíci, to je nìco neèistého, ale
mùžete jednoduše zobrazit èíslo snímku použitím symbolu frmátu &quot;month&quot;:<br>
</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>DVInfo(file, &quot;tc_time&quot;, tc_format=&quot;%d&quot;) # vytiskne jen èíslo snímku</pre>
    </td>
  </tr>
</table>
<p>Mùžete vložit komplexnìjší výraz do &quot;output&quot;:</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>DVInfo(file, &quot;tc_time + chr(32) + rec_time + chr(32) + current_frane&quot;)
# zobrazí èasový kód, èas záznamu a èíslo snímku, vše oddìlené mezerami</pre>
    </td>
  </tr>
</table>
<p>Pokud chcete pøidat další text:</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>text = &quot;HALLO WORLD &quot;
DVInfo(file, &quot;text + rec_time&quot;) # zobrazí &quot;HALLO WORLD &quot; a èas záznamu</pre>
    </td>
  </tr>
</table>
<p>Musíte to udìlat tímto zpùsobem, protože zde není možné vložit uvozovky do øetìzce.</p>
<p>Jak vidíte, mùžete v  &quot;output&quot; použít každou skriptovou promìnnou.</p>
<p>Vytištìní data záznamu jen ve zmìnách scény:.</p>
<table width="75%" border="1">
  <tr>
    <td>
      <pre>DVInfo(file, threshold=1)   # vytiskne to v trvání 25 snímkù pokud je rozdíl &gt;1 sekunda</pre>
    </td>
  </tr>
</table>
<h3>Práce s chybami</h3>
<p>Pokud je èíslo žádaného snímku vìtší než poèet snímkù (to by se nemìlo stát),
do rec_time a tc_time se vloží chybová zpráva.<br>
Pokud nelze najít èasový kód nebo èasové znaèky nahrávky, nebo když je tam jiná chyba ètení,
vloží se do rec_time a tc_time chybová zpráva.</p>
<p>Tyto chybové zprávy jsou potlaèeny, pokud použijete show_error = false.</p>
<p>Pokud nemùže být AVI otevøeno, nebo výsledek z &quot;output&quot; není
øetìzec, vyskoèí chybová zpráva AviSynthu.</p>
<hr>
<h3>Technická poznámka</h3>
<p>Pro ètení AVI-dat používám kód z kino od Arne Schirmachera.<br>
Upravil jsem ho tak, že pracuje s openDML - soubory &gt; 2GB, kompiloval ve Win32
a odebral všechny jiné funkce, které se netýkali ètení.</p>
<p>Ernst Peché, 2003-12-16</p>
<p><kbd>$English Date: 2004/08/13 21:57:25 $</kbd></p>
<p><kbd>Èeský pøeklad:28.4.2009</kbd></p>
</html>
