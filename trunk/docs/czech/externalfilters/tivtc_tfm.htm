<html>
<head>
<title>TFM</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: tivtc_tfm.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $ 
-->
</head>
<body>
<h1>TFM</h1>
<h2>Pøehled</h2>
<b>autor:</b>    tritical
<br><b>verze:</b>       1.0.4<br>
<b>stáhnout:</b>   <a href="http://bengal.missouri.edu/~kes25c/">http://bengal.missouri.edu/~kes25c/</a>, 
<a href="http://avisynth.org/warpenterprises/">http://avisynth.org/warpenterprises/</a>
<br><b>kategorie:</b>    Odstraòování prokládání &amp; pulldown
<br><b>požadavky:</b>&nbsp;
<ul>
  <li>YV12 &amp; YUY2 Barevné prostøedí</li>
</ul>

<p><b>licence:</b> GPL</p>

<hr size=2 width="100%" align=center>

<!-- #EndTemplate -->
<h2>Obsah
</h2>
<ul>
  <li><a href="#general">    A.) Obecné informace</a></li>
  <li><a href="#basic">B.) Základní parametry</a></li>
  <li><a href="#advanced">C.) Pokroèilé parametry</a></li>
  <li><a href="#io-par">D.) Vstupní/výstupní parametry  souboru</a></li>
  <li><a href="#debug">E.) Parametry ladìní/zobrazení</a></li>
  <li><a href="#overrides">F.) Nadøazování</a></li>
  <li><a href="#changelist">G.) Seznam zmìn</a></li>
  <li><a href="#todo">H.) Na dopracování</a></li>
</ul>
<h2><a name="general"></a>A.)  Obecné informace:
</h2>
<p><code>TFM</code> je filtr pro uspoøádání polí, který obnovuje pùvodní progresivní snímky ze streamù
   zpracovaných telecine.  Nedìlá decimaci výsledných duplikovaných snímkù, takže pro docílení
   ivtc musí být TFM následován decimaèním filtrem jako TDecimate(), který je také obsažen
  v souboru TIVTC.dll .
</p>
<h3>Syntaxe
</h3>
<p><code>TFM</code> (clip, int <var>&quot;order&quot;</var>, int <var>&quot;field&quot;</var>, int
<var>&quot;mode&quot;</var>, int <var>&quot;PP&quot;</var>. string <var>&quot;ovr&quot;</var>, string
<var>&quot;input&quot;</var>, string <var>&quot;output&quot;</var>, string
<var>&quot;outputC&quot;</var>, bool <var>&quot;debug&quot;</var>, bool <var>&quot;display&quot;</var>, int
<var>&quot;slow&quot;</var>, bool <var>&quot;mChroma&quot;</var>, int <var>&quot;cNum&quot;</var>, int           
<var>&quot;cthresh&quot;</var>, int <var>&quot;MI&quot;</var>, bool <var>&quot;chroma&quot;</var>, int
<var>&quot;blockx&quot;</var>, int <var>&quot;blocky&quot;</var>, int <var>&quot;y0&quot;</var>, int
<var>&quot;y1&quot;</var>, int <var>&quot;mthresh&quot;</var>, PClip <var>&quot;clip2&quot;</var>, string
<var>&quot;d2v&quot;</var>, int <var>&quot;ovrDefault&quot;</var>, int <var>&quot;flags&quot;</var>, double 
<var>&quot;scthresh&quot;</var>, int <var>&quot;micout&quot;</var>, int <var>&quot;micmatching&quot;</var>, string 
<var>&quot;trimIn&quot;</var>, int <var>&quot;hint&quot;</var>, int <var>&quot;metric&quot;</var>, bool 
<var>&quot;batch&quot;</var>, bool <var>&quot;ubsco&quot;</var>, bool <var>&quot;mmsco&quot;</var>, int <var>&quot;opt&quot;</var>)
</p>
<p>Zatímco TFM má nìkolik málo parametrù, pokusil jsem kategorizovat nastavení tak, aby
   byly jednodušší na správu.  Ve skuteènosti jsou jen 3 parametry, o které by se mìla vìtšina uživatelù
   zajímat, aby poznala jejich nastavení.  Jsou to "order", "mode", a "PP" a jsou
   popsány v kapitole "ZÁKLADNÍ PARAMETRY".  Další nastavení jsou popsána v 
   dalších rùzných kapitolách, které by mìlo být celkem snadné rozpoznat z jejich názvù.
</p>
<h2><a name="basic"></a>B.)  Základní parametry:
</h2>
<p>Jsou to jen tøi parametry o které by se mìla vìtšina uživatelù zajímat nebo dávat pozor na jejich
   nastavení.  Ovládají základní operace filtru.
</p>
<p><var>order</var> -&nbsp;
</p>
<p>        Nastavuje poøadí polí klipu. Poøadí polí musí být správnì nastaveno 
aby se objevilo pøesné uspoøádání polí. Možné hodnoty:
</p>
<p>-1 = auto (použije vnitøní hodnotu parity v avisynthu)<br>
            0 = spodní pole první (bff)<br>
            1 = horní pole první (tff)
</p>
<p>Výchozí:  -1  (int)
</p>
<p><var>mode</var> -&nbsp;
</p>
<p>Nastavuje režim uspoøádání nebo použitou strategii.  Prosté 2-cestné uspoøádání (možnost 0) je
        nejbezpeènìjší ze všech možností v tom smyslu, že nebude riskovat vytváøení trhání kvùli 
        duplikovaným snímkùm, když je to možné, ale pokud jsou zde špatné støihy nebo smíchaná pole
        skonèí vysíláním roztøepených snímkù, když by mìlo ve skuteènosti existovat i dobré uspoøádání.  3-cestné uspoøádání
        + zkoušení 4-tých/5-tých uspoøádání pokud všechny 3 první uspoøádání jsou detekovány jako roztøepené
        (možnost 5) je nejriskantnìjší ve smyslu vytváøení trhání, ale témìø vždy nalezne
        dobré snímky, pokud existují.  Další nastavení (možnosti 1, 2, 3, 4, a 6) jsou všechny
        nìkde mezi možnostmi 0 a 5 ve smyslu riskování trhání a vytváøení
        duplikovaných snímkù, proti nalezení dobrého uspoøádání v èástech se špatnými støihy, osiøelých polí,
        smíchaných polí, atd...</p>
<p>Režim 7 není jedním z normálních režimù a je výslovnì pro materiál se smíchanými
        poli, které mají specifickou šablonu.  Režim 7 vyžaduje lineární pøístup, aby pracoval správnì,
        protože jaká uspoøádání/pole jsou použita závisí na pøedchozím rozhodnutí o uspoøádání.
        </p>
<p>Možná nastavení jsou:      
<p>         0 = 2-cestné uspoøádání                                                  (p/c)<br>
            1 = 2-cestné uspoøádání + 3-tí uspoøádání na roztøepených                  (p/c + n)<br>
            2 = 2-cestné uspoøádání + 3-tí uspoøádání (stejné poøadí) na roztøepených                       (p/c + u)<br>
            3 = 2-cestné uspoøádání + 3-tí uspoøádání na roztøepených + 4-té/5-té uspoøádání pokud jsou stále roztøepené  (p/c + n + u/b)<br>
            4 = 3-cestné uspoøádání                                                          (p/c/n)<br>
            5 = 3-cestné uspoøádání + 4té/5-té uspoøádání na roztøepených                              (p/c/n + u/b)<br>
            6 = režim 2 + nìco navíc pokud je roztøepení                                            (p/c + u + n + b)<br>
            7 = režim 0 + pøepínání polí založené na pøedchozích uspoøádáních
</p>
<p>Kulaté () na konci indikují uspoøádání, která by byla použita pro ten režim za pøedpokladu order = 1
a field = 1.
</p>
<p>* Z pohledu rychlosti je režim 0 zdaleka nejrychlejší a 5 je nejpomalejší.
</p>
<p>Výchozí:  1  (int)
</p>
<p><var>PP</var> -
</p>
<p>Nastavuje režim dodateèného zpracování post-processingu.  To ovládá jak by mìl TFM zacházet (nebo nezacházet)
s jakýmikoli roztøepenými snímky, které vychází z procesu uspoøádání polí.  Možná nastavení jsou:
</p>
<p>0 - nic (Dokonce ani nezkoumá roztøepení snímkù)<br>
            1 - nalézá/udává roztøepené snímky, ale neodstraòuje prokládání<br>
            2 - hloupé odstranìní prokládání smícháním (blend)<br>
            3 - hloupé odstranìní prokládání s kubickou interpolací<br>
            4 - hloupé odstranìní prokládání modifikované-ela<br>
            5 - pohybovì-adaptivní odstranìní prokládání smícháním (blend)<br>
            6 - pohybovì-adaptivní odstranìní prokládání s kubickou interpolací<br>
            7 - pohybovì-adaptivní odstranìní prokládání modifikované-ela
</p>
<p>* Mùžete také použít parametr "clip2" pro zadání klipu s externím odstranìním prokládání,
             ze kterého TFM vezme snímky místo provádìní odstraòování prokládání ve zpracovávaném klipu.  Viz
             popis parametru clip2 pro více informací a aby jste vidìli jak nastavení PP ovlivní
             operaci s clip2.
</p>
<p>* Mùžete ruènì ovládat, které snímky by mìly být oznaèeny jako roztøepené stejnì jako možnost 
PP pøes nadøazovací soubor (viz. popis parametru ovr)
</p>
<p>Výchozít:  6  (int)
</p>
<h2><a name="advanced"></a>C.)  Pokroèilé parametry:
</h2>
<p>Tyto parametry dávají jemnìjší ovládání nad operacemi uspoøádání polí, detekcí roztøepených snímkù,
   a odstraòováním prokládání z roztøepených snímkù.  Tøebaže správné nastavení tìchto hodnot mùže zlepšit
   pøesnost uspoøádání, mohou také stav zhoršit.
</p>
<p><var>field</var> -&nbsp;
</p>
<p> Nastavuje ze kterého pole se má uspoøádávat.  Doporuèuje se nastavit ho na stejnou hodnotu
         jako poøadí order kromì pøípadu, kdy máte zkušenost se selháním uspoøádání s takovým nastavením.  Za urèitých 
         okolností zmìna pole, které je použito jako zaèátek pøi uspoøádání mùže mít velký dopad
         na výkon uspoøádání. Možné hodnoty jsou:</p>
<p>-1 = auto (TFM nastaví pole na stejnou hodnotu jakou má parametr order)<br>
            0 = spodní pole<br>
            1 = horní pole
</p>
<p>Výchozí:  -1  (int)
</p>
<p><var>slow</var> -
</p>
<p>Nastavuje která funkce uspoøádání polí je použita.  Možná nastavení:</p>
<p> 0 - normální   (mìla by mít nejhorší pøesnost)<br>
            1 - pomalejší<br>
            2 - nejpomalejší  (mìla by mít nejlepší pøesnost)
</p>
<p>Výchozí:  1  (int)
</p>
<p><var>mChroma</var> -
</p>
<p>Nastavuje zda má a nebo nemá být barevnost zahrnuta pøi porovnávání polí.  Ve vìtšinì 
pøípadù se doporuèuje nechat ho zapnutý.  Pouze, když váš klip má problémy se špatnou barevností
jako tìžké duhové nebo jiné artefakty, by jste mìli nastavit tento parametr na false.
Nastavení na false by mohlo být také použito z rychlostních dùvodù za cenu úbytku 
pøesnosti.
</p>
<p>true = barevnost je zahrnuta<br>
            false = barevnost není zahrnuta
</p>
<p>Výchozí:  true  (bool)
</p>
<p><var>y0</var>/<var>y1</var> -
</p>
<p>Toto definuje výlukové pásmo, které vyluèuje øádky mezi y0 a y1 zahrnuté
         v rozhodnutí uspoøádání polí.  Výlukové pásmo mùže být použito
         pro ignorování titulkù, loga, nebo jiných vìcí, které mohou interferovat s uspoøádáním.
         y0 nastavuje poèáteèní øádek a y1 nastavuje poslední øádek, všechny øádky v rozsahu
         y0 až y1 (vèetnì y0 a y1) budou ignorovány.  Nastavte y0 rovno y1 pro vypnutí.
</p>
<p>Výchozí:  y0 - 0  (int)<br>
                   y1 - 0  (int)
</p>
<p><var>scthresh</var> -
<p>Nastavuje prahovou hodnotu zmìny scény jako procento maximální zmìny v jasové (luma) ploše.
         Dobré hodnoty jsou v rozsahu 8.0 až 14.0.  Detekce zmìny scény je využita v
         následujících parametrech:  ubsco, mmsco, a flags (jen flags=5).  Rozsah pro
         scthresh je [0.0, 100.0].

<p>Výchozí:  12.0  (double)

<p><var>ubsco</var> -

<p>Umožòuje použití u/b uspoøádání jen v okolí zmìn scén.  Parametr 'scthresh' nastavuje
         prahovou hodnotu zmìny scény jako procento maximální zmìny v jasové ploše.  Pro vypnutí
         tohoto (umožní u/b uspoøádání kdekoliv) nastavte ubsco na false.  Nastavení ubsco ovlivòuje jen
         automatické uspoøádání, t.j. u/b uspoøádání pøes nadøazení nebo vstupní soubor se nezmìní.
         Režimy uspoøádání které pracují s ubsco jsou 2, 3, 5, a 6 (jen ty, které 
         používají u/b uspoøádání).

<p>Výchozí:  true (bool)

<p><var>micmatching</var> -

<p>Když je micmatching vìtší než 0, tfm vezme do úvahy mic hodnoty uspoøádání
         když se rozhoduje jaké uspoøádání použít pro finální uspoøádání.  micmatching má 5 možných nastavení:

<p>0 - vypnuto
           1 - mic jsou použity jen k urèení zda 5 možných uspoøádání je jedno, 
                  které má významnì nižší hodnotu mic než ostatní ètyøi uspoøádání.
                  Pøi zapnutí této možnosti je možné v tfm použít jakékoliv uspoøádání (p/c/n/b/u)
                  bez ohledu na režim uspoøádání!<br>
           2 - použije mic pro pomoc pøi rozhodování uvnitø aktuálního režimu uspoøádání (jsou uvažována jen uspoøádání, která
                  by mohla být použita uvnitø aktuálního režimu uspoøádání)<br>
           3 - provádí obì možnosti 1 i 2<br>
           4 - provádí jen následnou kontrolu po rozhodnutí o uspoøádání (tato operace je zahrnuta do
                  micmatching režimù 1, 2, a 3, a není pøedmìtem parametru mmsco)

<p>Ladící (debug) výstup bude indikovat, kdy micmatching vedl ke zmìnì pøi rozhodování o uspoøádání.
         Zapnutí micmatching dìlá zpracování pomalejší kvùli potøebì výpoètu hodnot mic
         pro uspoøádání, které by normálnì nebyly poèítány.

<p>Parametr "mmsco" mùže být použit pro omezení použití micmatching jen na zmìny scén.
         Aby to tak bylo, nastavte mmsco na true..., pak bude micmatching moci ovlivnit jen snímky na obou stranách
         zmìny scény.

<p>**** Od v0.9.10.0 TFM, je výchozí hodnotou micmatching 1. To znamená, že jakékoliv jedno 
uspoøádání z pìti by mohlo být použito bez ohledu na režim uspoøádání!  Pokud si nepøejete takové chování
tak nastavte micmatching na 0!

<p>**** Od v0.9.12.6 TFM, všechny režimy micmatching spustí kontrolu po každém
rozhodnutí uspoøádání polí na pøípady kde hodnoty mic ukazují, že bylo zvoleno jasnì
špatné uspoøádání.  Tato èást pracuje nezávisle na
parametru mmsco.

<p>Výchozí:  1  (int)

<p><var>mmsco</var> -

<p>Povolí micmatching jen kolem zmìn scén.  Parametr 'scthresh' nastavuje
         prahovou hodnotu zmìny scény jako procento maximální zmìny v jasové ploše. Je-li nastaven
         na true, tak micmatching bude omezen jen na zmìny scén.  Je-li nastaven na false,
         tak bude micmatching povolen kdekoliv.

<p>Výchozí:  true (bool)

<p><var>hint</var> -

<p>Zapíná zápis hint informace do video snímkù pro ètení ve filtrech tdecimate nebo tdeint.
         Informace zahrnují použité uspoøádání, roztøepení vs. progresivní, a d2v rff info. true zapíná
         zápis, false vypíná.

<p>Výchozí:  true (bool)

<p><var>opt</var> -

<p>Øídí, které cpu optimalizace jsou použity.  Možná nastavení:
<p>        0 - použít c rutiny<br>
            1 - použít mmx rutiny<br>
            2 - použít isse rutiny<br>
            3 - použít sse2 rutiny<br>
            4 - autodetekce

<p>Výchozí:  4  (int)
<p>Zbytek "pokroèilých parametrù" ovládá detekci roztøepených snímkù a odstraòování prokládání,
   a jsou použity jen když je mode nastaven na 1, 2, nebo 4 nebo PP (post-processing) je nastaven na 1 nebo vìtší!
                                                
<p><var>cthresh</var> -
</p>
<p>Toto je prahová hodnota roztøepení oblasti použitá pro detekci roztøepených snímkù.  Je podobná
         dthresh nebo dthreshold v telecide() a fielddeinterlace().  To v podstatì 
         ovládá jak "silné" nebo "viditelné" musí být roztøepení, aby bylo detekované.  Vìtší hodnoty
         znamenají, že roztøepení musí být více viditelné a menší hodnoty znamenají, že mùže být ménì
         viditelné nebo silné a pøitom stále detekované.  Platná nastavení jsou od -1 (každý pixel
         bude detekován jako roztøepený) do 255 (žádný pixel nebude detekovaný jako roztøepený).  Je to
         v podstatì hodnota rozdílu pixelu.  Dobrý rozsah je mezi 8 až 12.</p>
<p>Výchozí:  9  (int)</p>

<p><var>chroma</var> -
</p>
<p>Nastavuje, zda má a nebo nemá být barevnost uvažována pøi rozhodování o roztøepenosti snímku.  Vypnìte  
         ho jen, když má váš zdroj problémy s barevností (duha, atd...) , které 
         zpùsobují problémy detekci roztøepení snímku pøi zapnutém chroma.  Ve skuteènosti
         je jeho nastavení na false obvykle dobré, kromì pøípadu kdy je ve zdroji roztøepená jen 
         barevnost.</p>
<p>true = barevnost (chroma) je zahrnuta<br>
   false = barevnost (chroma) není zahrnuta</p>
<p>Výchozí:  false  (bool)</p>

<p><var>blockx</var> -
</p>
<p>Nastavuje x-ovou velikost okna použitého pøi detekci roztøepení snímku.  	
         To se týká velikosti oblasti, ve které je vyžadován MI poèet pixelù, aby to bylo
         detekováno jako roztøepení pro deklarování roztøepeného snímku.  Viz popis parametru MI
         pro více informací.  Možné hodnoty jsou jakákoliv èísla, která jsou druhými mocninami èísla 2
         poèínaje 4 a konèe 2048 (t.j. 4, 8, 16, 32, ... 2048).</p>
<p>Výchozí:  16  (int)</p>

<p><var>blocky</var> -
</p>
<p>Nastavuje y-ovou velikost okna použitého pøi detekci roztøepení snímku.  	
         To se týká velikosti oblasti, ve které je vyžadován MI poèet pixelù, aby to bylo
         detekováno jako roztøepení pro deklarování roztøepeného snímku.  Viz popis parametru MI
         pro více informací.  Možné hodnoty jsou jakákoliv èísla, která jsou druhými mocninami èísla 2
         poèínaje 4 a konèe 2048 (t.j. 4, 8, 16, 32, ... 2048)</p>
<p>Výchozí:  16  (int)</p>

<p><var>MI</var> -<p>
<p>Poèet roztøepeých pixelù uvnitø blokù o rozmìrech blocky na blockx na snímek
         pro to, aby byl snímek detekován jako roztøepený. Zatímco cthresh ovládá jak "viditelné" musí
         roztøepení být, toto nastavení ovládá "kolik" roztøepení musí být v každé lokalizované oblasti
         (okno definované  nastavením blockx a blocky) ve snímku.  Minimální nastavení = 0,
         maximální nastavení = blocky x blockx (což je bod ve kterém nebudou nikdy žádné snímky detekovány jako roztøepené).</p>
<p>Výchozí:  80  (int)</p>

<p><var>metric</var> -
<p>Nastavuje, která prostorová (spatial) metrika roztøepení je použita pro detekci roztøepených pixelù.  Možné
  volby:</p>

<p>Pøedpokládejme 5 sousedních pixelù (a,b,c,d,e) umístìných vertikálnì.

                <ul>    a
                <br>    b
                <br>    c
                <br>    d
                <br>    e</ul>
<pre>
<p>            0:  d1 = c - b;
<p>                d2 = c - d;
<p>                jestliže ((d1 > cthresh && d2 > cthresh) || (d1 < -cthresh && d2 < -cthresh))
<p>                {
<p>                   jestliže (abs(a+4*c+e-3*(b+d)) > cthresh*6) tak je roztøepený;
<p>                }
<p>
<p>            1:  val = (b - c) * (d - c);
<p>                jestliže (val > cthresh*cthresh) tak je roztøepený;
</pre>
<p>         Metriku 0 showcombedtivtc používal pøed verzí v1.2.  Metrika 1 je
         metrika roztøepení používaná ve funkcích FieldDeinterlace()/IsCombed() od Donalda Grafta
         v decomb.dll.

<p>Výchozí:  0  (int)
         
<p><var>mthresh</var> -&nbsp;<br>
<br>
Nastavuje prahovou hodnotu pohybu (rozdíl pixelu) pro odstranìní prokládání pøi použití pohybové
adaptace (PP > 4).  Jak bylo øeèeno, je to jednoduše prahová hodnota rozdílu pixelu mezi
snímky... pokud je pod mthresh tak je pixel považován za statický, pokud je nad mthresh je
považován za pohyblivý.
</p>
<p>Výchozí:  5  (int)
</p>
<p><var>clip2</var> -
</p>
<p>Pøi použití PP > 1 mùže být použit tento parametr pro zadání klipu odkud vezme snímky s 
         odstranìným prokládáním místo použití nìkteré metody odstraòování prokládání vestavìné v TFM.  Pokud je PP < 5
         tak budou snímky brány takové jaké jsou z klipu clip2, pokud je PP >= 5 (t.j. použití pohybové adaptace)
         tak TFM vytvoøí masku jako obvykle a z klipu clip2 budou brány jen pixely v pohybových oblastech.
         Pro použití vnitøního odstraòování prokládání z TFM nezadávejte nic jako clip2.
         Jako pøíklad použití parametru clip2 se podívejte na soubor clip2_sample_avs.avs .</p>
<p>Výchozí:  NULL  (PClip)
</p>
<h2><a name="io-par"></a>D.)  Vstupní/výstupní parametry  souboru:
</h2>
<p>Tato nastavení souvisí s použitím nadøazovacího (overrides) souboru a možnostmi výstupního/vstupního souboru.
</p>
<p><var>d2v</var> -&nbsp;
</p>
<p>Tato možnost je zamýšlena pro použití v pøípadì, kdy používáte mpeg2source() s d2v souborem.
        Nastavuje jméno a cestu k d2v souboru, který TFM zanalyzuje, aby vidìl jestli tam jsou nìjaké
        ilegální zmìny poøadí polí a volitelnì nastaví parametr order použitím 
        poøadí polí d2v souboru.  Pokud je d2v soubor shledán, že má ilegální pøenosy poøadí polí,
        TFM vytvoøí opravený d2v soubor s øetìzcem "-FIXED" pøipojeným na konec názvu souboru.
        Nový soubor bude umístìn do stejné složky jako pùvodní.  Mùžete pak
        použít tento opravený d2v soubor pro zpracování.  Pokud je parametr order nastaven na "-1" tak TFM
        detekuje poøadí polí z d2v souboru a nastaví parametr order na stejný. V závislosti
        na hodnotì parametru "flags" , TFM také použije d2v informace pro uspoøádání polí
        a pøenese informace z d2v do tdecimate pro pomoc pøi detekci duplikátù a detekce hybridù.
</p>
<p>*POZNÁMKA:  Tato možnost v souèasnosti podporuje všechny d2v formáty, které znám... což
                    zahrnuje:  dvd2avi 1.76, 1.77.3 a jejich varianty, všechny verze dvd2avidg, a
                    všechny verze dgindex.</p>
<p>Pøíklad:
<pre>TFM(d2v="myd2v.d2v")</pre>
</p>
<p>Výchozí:  ""  (String)
</p>

<p><var>flags</var> -&nbsp;

<p>Ovládají kolik informací z d2v souboru bude použito, když je nastaven parametr "d2v".
<p>Možné hodnoty:

<p>0 - Kontroluje d2v soubor na ilegální pøenosy a nastavuje parametr order pokud 
                  už není nastaven ruènì.  Také pøedává informaci rff flag duplikátù k
                  tdecimate.<br>
           1 - Stejné jako 0, plus použití znakù trf pro uspoøádání polí ve filmovch èástech (èásti
                  kde trf znaky sledují šablonu 012301... )<br>
           2 - Stejné jako 1, ale používá trf znaky pro uspoøádání polí ve všech oblastech (nemá šablonu
                   0123)  (velmi se nedoporuèuje!)<br>
           3 - Stejné jako 0, ale nepøedává žádné informace do tdecimate (t.j. nastavuje pouze poøadí a kontroluje
                   na ilegální pøenosy)<br>
           4 - Stejné jako 1, ale d2v uspoøádání jsou kontrolována na roztøepení. Pokud je detekováno uspoøádání z d2v
                   jako roztøepené tak tfm používá své vlastní rutiny uspoøádání pro takový snímek.<br>
           5 - Stejné jako 4, ale d2v uspoøádání jsou kontrolována na roztøepení jen kolem zmìn scén.

<p><b>VELMI DÙLEŽITÉ (MUSÍTE ÈÍST):</b>  Pro to aby možnosti 0, 1, 2, 4, a 5 pracovaly správnì, musí tfm/tdecimate
                                        buï okamžitì následovat pøíkaz mpeg2source() nebo
                                        jakékoli filtry mezi nimi nesmí upravit poøadí nebo poèet
                                        polí ve streamu jakýmkoliv zpùsobem. Nebo použijte soubor trimIn k
                                        tomu aby se øeklo TFM , které snímky byly zahozeny.

<p>Výchozí:  4  (int)

<p><var>trimIn</var> -&nbsp;

<p>Umožòuje použití možnosti d2v="" se znaky (flags) = 0, 1, 2, 4, a 5 s použitím funkce trim() pøed
         TFM.  Pro použití trimIn souboru jednoduše vytvoøte nový soubor a nastavte trimIn="CESTA\soubor.txt". 
         Soubor by mìl udávat seznam rozsahù snímkù, které NEbyly zachovány... napøíklad, øeknìme, že pùvodní
         soubor má 30000 snímkù, ale vy odstraníte prvních 100 použitím trim(100,0) pøed tfm.  Pak by jste
         v souboru trimIn mìli následující údaje:

<p><ul>0,99</ul>

<p>Takto jednoduše zadáte rozsahy snímkù, které už nejsou pøítomny.  Mùžete mít tolik rozsahù kolik
         chcete (napøíklad jestliže chcete vystøihnou více èástí) a mohou být zadány
         v jakémkoliv poøadí.  Pro zadání jediného snímku, tøeba 10, prostì použijte:

<p><ul>10,10</ul>

<p>Pokud chcete použít jen jeden rozsah, tak místo zadávání názvu souboru mùžete nastavit
         trimIn rovno øetìzci podobnému tomuto:

<p><ul>"0,99"   nebo   "10,10"    atd...</ul>

<p>Mùžete také použít záporná èísla pro provedení relativního adresování snímkù ke konci klipu.

<p>          -1 = poèet_snímkù-1<br>   
             -2 = poèet_snímkù-2<br>  
             -3 = poèet_snímkù-3<br>
             atd...

<p>Takže použití  "-2,-1"  by bylo stejné jako zadání dvou posledních snímkù.

<p>Výchozí:  ""  (String)
         
<p><var>ovr</var> -<br>
<br>
Nastavuje jméno a cestu k nadøazovacímu souboru.  Nadøazovací soubor umožòuje ruèní ovládání 
        toho, která uspoøádání jsou použita pro zadané snímky a rozsahy snímkù, pro zmìnu
        hodnot parametrù field, mode, order, mthresh, PP, a MI pro zadané snímky nebo rozsahy
        snímkù, a pro zadání zda by snímky mìli a nebo nemìly být považovány za roztøepené nebo 
        neroztøepené.  Pro více informací o použití nadøazovacího souboru se podívejte do kapitoly NADØAZOVÁNÍ na
        konci tohoto souboru.  Mùžete zároveò zadat soubor ovr a vstupní soubor.
        Uspoøádání a roztøepené snímky dané v nadøazovacím souboru mají pøednost pøed tìmi ve 
        vstupním souboru.</p>
<p>Pøíklad:
<pre>TFM(ovr="myOvrFile.txt")</pre>

<p>* POZNÁMKA:  Možnost ovr NEMÙŽE èíst výstupní soubory (soubory vytvoøené možností output).
Pro ètení výstupních souborù použijte parametr input.
</p>
<p>Výchozí:  ""  (String)
</p>
<p><var>ovrDefault</var> -
</p>
<p>Toto je zvláštní možnost, která vám umožní zmìnit výchozí "roztøepenou" práci pøi
        použití souboru ovr.  Ve výchozím stavu, jestliže nezadáte snímek jako roztøepený '+' nebo neroztøepený '-'
        v nadøazovacím souboru tak ho TFM prostì zpracuje jako obvykle.  Nicménì s možností ovrDefault,
        mùžete vytvoøit TFM oznaèení všech snímkù, které výslovnì nezadáte jako buï roztøepené nebo 
        neroztøepené.  V zásadì je to snadný zpùsob odstranìní prokládání jen v nìkolika zadaných snímcích v
        souboru a ujištìní, že jiné snímky budou netknuté a naopak.  Pokud není použit žádný soubor ovr, 
        tak toto nastavení nedìlá nic.  Možná nastavení:
</p>
<p>           0 - normální zpracování<br>
              1 - oznaèí všechny snímky nezadané v ovr souboru jako èisté (neroztøepené)<br>
              2 - oznaèí všechny snímky nezadané v ovr souboru jako roztøepené
</p>
<p>Výchozí:  0  (int)
</p>
<p><var>output</var> -&nbsp;
</p>
<p> Nastavuje jméno a cestu pro výstupní soubor.  TFM vytvoøí zadaný soubor a
        vysílá do nìj všechna použitá rozhodnutí o uspoøádaných a roztøepených snímcích.  Každý øádek bude obsahovat
        èíslo snímku, použité uspoøádání, a použité rozhodnutí o roztøepení snímku.  Tento soubor
        pak mùže být pozdìji použit pro vstup pøes parametr input (takže uspoøádání nebude nutné
        pøepoèítávat).  Výstupní soubor bude také obsahovat hodnotu mic pro
        uspoøádání použité na každý snímek a hodnotu mic pro jiná uspoøádání jestliže micout > 0.</p>
<p>Výchozí:  ""  (String)
</p>
<p><var>input</var> -
</p>
<p>Tato možnost je zamýšlena pro použití s možností output.  Pokud jste použili možnost output
        v pøedchozím prùchodu tak pro opìtovné použití této informace nastavte parametr input na jméno
        a cestu výstupního souboru.  Mùžete zároveò zadat jak vstupní soubor (input) tak soubor ovr. 
        V takovém pøípadì budou uspoøádání v nadøazovacím souboru mít pøednost.
        Možnost input NEMÙŽE èíst ovr soubory!!!  Pro ètení ovr souboru musíte použít parametr ovr !
</p>
<p>Výchozí:  ""  (String)
</p>
<p><var>outputC</var> -
</p>
<p>Tato možnost mùže být použita pro pomoc pøi identifikování èástí progresivního videa s 30fps vysíláním
        rozsahù, ve kterých nejménì "cNum" následných uspoøádání bylo uspoøádáno jako 'c'.  Tato 
        možnost není plnì provìøená, protože pomalé nebo statické filmové scény mohou také generovat dlouhé série 
        následných 'c' uspoøádání.</p>
<p>Výchozí:  ""  (String)
</p>
<p><var>cNum</var> -
</p>
<p>Poèet následných 'c' uspoøádání vyžadovaných pro vyslání rozsahu pøi použití možnosti outputC.
</p>
<p>Výchozí:  15  (int)
</p>

<p><var>batch</var> -
<p>Vypíná crc kontrolu aktuálního videa s crc ve vstupním souboru.
<p>Výchozí:  false  (bool)

<h2><a name="debug"></a>E.)  Parametry ladìní/zobrazení:
</h2>
<p>Tyto parametry ovládají jestli je vysílána ladící (debug) informace nebo jestli je vykreslena zobrazovací informace
   do snímku.  Tyto možnosti mohou být užiteèné pøi použití nadøazení nebo pøi zkoušení
   vyhodnocení selhání uspoøádání.
</p>
<p><var>debug</var> -
</p>
<p>Když je nastaven na true, informace bude vysílána pøes OutputDebugString() bìhem
         zpracování týkajícího se vnitøních operací TFM.  Informace zahrnují: statistiky
         porovnání uspoøádání, použité uspoøádání, která uspoøádání byla detekována jako roztøepená
         (pokud jsou režimy 1, 2, nebo 4 nebo PP > 0), a hodnoty parametrù field, mode, order, a MIC.
         Pro zobrazení tìchto informací mùžete použít utilitu zvanou "DebugView" dostupnou zdarma
         z:</p>
<p><a href="http://www.sysinternals.com/ntw2k/freeware/debugview.shtml">                
http://www.sysinternals.com/ntw2k/freeware/debugview.shtml</a>
</p>
<p>true = zapíná výstup<br>
   false = vypíná výstup
</p>
<p>Výchozí:  false  (bool)
</p>

<p><var>micout</var> -
<p>Využito jen s debug=true, display=true, nebo output.  Donutí tfm vypoèítat
         hodnoty MIC pro urèitá uspoøádání a vyslat je s ladící a/nebo zobrazovací
         informací nebo je zahrnout do výstupního souboru.  Možná nastavení:

<p>         0 - nevynutí výpoèet<br>
            1 - vypoèítá p/c/n<br>
            2 - vypoèítá p/c/n/b/u
<p>         Výchozí:  0 (int)

<p><var>display</var> -<br>
<br>Když je nastaven na true, informace bude vykreslena do videosnímkù samotných
         do levého horního rohu.  Tato informace není tak podrobná jako ladící
         výstup a zahrnuje jen èíslo aktuálního snímku, hodnoty parametrù mode,
         field, order, a MIC, uspoøádání, které bylo použito pro aktuální snímek, a zda
         byl a nebo nebyl výstupní snímek roztøepený pokud PP > 0.  Tato možnost mùže být užiteèná
         pøi použití nadøazování a když potøebujete vidìt jaké uspoøádání je aktuálnì použito.
         Pokud potøebujete podrobnìjší informace, jako èísla statistik uspoøádání
         nebo vidìt zda byla zadaná uspoøádání detekována jako roztøepená, tak budete potøebovat
         využít ladící výstup.  Od v0.9.1 display bude také indikovat jestli koneèný
         výstupní snímek je roztøepený a jestli v nìm bylo odstranìno prokládání pokud PP > 0.
         Pokud PP = 1 a parametr display je zapnut, tak TFM vykreslí bílý ètverec kolem
         oblasti snímku, která je spuštìna svou detekcí jako roztøepená, když je snímek
         shledán jako roztøepený jeho vnitøní detekcí (to nebude provedeno, jestliže
         je snímek vynucen jako roztøepený v nadøazení).</p>
<p>true = zapíná<br>
   false = vypíná
</p>
<p>Výchozí:  false  (bool)
</p>
<h2><a name="overrides"></a>F.)  Nadøazování:
</h2>
<p>Tato èást dává vysvìtlení jak zadat nadøazení (pøepsání hodnot), co každý typ uspoøádání znamená
a seznam možných nadøazení.
</p>
<h3>Pozadí a pøehled:
</h3>
<p>Než zaèneme, je zde jedna vìc kterou je potøeba pochopit, a tou je
     co k èertu znamenají písmena p, c, n, b, a u a odkud pochází.
     Dobrá, ve skuteènosti pøed tím potøebujeme vìdìt jaké uspoøádání polí se ve skuteènosti provede. 
     Budu pøedpokládat, že ètenáø ví co znamená, když se øekne, že stream byl podroben
     telecine.  Nyní uvažujme, že máme následující metodou telecine zpracovaný stream se
     spodními (bottom - b) a horními (top - t) poli danými následovnì (u obou 1t i 1b se pøedpokládá, že pocházejí ze
     stejného progresivního snímku, jako jsou 2t a 2b, atd...):</p>
<table border="1" width="40%">
  <tr>
    <td width="5%" align="center">1t</td>
    <td width="5%" align="center">2t</td>
    <td width="5%" align="center">3t</td>
    <td width="5%" align="center">4t</td>
    <td width="5%" align="center">5t</td>
    <td width="20%">  &lt;= pùvodní stream</td>
  </tr>
  <tr>
    <td width="5%" align="center">1b</td>
    <td width="5%" align="center">2b</td>
    <td width="5%" align="center">3b</td>
    <td width="5%" align="center">4b</td>
    <td width="5%" align="center">5b</td>
    <td width="20%">&nbsp;</td>
  </tr>
</table>
<p>Teï to co TFM dìlá, stejnì jako ostatní uspoøádávaèe polí, je uspoøádání polí tak, že zùstanou jen
progresivní snímky; nicménì, nedecimuje duplikáty.  Tedy výše uvedený vstupní stream 
je transformován do jednoho ze dvou následujících scénáøù (které 
závisí na poli od kterého uspoøádáváme, t.j. hodnotì parametru "field"):
</p>
<p>field = 0  (Uspoøádání od spodního)
</p>
<table border="1" width="40%">
  <tr>
    <td width="5%" align="center">1t</td>
    <td width="5%" align="center">2t</td>
    <td width="5%" align="center">3t</td>
    <td width="5%" align="center">4t</td>
    <td width="5%" align="center">4t</td>
    <td width="20%">  &lt;= výstupní stream</td>
  </tr>
  <tr>
    <td width="5%" align="center">1b</td>
    <td width="5%" align="center">2b</td>
    <td width="5%" align="center">3b</td>
    <td width="5%" align="center">4b</td>
    <td width="5%" align="center">4b</td>
    <td width="20%">&nbsp;</td>
  </tr>
  <tr>
    <td width="5%" align="center">c</td>
    <td width="5%" align="center">c</td>
    <td width="5%" align="center">n</td>
    <td width="5%" align="center">n</td>
    <td width="5%" align="center">c</td>
    <td width="20%">   &lt;= použitá uspoøádání</td>
  </tr>
</table>
<p>field = 1  (uspoøádání od horního)
</p>
<table border="1" width="40%">
  <tr>
    <td width="5%" align="center">1t</td>
    <td width="5%" align="center">2t</td>
    <td width="5%" align="center">2t</td>
    <td width="5%" align="center">3t</td>
    <td width="5%" align="center">4t</td>
    <td width="20%">  &lt;= výstupní stream</td>
  </tr>
  <tr>
    <td width="5%" align="center">1b</td>
    <td width="5%" align="center">2b</td>
    <td width="5%" align="center">2b</td>
    <td width="5%" align="center">3b</td>
    <td width="5%" align="center">4b</td>
    <td width="20%">&nbsp;</td>
  </tr>
  <tr>
    <td width="5%" align="center">c</td>
    <td width="5%" align="center">c</td>
    <td width="5%" align="center">p</td>
    <td width="5%" align="center">p</td>
    <td width="5%" align="center">c</td>
    <td width="20%">&lt;= použitá uspoøádání</td>
  </tr>
</table>
<p>Na tomto pøíkladu mùžete vidìt proè mùže mít nastavení field dopad na
      provedení uspoøádání...  Každopádnì teï tak máme pøedstavu o tom co se dìje a
      mùžeme se posunout k významu p, c, n, b, a u .  V podstatì tato písmena jen zastupují
      jaká uspoøádání jsou použita.  Jak mùžete vidìt z pøíkladu výše, c znamená, že je použito
      pole z aktuálního snímku a s opaènou paritou k tomu poli od kterého se uspoøádává,
      p znamená, že je použit pole s opaènou paritou k poli od kterého uspoøádáváme
      a z pøedchozího snímku, a n znamená, že je použito pole s opaènou paritou
      a z následujícího snímku.  Tato tøi uspoøádání, p, c, a n
      jsou nejbìžnìjší nebo nejobvyklejší uspoøádání.  V popisu parametru mode jsou tøi
      uspoøádání, která dìlají 2-cestné a 3-cestné uspoøádání.  Další uspoøádání:
      u a b  se mírnì liší v tom, že nepoužívají pole od kterého se uspoøádává.
      V popisu parametru mode jsou tato dvì uspoøádání 4-té/5-té uspoøádání.
      Vizuální vysvìtlení všeho tohoto by pravdìpodobnì objasnilo vìci mnohem lépe, takže zde
      jsou vizuální reprezentace každého uspoøádání:</p>
<p>* V následujících pøíkladech se pøedpokládá, že právì uspoøádáváme
              druhý snímek (2t/2b).  Také bylo písmeno "x" umístìno za jak horní tak spodní pole,
              která budou použita v aktuálním uspoøádání.</p>
<p>field = 0:
</p>
<table border="1" width="90%">
  <tr>
    <td width="15%" align="center">c</td>
    <td width="15%" align="center">p</td>
    <td width="15%" align="center">n</td>
    <td width="15%" align="center">b</td>
    <td width="15%" align="center">u</td>
    <td width="15%">  &lt;= uspoøádání</td>
  </tr>
  <tr>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
      </table>
    </td>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">x</td>
          <td width="33%" align="center">&nbsp;</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
      </table>
    </td>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">&nbsp;</td>
          <td width="34%" align="center">x</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
      </table>
    </td>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">x</td>
          <td width="33%" align="center">&nbsp;</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
      </table>
    </td>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">&nbsp;</td>
          <td width="34%" align="center">x</td>
        </tr>
      </table>
    </td>
    <td width="15%">&lt;= stream</td>
  </tr>
  <tr>
    <td width="15%" align="center">2t</td>
    <td width="15%" align="center">1t</td>
    <td width="15%" align="center">2t</td>
    <td width="15%" align="center">2t</td>
    <td width="15%" align="center">2t</td>
    <td width="15%" rowspan="2">&lt;= výstupní snímek</td>
  </tr>
  <tr>
    <td width="15%" align="center">2b</td>
    <td width="15%" align="center">2b</td>
    <td width="15%" align="center">2b</td>
    <td width="15%" align="center">1b</td>
    <td width="15%" align="center">3b</td>
  </tr>
</table>
<p>field = 1:
</p>
<table border="1" width="90%">
  <tr>
    <td width="15%" align="center">c</td>
    <td width="15%" align="center">p</td>
    <td width="15%" align="center">n</td>
    <td width="15%" align="center">b</td>
    <td width="15%" align="center">u</td>
    <td width="15%">  &lt;= match</td>
  </tr>
  <tr>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
      </table>
    </td>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">x</td>
          <td width="33%" align="center">&nbsp;</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
      </table>
    </td>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">&nbsp;</td>
          <td width="34%" align="center">x</td>
        </tr>
      </table>
    </td>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">x</td>
          <td width="33%" align="center">&nbsp;</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
      </table>
    </td>
    <td width="15%">
      <table border="1" width="100%">
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">&nbsp;</td>
          <td width="34%" align="center">x</td>
        </tr>
        <tr>
          <td width="33%" align="center">1t</td>
          <td width="33%" align="center">2t</td>
          <td width="34%" align="center">2t</td>
        </tr>
        <tr>
          <td width="33%" align="center">1b</td>
          <td width="33%" align="center">2b</td>
          <td width="34%" align="center">3b</td>
        </tr>
        <tr>
          <td width="33%" align="center">&nbsp;</td>
          <td width="33%" align="center">x</td>
          <td width="34%" align="center">&nbsp;</td>
        </tr>
      </table>
    </td>
    <td width="15%">&lt;= stream</td>
  </tr>
  <tr>
    <td width="15%" align="center">2t</td>
    <td width="15%" align="center">2t</td>
    <td width="15%" align="center">2t</td>
    <td width="15%" align="center">1t</td>
    <td width="15%" align="center">2t</td>
    <td width="15%" rowspan="2">&lt;= výstupní snímek</td>
  </tr>
  <tr>
    <td width="15%" align="center">2b</td>
    <td width="15%" align="center">1b</td>
    <td width="15%" align="center">3b</td>
    <td width="15%" align="center">2b</td>
    <td width="15%" align="center">2b</td>
  </tr>
</table>
<p>Dobrá, to by to mìlo pìknì ukázat. Existuje ale pár dalších bodù.
      Jeden, který mùžete vidìt v pøíkladech výše, je že uspoøádání mají rùzné významy
      podle hodnoty parametru "field".  To je dùvod proè ve všech ovr souborech
      mùžete zadat hodnotu field s respektem na to, která uspoøádání jsou v souboru
      provádìna.  Je to tak, že když zadáte n, p, atd... uspoøádání v ovr souboru, TFM
      zajisté ví co tím myslíte.  NEMUSÍTE zadávat referenèní pole,
      pokud nìjaké nezadáte, TFM jednoduše pøedpokládá, že máte v úmyslu použít stejnou hodnotu jako
      je aktuální vnitøní hodnota field.   Nicménì, je mnohem bezpeènìjší hodnotu zadat.
      Druhý bod vychází z prvního bodu, a je jednoduše takový, že pokud referenèní
      pole, které použijete pro ovr soubor se liší od toho s vnitøní hodnotou field,
      tak uspoøádání bude v souladu s tím pøepnuto, takže je vše stejné.  Nicménì,
      to znamená, že pokud používáte ladící (debug) nebo zobrazovací (display) výstup, uspoøádání nebudou stejná
      jako ta v ovr souboru.  Tedy pro pøiblížení, zde jsou pøevody nebo
      ekvivalenty...</p>
<p>s Field = 0 ___ je to stejné jako ___ s Field = 1 a naopak:
</p>
<p>p == b<br>
c == c<br>
                             n        ==        u<br>
                             b        ==        p<br>
                             u        ==        n
</p>
<h3>Syntaxe a použití nadøazování:
</h3>
<h4>kódy uspoøádání:
</h4>
<p>* Viz kapitolu pozadí/pøehled pro vizuální pøedvedení uspoøádání.
                Pro nadøazení rozsahu snímkù mùžete zadat více kódù uspoøádání
                na stejný øádek a daná šablona bude dále v rozsahu opakována. 
                </p>
<p>      p = uspoøádání k pøedchozímu poli<br>
         c = uspoøádání k aktuálnímu poli<br>
         n = uspoøádání k následujícímu poli<br>
         b = uspoøádání k pøedchozímu poli  (uspoøádání od pole s opaènou paritou)<br>
         u = uspoøádání k následujícímu poli  (uspoøádání od pole s opaènou paritou)
</p>
<h4>kódy roztøepených snímkù:
</h4>
<p>* Tyto mohou být použity pro ruèní vynucené zadání snímkù, které mají být považovány za roztøepené nebo
               èisté.  Mùžete zadat šablony kódù roztøepených snímkù jako s
               kódy uspoøádání.</p>
<p>      + = vynutí považování snímku za roztøepený<br>
         - = vynutí považování snímku za neroztøepený
</p>
<h4>      kódy parametrù:
</h4>
<p>* Kódy parametrù, narozdíl od kódù uspoøádání také vyžadují hodnotu pro zmìnu
               pøi použití v nadøazovacím souboru.</p>
<p>      f = field<br>
         o = order<br>
         m = mode<br>
         M = mthresh<br>
         P = PP<br>
         i = MI
</p>
<h4>referenèní pole:
</h4>
<p>Vzhledem k tomu, že kódy uspoøádání mají rùzné významy podle parametru field, mùžete
         zadat referenèní pole pro nadøazovací soubor.  Všechna uspoøádání daná v souboru 
         jsou pak brána s respektem k danému poli.  Pokud není referenèní pole zadáno
         tak jsou vztažena všechna k referenèní vnitøní hodnotì field.</p>
<p>Pro zadání referenèního pole musíte vložit jeden z následujících øádkù jako
ZCELA PRVNÍ aktivní øádek v souboru:
</p>
<p>           field = top<br>
              field = bottom
</p>
<p>První by nastavil referenèní pole na horní - top (1) a druhý by ho nastavil na
spodní - bottom (0).  Podívejte se na zahrnutý pøíklad ovr souboru pøiložený v zip souboru filtru.
</p>
<h4>syntaxe nadøazování:
</h4>
<p>jeden snímek =>  èíslo_snímku kód(y) [zmìnìná_hodnota]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[] = vyžadovány jen pro kódy parametrù<br>
rozsah snímkù =>   poèáteèní_snímek,koncový_snímek kód(y) [zmìnìná_hodnota]
</p>
<h4>pøíklady:
</h4>
<table border="1" width="60%">
  <tr>
    <td width="20%">            0,100 pcpcbuu</td>       
    <td width="50%">          bude opakovat danou šablonu "pcpcbuu" uspoøádání poèínaje 
                              snímkem 0 a konèe snímkem 100</td>
  </tr>
  <tr>
    <td width="20%">           101 p</td>
    <td width="50%">               použije uspoøádání p pro snímek 101</td>
  </tr>
  <tr>
    <td width="20%">           300,400 c</td>
    <td width="50%">           použije uspoøádání c pro snímky 300 až 400</td>
  </tr>
  <tr>
    <td width="20%">           100,150 f -1</td>
    <td width="50%">        nastaví parametr field na -1 pro snímky 100 až 150</td>
  </tr>
  <tr>
    <td width="20%">           500,750 m 1</td>
    <td width="50%">         nastaví parametr mode na 1 pro snímky 500 až 750</td>
  </tr>
  <tr>
    <td width="20%">           871 o 1</td>
    <td width="50%">             nastaví parametr order na 1 (tff) pro snímek 871</td>
  </tr>
  <tr>
    <td width="20%">           3000,4231 cccpp</td>
    <td width="50%">     bude opakovat danou šablonu cccpp od snímku 3000 až do snímku 4231</td>
  </tr>
  <tr>
    <td width="20%">           4343 u</td>
    <td width="50%">              použije uspoøádání u pro snímek 4343</td>
  </tr>
  <tr>
    <td width="20%">           ;756 p</td>
    <td width="50%">              bude ignorováno</td>
  </tr>
  <tr>
    <td width="20%">           #co je to?!?!</td>
    <td width="50%">   bude ignorováno</td>
  </tr>
  <tr>
    <td width="20%">           70 -</td>
    <td width="50%">                vynutí uvažování snímku 70 jako èistého (neroztøepeného)</td>
  </tr>
  <tr>
    <td width="20%">           60,80 +</td>
    <td width="50%">             vynutí uvažování snímkù 60 až 80 jako roztøepeného</td>
  </tr>
  <tr>
    <td width="20%">           70,97 +--++</td>
    <td width="50%">         vynutí uvažování snímkù 70 až 97 jako roztøepených nebo neroztøepených                                  
    tak, jak je dáno šablonou</td>
  </tr>
  <tr>
    <td width="20%">           87,100 P 2</td>
    <td width="50%">          nastaví parametr PP na 2 pro snímky 87 až 100</td>
  </tr>
    <tr>
    <td width="20%">           10,20 i 100</td>
    <td width="50%">            nastaví MI na 100 pro snímky 10 až 20</td>
  </tr>
</table>
<h4>další vìci, které by se mìly vìdìt/pamatovat:
</h4>
<p>1.) Rozsahy jsou zahrnuty.
</p>
<p>2.) Pro kódy parametrù je zmìnìná hodnota vždy nastavena zpìt na tu, která byla pùvodnì
               nastavena pro snímky za zadaným rozsahem s nadøazením hodnot.
               (t.j. pokud zadáte nadøazení field pro snímky 600 až 700, po snímku
               700 je field automaticky nastaveno zpìt na jeho pùvodní hodnotu, a nemusíte
               ji nastavovat zpìt v nadøazovacím souboru!  Pùvodní hodnota je ta, která je 
               nastavena pøi naètení (t.j. buï výchozí nebo vámi nastavená ve vašem
               avisynth skriptu).</p>
<p>3.) Èísla snímkù musí být uvnitø rozsahu souboru.
</p>
<p>4.) Èísla snímkù pro kódy uspoøádání musí být rostoucí, a èísla snímkù pro 
               nìjaké kódy parametru se nesmí pøekrývat!!!  Jinými slovy, nedìlejte vícenásobné nadøazování
               pro nìkterý parametr na stejném rozsahu snímkù.</p>
<p>5.) Mezery jsou dùležité!  (žádné mezery mezi èárkou a èíslem snímku,
               jedna mezera mezi èíslem posledního snímku a specifikátorem, jedna mezera mezi
               specifikátorem a mìnìnou hodnotou pokud nìjakou má). Pro objasnìní se prostì podívejte na 
               pøíklady.</p>
<p>6.) V šablonových zadáních lze použít jen kódy uspoøádání a kódy roztøepených snímkù.
               Šablonová zadání mohou mít maximálnì do 50 kódù uspoøádání.</p>
7.) Pro okomentování øádku (TFM je bude ignorovat) v ovr souboru,                
mùžete vložit buï symbol '#' nebo symbol ';' na zaèátku tohoto øádku.</p>
<p>8.) Na ukázku je pøiložen pøíklad ovr souboru w/ komentáøù do zip souboru filtru.
</p>
9.) Nastavení rozsahu : druhé èíslo snímku na 0 znamená totéž jako nastavení na poslední
               snímek klipu.</p>


<h2><a name="changelist"></a>G.) Seznam zmìn
</h2>

<p>01/17/2008  v1.0.4<br>
         - Fixed a bug causing tfm to return a 'u' or 'b' match when it thought
             it was returning a 'p', 'c', or 'n' match if mode was set to 3 or 5 and
             micmatching was enabled (not set to 0).

<p>09/28/2007  v1.0.3<br>
         + added relative indexing from end frame number for trimIn files<br>
         + added ability to set trimIn to a string containing a single frame range

<p>05/25/2007  v1.0.2<br>
         - Fixed incorrect handling of the top/bottom lines in cubic post-processing

<p>02/19/2007  v1.0.1<br>
         + Support d2v file format v16<br>
         - fixed a bug in tfmpp destroying hints<br>
         - fixed generating ovr help info about combed frames in output files when PP=0

<p>01/18/2007  v1.0<br>
         + Support d2v file format v15 and remove check for newer d2v formats

<p>12/21/2006  v0.9.12.8<br>
         + Support d2v file format v14

<p>11/26/2006  v0.9.12.7<br>
         - expanded file input line buffers from 80 bytes to 1024 bytes

<p>11/04/2006  v0.9.12.6<br>
         + micmatching modes 1, 2, and 3 now check each match decision for cases where the
             correct match is obvious based off mic values but the field matching routine
             is unable to distinguish the correct match<br>
         + added micmatching mode 4, does the post match decision check and nothing else

<p>10/22/2006  v0.9.12.5<br>
         + preserve hints from dgdecode through tfm<br>
         + added flags=5 option... same as 4, except that only frames around scenechanges are checked
              for being combed<br>
         + changed 'sco' to 'scthresh' and added 'ubsco' and 'mmsco' parameters.  Using u/b matches
              only around scenechanges and using micmatching only around scenechanges are now
              controlled with separate parameters.<br>
         - fixed incorrect d2v duplicate marking by tfm when using hints and not using linear,
              forward play<br>
         - fixed frames with 'h' and 'l' matches not being correctly overridden by an ovr file

<p>10/03/2006  v0.9.12.4<br>
         + Added batch option (disables input file crc checking)<br>
         + Display crc values in error msg when crcs don't match

<p>07/26/2006  v0.9.12.3<br>
         - fixed crash in modes 0/4 when pp=0 and micout > 0<br>
         - fixed "possible missed combed frames" listing in ovr help information
              sometimes including frames that were marked combed via an ovr file

<p>05/08/2006  v0.9.12.2<br>
         + output file generation is now effected by the micout parameter<br>
         + if micout > 0 then calculate/output mics even when an override or d2v
               match is used<br>
         - fixed a bug introduced in the last release in cubic deint pping (pp=3/6)<br>
         - fixed a bug in one of the yuy2 checkcombed mmx assembly routines

<p>04/09/2006  v0.9.12.1<br>
         + minor field matching improvements<br>
         + optimized postprocessing (mmx/sse2 cubic/blend deint, mmx/sse2 motion map creation,
              mmx/sse2 clip2 copy, faster link/denoise routines)<br>
         + added ovr help information listing to bottom of output file<br>
         - call setcachehints for clip2 when used

<p>03/23/2006  v0.9.12.0<br>
         + Added metric parameter and new spatial combing metric<br>
         + Added hint parameter<br>
         - throw an error if the field order of a d2v does not match the
              user specified field order<br>
         - replace frame copy with makewritable where possible<br>
         - fixed cthresh < 0 not working correctly

<p>01/24/2006  v0.9.11.4<br>
         + slow=0 matching mode optimizations<br>
         + mmx version of isse/sse2 check_combed routine<br>
         + added opt parameter<br>
         - fixed sse2 routines using psrldq

<p>01/19/2006  v0.9.11.3<br>
         + assembly optimizations

<p>01/17/2006  v0.9.11.2<br>
         + Support d2v format version 13<br>
         + Write MIC values into output file<br>
         + A few new mmx/isse optimizations<br>
         + sse2 optimizations (only used on P4)<br>
         - Fixed clip2 crash caused by writing to a referenced frame<br>
         - Fixed rare crash on d2v input parsing caused by sometimes writing
             one entry past the end of an array

<p>12/03/2005  v0.9.11.1<br>
         + Added mmx versions of the isse scenechange routines<br>
         + Optimized combed frame detection routines

<p>11/01/2005  v0.9.11.0<br>
         + Added trimIn parameter<br>
         + Minor field matching improvement

<p>10/14/2005  v0.9.10.2<br>
         + micmatching can now be limited to scenechanges only, via the "sco" parameter<br>
         + slow=1/2 matching mode optimizations (~10% speed increase)<br>
         + display output now shows when scenechanges are detected when sco > 0<br>
         - changed sco default to 12.0

<p>10/12/2005  v0.9.10.1<br> 
         + support dgindex d2vformat v12

<p>09/28/2005  v0.9.10.0<br>
         + Allow MI to be changed via overrides (same as field/mode/order/etc...)<br>
         + Added mode 7 matching routine (specifically for material with blended fields)<br>
         - changed default MI value to 80<br>
         - changed default cthresh value to 9<br>
         - changed default micmatching value to 1<br>
         - fixed description of micmatching in help file

<p>09/21/2005  v0.9.9.7<br>
         + Field matching improvements<br>
         + micmatching changed from bool to int, added micmatching 2/3 options<br>
         - flags parameter now defaults to 4<br>
         - Fixed IsCombedTIVTC always resulting in an error being thrown (was
              introduced when micout was added)

<p>09/15/2005  v0.9.9.6<br>
         - Fixed micmatching parameter not being initialized correctly

<p>09/11/2005  v0.9.9.5<br>
         + Added flags=4 option<br>
         - when micmatching=true only calculate the extra mics if the mic value for the would
             be final match is > 15

<p>09/02/2005  v0.9.9.4<br>
         + Added micmatching parameter<br>
         + micout now works with display output<br>
         - stricter checking for 0123 sections with flags=1<br>
         - fixed a few debug output format inconsistencies

<p>08/27/2005  v0.9.9.3<br>
         + Added v11 d2v format support<br>
         + Field matching improvements (improved the code that decided which metrics
               to use when picking the final match)<br>
         + Added micout parameter

<p>08/14/2005  v0.9.9.2<br>
         + Added sco parameter (u/b matches only at scenechanges)

<p>07/31/2005  v0.9.9.1<br>
         + Added slowest matching fuction and changed the parameter "slow" from bool to int

<p>07/31/2005  v0.9.9<br>
         + Added new match mode (mode 6)<br>
         + Added field matching from d2v file and flags parameter to better control
              how the d2v info is used

<p>06/25/2005  v0.9.8.1<br>
+ Added support for new dgindex d2v's (d2vformat v10)
</p>
<p>06/06/2005  v0.9.8<br>
+ Added a new match mode (mode 2, old mode 2 is now mode 3, 3 is 4, and so on)<br>
         + Added support for new dgindex d2v's (d2vformat v9)
</p>
<p>04/20/2005  v0.9.7.3<br>
+ Debug and display options now output a value called MIC (the value that is computed              
and compared against MI to check if a frame is combed) to make tweaking              
the MI parameter easier.  The MIC value is computed during combed frame detection and              
is the single highest value computed for any one of the blockx by blocky sized blocks.              
Previously, combed frame detection exited immediately upon finding the first block              
with an MIC value greater then MI... it now scans all blocks and returns the highest.
Thus, the white box that is drawn when display=true, PP=1, and a frame is detected
as combed now corresponds to the block with the highest MIC value and not the first&nbsp;
to be found.<br>
         - Changed default MI value to 85 (also changed to 85 in IsCombedTIVTC)<br>
         - Fixed the white box drawn on combed frames when PP=1 sometimes being drawn in the
incorrect spot when mode was set to 1, 2, or 4
</p>
<p>03/13/2005  v0.9.7.2<br>
+ Post-processing now only links luma->chroma on the motion map, instead of doing full
luma->chroma, chroma->luma, and chroma->chroma linking.
</p>
<p>03/10/2005  v0.9.7.1<br>
- Fixed a crash that would occur if the d2v option was enabled and a trim() or some other
filter that altered the number of frames was used prior to tfm().
</p>
<p>02/19/2005  v0.9.7<br>
+ Added support for new dgindex project file versions 07 and 08 (dgindex v1.2) to the d2v option.<br>
         - Fixed the d2v method of fixing illegal transitions.<br>
         + TFM now uses the rff flags from the d2v to help tdecimate identify duplicates and 24p film.<br>
         - Changed default MI value to 100.<br>
         - Fixed the readme file indicating chroma=true, when it actually defaults to false.
</p>
<p>01/08/2005  v0.9.6.3<br>
- Fixed SetCacheHints being called incorrectly and always defaulting to CACHE_ALL.
</p>
<p>01/02/2005  v0.9.6.2<br>
- Changed the d2v method of fixing illegal transitions to one that doesn't alter
the total # of fields in the clip or the # of fields from each of the original frames in the stream.<br>
         - Changed default value for the chroma option to false.<br>
         + Some other optimizations and internal changes.
</p>
<p>12/22/2004  v0.9.6.1<br>
         - Fixed passing AsClip() a NULL argument during TFM and TFMPP object creation if no clip
was given for clip2.  This would cause assertion failure when compiled in debug mode.
</p>
<p>12/19/2004  v0.9.6<br>
         - Fixed not invoking a cache between TFM and TFMPP when PP > 4.<br>
         + Some internal additions to allow TDecimate to tell the difference between c matches
and deinterlaced frames.<br>
         + Added debug output to d2v checking... when debug=true and a d2v file is specified it will
report the type of d2v detected, the detected field order from the d2v if order = -1,<br>
               and report the errors if any are found.
</p>
<p>11/30/2004  v0.9.4
</p>
<p>+ significant speed up (30-50%) to modes 1, 2, and 4 with PP > 0, due to some missing logic
the output frame would needlessly get checked twice for combing.
</p>
<p>11/28/2004  v0.9.3.1<br>
         - Fixed crashing when mode = 0 or mode = 3 and PP was greater then 0, the conditions
for an array allocation were not adjusted as needed when the PP option was added in v0.9.1.
</p>
<p>11/28/2004  v0.9.3<br>
+ Added crc checking to input/output files.  Whenever an output file is created, TFM creates a crc32 value based off the first 15 frames in
the current clip.  When the file is loaded via the "input" option the crc value from the file is checked against the current clips crc              value.
</p>
<p>11/27/2004  v0.9.2<br>
         - Fixed "slow" and "mChroma" parameters defaulting to false instead of true.<br>
         - Fixed display option not writing any part of a line if the total line
length exceeded the width of the frame instead of writing what would fit.<br>
         - Changed default cthresh value to 10.<br>
         - Changed default PP value to 6 (motion-adaptive cubic interpolation).<br>
         + Added d2v and ovrDefault options.<br>
         + Added IsCombedIVTC() conditional function.<br>
         + Added cubic deinterlacing method.<br>
         + Re-did input/output parameters.  Files created via the output option can
no longer be read via the ovr option!  You must use the input parameter to read files created via the output parameter!.<br>
         + Output option no longer requires linear access.
</p>
<p>11/21/2004  v0.9.1<br>
         - Changed default mode value to 1.<br>
         - Changed default MI value to 128.<br>
         - Allow blockx and blocky sizes up to 2048.<br>
         - Reordered the parameter syntax slightly.<br>
         + Added exclusion band (y0/y1).<br>
         + Added post-processing (PP parameter) and related stuff.<br>
             - Added clip2 and mthresh parameters.<br>
         + Added hinting in preparation for tdecimate.
</p>
<p>11/11/2004  v0.9.0<br>
         - initial release
</p>
<h2><a name="todo"></a>H.) Na dopracování
</h2>
<p>
  - podle potøeby oprava chyb pro  øadu1.0 
</p>
<p>
kontakt:   forum.doom9.org  nick = tritical  nebo  email:  <a href="mailto:kes25c@mizzou.edu">kes25c@mizzou.edu</a>
</p>
<p><kbd>$English Date: 2005/07/10 16:11:01 $</kbd>
<p><kbd>Èeský pøeklad:10.4.2009</kbd>
</p>
</body>
</html>
