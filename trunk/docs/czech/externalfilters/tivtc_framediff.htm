<html>
<head>
<title>FrameDiff</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: tivtc_framediff.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $ 
-->
</head>
<body>
<h1>FrameDiff</h1>
<h2>Pøehled</h2>
<b>autor:</b>    tritical
<br><b>verze:</b>         1.6<br>
<b>stáhnout:</b>   <a href="http://bengal.missouri.edu/~kes25c/">http://bengal.missouri.edu/~kes25c/</a>, 
<a href="http://avisynth.org/warpenterprises/">http://avisynth.org/warpenterprises/</a>
<br><b>kategorie:</b>    Odstraòování prokládání &amp; pulldown
<br><b>požadavky:</b>&nbsp;
<ul>
  <li>YV12 &amp; YUY2 Barevné prostøedí</li>
</ul>

<p><b>licence:</b> GPL</p>

<hr size=2 width="100%" align=center>

<!-- #EndTemplate -->
<h2>Popis
</h2>
<p>FrameDiff vystavuje metriky výpoètových rutin tdecimate pro umožnìní nìkterých
   zajímavých operací a vizualizací. Je zde také verze FrameDiff
   která mùže být použita v podmínìném filtrování zvaná "CFrameDiff" , která umožòuje použít
   metriky výpoètových schopností tdecimate v podmínkovém prostøedí Avisynthu.
   CFrameDiff vrací buï vypoètené metriky nebo pozici bloku 
   do skriptu.</p>
<h3>Syntaxe</h3>
<p><code>FrameDiff</code> (int <var>&quot;mode&quot;</var>, bool <var>&quot;prevf&quot;</var>, int <var>&quot;nt&quot;</var>, 
                    int <var>&quot;blockx&quot;</var>, int <var>&quot;blocky&quot;</var>, <var>&quot;bool chroma&quot;</var>,
                    float <var>&quot;thresh&quot;</var>, int <var>&quot;display&quot;</var>, bool <var>&quot;debug&quot;</var>, 
                    bool <var>&quot;norm&quot;</var>, bool <var>&quot;denoise&quot;</var>,bool <var>&quot;ssd&quot;</var>, 
                    int <var>&quot;opt&quot;</var>)<br>

<code>CFieldDiff</code> (int <var>&quot;mode&quot;</var>, bool <var>&quot;prevf&quot;</var>, int <var>&quot;nt&quot;</var>, 
                    int <var>&quot;blockx&quot;</var>, int <var>&quot;blocky&quot;</var>, <var>&quot;bool chroma&quot;</var>,
                    bool <var>&quot;debug&quot;</var>, bool <var>&quot;norm&quot;</var>, bool <var>&quot;denoise&quot;</var>,
                    bool <var>&quot;ssd&quot;</var>, bool <var>&quot;rpos&quot;</var>, int <var>&quot;opt&quot;</var>)</p>

<h3>Pøíklad</h3>
<pre>conditionalfilter(last,source1,source2,"CFrameDiff",">","2.0")</pre>

<h2>Parametry</h2>

<p><var>     mode</var> -</p>
<p>Nastavuje zda se vrátí nejvyšší nebo nejnižší hodnota metriky snímku.
<ul>0 - nejnižší
<br>1 - nejvyšší
</ul>
<p>Výchozí:  1  (int)

<p><var>     prevf</var> -</p>
<p>Nastavuje zda je poèítán rozdíl od pøedchozího snímku nebo rozdíl od následujícího snímku.

<ul>true -  pøedchozí
<br>false - následující
</ul>
<p>Výchozí:  true  (bool)

<p><var>     nt</var> -</p>
<p>Prahová hodnota šumu použitá pøi výpoètu metrik.  Je to stejné jako
parametr nt v TDecimate.</p>
<p>výchozí:  0  (int)</p>

<p><var>     blockx/blocky</var> -</p>
<p>Definuje velikost blokù použitých pøi výpoètech metrik. blockx = velikost v ose x,
         blocky = velikost v ose y.  Musí být mocninami èísla 2, které jsou vìtší nebo rovny
         4 a menší nebo rovny 2048.  Jsou stejné jako nastavení blockx/blocky
         v TDecimate.

<p>Výchozí:  
<br>blockx = 32  (int)
<br>blocky = 32  (int)

<p><var>chroma</var> -</p>
<p>Nastavuje zda barevnost je a nebo není uvažována pøi výpoètech metrik.</p>
<p>Výchozí:  false  (bool)</p>

<p><var>display</var> -</p>
<p>Ovládá co, pokud vùbec nìco, bude vykresleno do snímkù.  Možná nastavení:
<ul>            0 - nic
<br>            1 - ladící (debug) info + ètvereèek je vykreslen kolem bloku, ze kterého pochází metrika
                   (nejnižší blok metriky pro mode = 0 a
                   nejvyšší blok metriky pro mode = 1)
<br>            2 - ladící (debug) info + pokud mode = 0 tak všechny bloky s metrikou, která
                   je <= parametru "thresh" budou vybarveny bíle,
                   jinak pokud mode = 1 , tak všechny bloky s metrikou, která je >=
                   "thresh" budou vybarveny bíle.  (Znaèka èerného jednotlivého pixelu
                   je pøidána do støedu každého vybarveného bloku)
<br>            3 - snímek je nastaven na 0 kromì bloku, z nìhož metrika pochází
                (nejnižší blok metriky pro mode = 0 a
                   nejvyšší blok metriky pro mode = 1), a který je nastaven na 255
<br>            4 - stejné jako 2, kromì toho, že se nezapisuje žádná ladící informace, nepøidává se
                žádná znaèka jednotlivého pixelu a zbytek snímku (neoznaèené bloky)
                je nastaven na 0.
</ul>                
<p>Výchozí:  0  (int)</p>

<p><var>thresh</var> -</p>
<p>Použito v display=2 pro urèení, které bloky vybarvit.  Je založen na normalizovaném rozsahu
         (0.0 až 100.0) použitém v tdecimate.
<p>Výchozí:  2.0 (float)

<p><var>debug</var> -</p>
<p>Výstup informace metriky pøes OutputDebugString()
<p>Výchozí:  false  (bool)</p>

<p><var>norm</var> -</p>
<p>Nastavuje zda vrátit normalizované metriky (0.0 až 100.0) nebo
         nenormalizované metriky pøi použití CFrameDiff v podmínìném filtrování. Také
         efekty, jejichž metriky jsou zobrazeny možností "display" pro FrameDiff.
<ul>true - vrátí normalizované metriky
<br>false - vrátí nenormalizované metriky
</ul>
<p>Výchozí:  true (bool)

<p><var>denoise</var> -</p>

<p>Nastavuje zda pøed provedením výpoètù rozdílù provést odšumìní nebo ne.
         To mùže významnì zlepšit metriky pro zašumìlé zdroje (t.j. stabilizuje metriky duplikovaných
         snímkù a usnadòuje øíci rozdíl mezi duplikáty a
         neduplikáty).  Pracuje také velmi dobøe se zdroji s hodnì lezoucími body (dotcrawl)
        protože odšumìní efektivnì ruší všechny lezoucí body.  Použití odšumìní
         práci trochu zpomalí, ale má MMX optimalizaci a pìknou rychlost.

<ul>true - použít odšumìní
<br>false - nepoužít
</ul>
<p>Výchozí:  false (bool)

<p><var>ssd</var> -</p>

<p>Ovládá zda jsou metriky vypoèteny jako SAD (souèet absolutních rozdílù)
         nebo SSD (souèet kvadrátù rozdílù).
<ul>true - použít ssd
<br>false - použít sad
</ul>         
<p>Výchozí:  false  (bool)</p>

<p><var>rpos</var> -</p>

<p>Ovládá zda CFrameDiff vrátí metriku nebo pozici bloku.  
         Pozice je vrácena jako jedno celé èíslo dané vztahem:

<ul>vrácená hodnota =  y*šíøka+x
</ul>
<p>kde x a y jsou souøadnice levého horního pixelu bloku.  Když je nastaven na true,
         tak je vrácena pozice. Jinak je vrácena metrika.

<p>Výchozí:  false (bool)

<p><var>opt</var> -</p>

<p>Ovládá, které optimalizace budou použity. Možná nastavení:
            <ul>0 - použije c rutiny
            <br>1 - použije mmx rutiny
            <br>2 - použije isse rutiny
            <br>3 - použije sse2 rutiny
            <br>4 - auto detekce</ul>
<p>Výchozí:  4  (int)</p>

<h2>Seznam zmìn:</h2>

<p>v1.6 - (11/21/2007)
<ul><li>- Opraveno vracení neplatných pozic v CFrameDiff pøi rpos=true a pøi žádném pohybu
          
</ul>

<p>v1.5 - (09/28/2007)
<ul><li>+ pøidány zobrazovací režimy 3/4 do framediff 
<li>+ do cframediff pøidána schopnost vrátit pozici bloku 
<li>- opravena chyba v cframediff, která zpùsobovala, že mode=0 vracel nejvyšší
        hodnotu místo nejnižší, když norm byl nastaven na true
</ul>
 
<p>v1.4 - (03/23/2006)
<ul><li>- nahrazeno kopírování snímku možností zápisu 
</ul>

<p>v1.3 - (01/24/2006)
<ul><li>+ portované nové mmx/isse/sse2 optimalizace z TDecimate 
<li>+ pøidán parametr opt
<li>- opraven chybìjící parametr ssd v øetìzci CFrameDiff 
</ul>

<p>v1.2 - (11/01/2005)
<ul><li>+ pøidán parametr ssd 
</ul>

<p>v1.1 - (9/28/2005)
<ul><li>+ pøidán parametr denoise 
</ul>

<h2>Na dopracování:</h2>
<ul>- nic</ul>

<p>Kontakt:   forum.doom9.org  nick = tritical  nebo  email:  <a href="mailto:kes25c@mizzou.edu">kes25c@mizzou.edu</a>

<p><kbd>$English Date: 2006/03/23 16:11:01 $</kbd>
<p><kbd>Èeský pøeklad:1.4.2009</kbd>
</p>
</body>
</html>
