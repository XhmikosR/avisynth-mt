<html>
<head>
<title>TComb</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: tcomb.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $ 
-->
</head>
<body>
<h1>TComb</h1>
<h2>Pøehled</h2>
<b>autor:</b>    tritical
<br><b>verze:</b>v2.0 Beta<br>
<b>stáhnout:</b>   <a href="http://bengal.missouri.edu/~kes25c/">http://bengal.missouri.edu/~kes25c/</a>, 
<a href="http://avisynth.org/warpenterprises/">http://avisynth.org/warpenterprises/</a>
<br><b>kategorie:</b>  Pluginy pro vysílané video
<br><b>požadavky:</b>&nbsp;
<ul>
  <li>YV12 &amp; YUY2 Barevné prostøedí</li>
  <li>NTSC</li>
</ul>

<p><b>licence:</b> GPL</p>

<hr size=2 width="100%" align=center>

<!-- #EndTemplate -->
<h2>Popis</h2>
<p>TComb je èasový kombinovaný filtr (snižuje cross-luminance - poruchy jasu (duhu) a cross-chrominance - poruchy barevnosti
   (dot crawl - lezoucí body) pro artefakty ve statických oblastech obrazu).  Bude pracovat JEN s NTSC materiálem, a
   NEBUDE pracovat s materiálem zpracovaným telecine, kde duhy/lezoucí body byly pøítomny pøed
   procesem telecine!  Aby byl funkèní, musí být použit pøed ivtc nebo odstranìním prokládání.  Podle toho co dìlá je 
   podobný filtrùm guavacomb/dedot.
<p>TComb podporuje vyhledávání (seekování)... to je, pøeskakování na náhodný snímek vytvoøí stejný výsledek
   jako by jste lineárnì došly k tomuto snímku.  Pro odstranìní dot crawl (lezoucích bodù) tcomb vyžaduje nejménì 3
   statická pole stejné parity a pro odstranìní duhy vyžaduje tcomb nejménì 5 statických polí
   stejné parity.

<h3>Syntaxe</h3>
<p><code>TComb</code> (clip, <var>&quot;mode&quot;</var>, int <var>&quot;fthreshL</var>&quot;, 
int <var>&quot;fthreshC</var>&quot;, int <var>&quot;othreshL&quot;</var>, int <var>&quot;othreshC&quot;</var>, 
bool <var>&quot;map&quot;</var>, double <var>&quot;scthresh&quot;</var>, bool <var>&quot;debug&quot;</var>,
int <var>&quot;opt&quot;</var>)</p>

<h3>PARAMETRY</h3>

<p><var>mode</var> - (omezení zpracování jen na jas-luma nebo barevnost-chroma)</p>
<p>Ovládá jestli jsou zpracovány obì komponenty - jas/barevnost nebo jen jedna z nich.  Možná nastavení:</p>
<p>        1 - zpracuje jen jas (luma)<br>
           2 - zpracuje jen  barevnost (chroma)<br>
           0 - zpracuje obojí</p>
<p>výchozí:  2  (int)</p>

<p><var>fthreshL</var>/<var>fthreshC</var> - (filtrované korelaèní prahové hodnoty)</p>
<p>Jedna z vìcí, které TComb kontroluje je korelace mezi filtrovanými hodnotami po délce
       filtraèního okna.  Pokud se všechny hodnoty liší o ménì než fthreshL (pro jas) nebo fthreshC
       (pro barevnost) tak filtrované hodnoty jsou považované za korelované.  Vìtší hodnoty
       umožní více filtrování (bude efektivnìjší pøi odstraòování duhy/lezoucích bodù - rainbowing/dot crawl), ale vytvoøí
       také více artefaktù.  Menší hodnoty vytváøí ménì artefaktù, ale budou ménì efektivní
       pøi odstraòování duhy/lezoucích bodù. Dobrý rozsah hodnot je mezi 4 a 7.
<p>výchozí: <var>fthreshL</var> -> 7  (int)<br>
            <var>fthreshC</var> -> 7</p>

<p><var>othreshL</var>/<var>othreshC</var> - (prahové hodnoty vysoké frekvence)</p>
<p>Jednou z vìcí, které TComb kontroluje je korelace mezi pùvodními hodnotami pixelu z každého jiného 
       pole stejné parity.  Kvùli oscilaèní periodì by tyto hodnoty mìly být shodné
       nebo velmi podobné ve statických oblastech obsahujících lezoucí body nebo duhu.  Pokud se hodnoty pixelu
       liší o ménì než othreshL (pro jas) nebo othreshC (pro barevnost), tak jsou pixely považovány
       za korelované.   Vìtší hodnoty umožní více filtrování (bude efektivnìjší pøi odstraòování 
       duhy/lezoucích bodù - rainbowing/dot crawl), ale vytvoøí
       také více artefaktù.  Menší hodnoty vytváøí ménì artefaktù, ale budou ménì efektivní
       pøi odstraòování duhy/lezoucích bodù. Dobrý rozsah hodnot je mezi 4 a 8.</p>

<p>výchozí: <var>othreshL</var> -> 5  (int)<br>
            <var>otThreshC</var> -> 4</p>

<p><var>map</var> -</p>
<p>Identifikuje pixely, které jsou nahrazovány filtrovanými hodnotami.  Každý pixel ve výstupním
       snímku bude mít jednu z následujících hodnot indikujících jak je filtrován:
</p>
        <p>0 - nefiltrováno<br>
           1 - 85 - [1 2 1] prùmìr z (n,n+1,n+2)<br>
           170 - [1 2 1] prùmìr z (n-2,n-1,n)<br>
           255 - [1 2 1] prùmìr z (n-1,n,n+1)</p>
<p>** n = aktuální snímek
<p>výchozí:  false  (bool)</p>

<p><var>scthresh</var> - (prahová hodnota zmìny scény)
<p>Nastavuje prahovou hodnotu detekce zmìny scény jako procento maximální zmìny v jasové
       ploše.  Použijte ladìní (debug) výstupu aby jste vidìly, které snímky jsou detekovány jako zmìna scény a 
       statistiky zmìny scén.
<p>výchozí:  12.0  (float)


<p><var>debug</var> -
<p>Zapne ladící (debug) výstup.  Jediná vìc, kterou zobrazuje jsou statistiky zmìn scény.  Informace
       je vysílána pøes OutputDebugString().  Pro zobrazení výstupu mùžete použít utilitu "DebugView" ze sysinternals. 
       Èísla snímkù v debug výstupu odpovídají vstupnímu klipu
       po výzvì separatefields().  TComb vnitønì vyzývá separatefields() pøed sebou samým
       a weave() po sobì.
<p>výchozí:  false  (bool)


<p><var>opt</var> -
<p>Øídí, které cpu optimalizace jsou použity.  Možná nastavení:
<p>         0 - použít c rutiny<br>
            1 - použít mmx rutiny<br>
            2 - použít isse rutiny<br>
            3 - použít sse2 rutiny<br>
            4 - autodetekce
<p>Výchozí:  4  (int)

<h3>ZÁKLADNÍ NASTAVENÍ/POUŽITÍ:</h3>


<p>Nastavení TComb je docela jednoduché.  Jediné hodnoty, které by byly nìkdy skuteènì potøeba nastavit
   jsou fthreshL/fthreshC, othreshL/othreshC, a mode.

<p>Nastavte mode na 0 pokud chcete odstranit jen lezoucí body (dot crawl), nastavte ho na 1 pokud chcete
   odstranit jen duhu, nebo ho nastavte na 2 pro odstranìní obou.

<ul>Nastavení odstranìní lezoucích bodù (Dot Crawl) (fthreshL/othreshL):

<ul>Pro nalezení dobrých hodnot pro fthreshL/othreshL, zaènìte následujícím øádkem:</ul></ul>

<p><pre>tcomb(mode=0,fthreshL=255,othreshL=255)</pre>

<p>Nyní držte othreshL na 255 , ale snižte fthreshL na 1.  Zvyšujte fthreshL
      po krocích 1 až 2 dokud nenajdete místo, ve kterém jsou odstranìny všechny lezoucí body.
      Zapamatujte si tu hodnotu.  Dále nastavte fthreshL zpìt na 255, a nastavte othreshL na 1.
      Nyní zvyšujte othreshL po krocích 1 nebo 2 dokud nenajdete místo ve kterém jsou
      lezoucí body odstranìny.  Teï jste dostali hodnoty pro fthreshL/othreshL.

<p><ul>Nastavení odstranìní duhy (fthreshC/othreshC):

<ul>Pro nalezení dobrých hodnot pro fthreshC/othreshC, zaènìte následujícím øádkem:</ul></ul>

<pre>tcomb(mode=1,fthreshC=255,othreshC=255)</pre>

<p>Nyní držte othreshC na 255, ale snižte fthreshC na 1.  Zvyšujte fthreshC
      po krocích 1 až 2 dokud nenajdete místo, ve kterém je odstranìna veškerá duha (nebo její vìtšina).
      Zapamatujte si tuto hodnotu.  Dále nastavte  fthreshC zpìt na 255, a nastavte othreshC na 1.
      Nyní zvyšujte othreshC po krocích 1 nebo 2 dokud nenajdete místo ve kterém je
      odstranìna veškerá duha (nebo její vìtšina).  Teï jste dostali hodnoty pro fthreshC/othreshC.

<pre>Jakmile jsou nastaveny parametry mode, fthreshL/fthreshC, a othreshL/othreshC, pøidejte
   nezbytný øádek tcomb() do vašeho skriptu a pøehrajte jeho èást.  Jestliže uvidíte jakékoliv
   artefakty, zkuste snížit hodnoty fthresh/othresh.</pre>
   
<h2>Seznam zmìn</h2>
<p>05/16/2006  v2.0 Beta 2<br>
       + Pøísnìjší kontrola othreshL/othreshC pøi hledání oscilace<br>
       + Pro detekci lezoucích bodù vyžadován aspoò jeden vertikální soused (y-1/y+1, x-1/x/x+1)<br>
       - Opraveno možné selhání s yuy2 vstupem (sse2 planar<->packed pøevody)

<p>03/31/2006  v2.0 Beta 1<br>
       - kompletnì pøepsáno
       
<p>   06/24/2005  v0.9.0<br>
- Pùvodní vydání</p>

<h2>Na dopracování:</h2>

<p>- odstranit buffering snímkù/informací, které nejsou ve skuteènosti využívány (bylo pro
         vývojové/testovací úèely). Mìlo by ušetøit hodnì využití RAM.
<p>- vydání v2.0 final
     
<p><kbd>$English Date: 2005/07/10 16:11:01 $</kbd>
<p><kbd>Èeský pøeklad:31.3.2009</kbd></p>
</body>
</html>

