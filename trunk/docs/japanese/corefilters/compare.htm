<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Compare フィルタ</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
   <link rel="stylesheet" type="text/css" href="../ja.css">
</head>
<body>
<h2>
<a NAME="Compare"></a>Compare
</h2>

<p><code>Compare </code>(<var>clip_filtered, clip_original, string "channels",
string "logfile", bool "show_graph"</var>)</p>

<p>このフィルタは、オリジナルのクリップ（<var>clip_original</var>）とそのフィルタ適用済みのバージョン（<var>clip_filtered</var>）を比較します。フィルタ適用済みのバージョンは、比較の結果付きで返却されます。フレームごとに Mean Absolute Difference<a href="#footnote_1" class="footnote_link">*1</a>
、Mean Difference<a href="#footnote_2" class="footnote_link">*2</a>およびピーク信号対雑音比（PSNR）<a href="#footnote_3" class="footnote_link">*3</a>のほか、（フレームごとに計算される）そのフレームまでの PSNR の min （最小値）、avg （平均値）および max （最大値）も与えられます。<em>v2.53</em> から、（すべてのフレームのすべてのピクセルにわたって計算される）「Overall PSNR<a href="#footnote_4" class="footnote_link">*4</a>」も出力クリップ上に表示されます。</p>

<p><var>channels</var> 文字列（デフォルト &quot;&quot;）は R、G、B （、A）または Y、U、V のいずれかの組み合わせからなり、どちらを使用するのかはソースクリップによります。空の場合<a href="#footnote_5" class="footnote_link">*5</a>、入力クリップが YCbCr なら &quot;YUV&quot; を、入力クリップが RGB なら &quot;RGB&quot; を意味します。</p>

<p><var>show_graph</var> （デフォルト false）が true なら、Marc の PSNR グラフも描画されます。</p>

<p><var>logfile</var> が指定されると、結果はその名前でファイルに書き出され、クリップ上には描画されません。たくさんのフレームを比較する必要がある場合にはずっと高速です。</p>

<p><b>使用例:</b>
<pre># 画面上に 2 つのクリップの差を表示する:
Compare(clip1, clip2)
# ログファイルの生成用:
Compare(clip1, clip2, &quot;&quot;, &quot;compare.log&quot;)
# YUY2 クリップの色差チャンネルのみ比較する:
Compare(clip1, clip2, &quot;UV&quot;)</pre>

<p><a href="http://en.wikipedia.org/wiki/PSNR">PSNR</a><a href="#footnote_6" class="footnote_link">*6</a> は、dB（デシベル）で評価されます。以下のように定義されます<a href="#footnote_7" class="footnote_link">*7</a></p>

<pre>MSE(I,K) = 1/M * sum_{j,k} | I(j,k) - K(j,k) |^2
PSNR(I,K) = 20 * log_10 ( 255/sqrt(MSE(I,K)) )</pre>

<p>(j,k) は、フレームのすべてのピクセルに及びます。M は、フレーム内のピクセル数です。</p>

<p><b>更新履歴:</b>
<table border="1" width="39%">
  <tbody>
    <tr>
      <td width="5%">v2.58</td>
      <td width="95%">YV12 サポート。</td>
    </tr>
  </tbody>
</table>

<p><kbd>原文 Date: 2008/06/16 19:42:53</kbd><br>
<kbd>日本語訳 $Date: 2008/08/13 02:48:39 $</kbd></p>

<form><input TYPE="Button" VALUE="戻る"
onClick="history.go(-1)"></form>

<hr>
<div id="footnote">
<ul>
  <li>訳者註:
    <ul>
      <li><a name="footnote_1" class="footnote_link">*1</a> <span class="footnote_text">MAD。絶対誤差平均。</span></li>
      <li><a name="footnote_2" class="footnote_link">*2</a> <span class="footnote_text">平均差。</span></li>
      <li><a name="footnote_3" class="footnote_link">*3</a> <span class="footnote_text">PSNR は Peak Signal to Noise Ratio の略。日本語では「ピーク信号対雑音比」。参考: <a href="http://ageha909.blog121.fc2.com/blog-entry-469.html">PSNRとは - Mov日記 - Fraternity7</a>、<a href="http://d.hatena.ne.jp/makorin72/20080710#1215708369">2008-07-10 - makorin72の日記（と、いうよりもメモ）</a></span></li>
      <li><a name="footnote_4" class="footnote_link">*4</a> <span class="footnote_text">「Overall PSNR は、すべてのビデオフレームがタイル上に敷き詰められて巨大な 1 つの画像になったかのようにビデオシーケンスを取り扱います。PSNR は、この巨大な画像に対して効果的に算出されます。」（<a href="http://forum.doom9.org/showthread.php?s=&amp;threadid=57744">Overall PSNR for Compare() - Doom9's Forum</a> より）</span></li>
      <li><a name="footnote_5" class="footnote_link">*5</a> <span class="footnote_text">&quot;&quot; のこと。下記の使用例の 2 つ目を参照。</span></li>
      <li><a name="footnote_6" class="footnote_link">*6</a> <span class="footnote_text">訳者註の 3 を参照。</span></li>
      <li><a name="footnote_7" class="footnote_link">*7</a> <span class="footnote_text">式中の MSE は、平均二乗誤差（Mean Squared Error）の意味。</span></li>
    </ul>
  </li>
</ul>
</div>

</body>
</html>
