<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!--
Automatically generated, don't change:
$Id: faq_loading_clips.htm,v 1.13 2011/12/04 15:27:59 wilbertd Exp $ 
-->
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <title> FAQ - Loading clips (video, audio and images) into AviSynth </title>
<style type=text/css></style>
   <link rel="stylesheet" type="text/css" href="../avisynth.css">
</head>
<body>

<h1>AviSynth FAQ - Loading clips (video, audio and
images) into AviSynth</h1>

<h2>Contents</h2>

<ol>
  <li><a href="#Which_media_formats_can_be_loaded_into_AviSynth.3F">Which media formats can be loaded in AviSynth?</a></li>
  <li><a href="#Which_possibilities_exist_to_load_my_clip_into_AviSynth.3F">Which possibilities exist to load my clip into
AviSynth?</a></li>
  <li><a href="#What_are_the_advantages_and_disadvantages_of_using_DirectShowSource_to_load_your_media_files.3F">What are the advantages and disadvantages of using
DirectShowSource to load your media files?</a></li>
  <li><a href="#Has_AviSynth_a_direct_stream_copy_mode_like_VirtualDub.3F">Has AviSynth a direct stream copy mode like
VirtualDub?</a></li>
  <li><a href="#How_do_I_load_AVI_files_into_AviSynth.3F">How do I load AVI files into AviSynth?</a></li>
  <li><a href="#Can_I_load_video_with_audio_from_AVI_into_AviSynth.3F">Can I load video with audio from AVI into
AviSynth?</a></li>
  <li><a href="#How_do_I_load_MPEG-1.2FMPEG-2.2FDVD_VOB.2FTS.2FPVA_into_AviSynth.3F">How do I load MPEG-1/MPEG-2/DVD VOB/TS/PVA into
AviSynth?</a></li>
  <li><a href="#How_do_I_load_QuickTime_files_into_AviSynth.3F">How do I load QuickTime files into AviSynth?</a></li>
  <li><a href="#How_do_I_load_QuickTime_files_into_AviSynth.3F">How do I load raw source video files into
AviSynth?</a></li>
  <li><a href="#How_do_I_load_RealMedia_files_into_AviSynth.3F">How do I load RealMedia files into AviSynth?</a></li>
  <li><a href="#How_do_I_load_Windows_Media_Video_files_into_AviSynth.3F">How do I load Windows Media Video files into AviSynth?</a></li>
  <li><a href="#How_do_I_load_MP4.2FMKV.2FM2TS_into_AviSynth.3F">How do I load MP4/MKV/M2TS/EVO into AviSynth?</a></li>
  <li><a href="#How_do_I_load_RealMedia_files_into_AviSynth.3F">How do I load WAVE PCM files into AviSynth?</a></li>
  <li><a href="#How_do_I_load_MP1.2FMP2.2FMP3.2FMPA.2FAC3.2FDTS.2FLPCM_into_AviSynth.3F">How do I load MP1/MP2/MP3/MPA/AC3/DTS/LPCM into
AviSynth?</a></li>
  <li><a href="#How_do_I_load_aac.2Fflac.2Fogg_files_into_AviSynth.3F">How do I load aac/flac/ogg files into AviSynth?</a></li>
  <li><a href="#How_do_I_load_pictures_into_AviSynth.3F">How do I load pictures into AviSynth?</a></li>
</ol>

<a name="Which_media_formats_can_be_loaded_into_AviSynth.3F"></a>
<h3>Which media formats can be loaded into AviSynth?</h3>
<p>Most video/audio formats can be loaded into AviSynth, but there are some
exceptions like flv4 (VP6) and dvr-ms. If it is not possible to load
a clip into AviSynth, you will have to convert it into some other format which
can be loaded. Remember to choose a format for which you will have a minimal
downgrade in quality as a result of the conversion.</p>

<a name="Which_possibilities_exist_to_load_my_clip_into_AviSynth.3F"></a>
<h3>Which possibilities exist to load my clip into
AviSynth?</h3>
<p>In general there are two ways to load your video into AviSynth:</p>
<ol>
  <li>using an AviSynth internal filter or plugin which is designed to open some specific format.</li>
  <li>using the <a href="corefilters/directshowsource.htm">DirectShowSource</a>
    plugin.</li>
</ol>
<p>Make sure that your clip contains maximal one video and/or one audio stream
(thus remove the subtitles and remove other video/audio streams). If you want to
load a clip which contains both video and audio, you have two options:</p>
<ul>
  <li>Demux the audio stream and load the streams separately in AviSynth.</li>
  <li>Try to load the clip in AviSynth. This might or might not work. For AVIs,
    make sure you have a good AVI splitter installed, e.g. <a href="http://sourceforge.net/project/showfiles.php?group_id=205650">Gabest's
    AVI splitter</a>. (Yes,
    Windows comes with an own AVI splitter, which will work in most cases.)</li>
</ul>
<p>When loading a clip into AviSynth it is advised to follow the following
guidelines:</p>
<ul>
  <li>When it is possible to load your clip into AviSynth using either AviSource
    or a specific plugin then do so, since this is more reliable than the
    alternatives which are listed below.</li>
  <li>If the above fails, load your clip using the DirectShowSource plugin.</li>
  <li>If the above fails, convert your clip into a different format (into one
    which is supported by AviSynth).</li>
</ul>

<a name="What_are_the_advantages_and_disadvantages_of_using_DirectShowSource_to_load_your_media_files.3F"></a>
<h3>What are the advantages and disadvantages of using
DirectShowSource to load your media files?</h3>
<p><i>advantages of DirectShowSource:</i></p>
<ul>
  <li>Many video and audio formats are supported through DirectShowSource (have
    a look at ffdshow for example).</li>
</ul>
<p><i>disadvantages of DirectShowSource:</i></p>
<ul>
  <li>It's less reliable than AviSource and specific video/audio input plugins.</li>
  <li>Seeking problems.</li>
  <li>It might be much trouble to get specific DirectShow filter doing the
    decoding for you. In many cases you will have multiple decoders that can
    decode the same specific format. The one which will be used is the one with
    the highest merit. It might be
    difficult to ensure that a specific decoder is doing the decoding. The
    document &quot;<a href="advancedtopics/importing_media.htm">Importing media
    into AviSynth</a>&quot; contains some more information about this.</li>
</ul>

<a name="Has_AviSynth_a_direct_stream_copy_mode_like_VirtualDub.3F"></a>
<h3>Has AviSynth a direct stream copy mode like
VirtualDub?</h3>
<p>No, the video and the audio are decompressed when opening them into AviSynth.</p>
<p>There is a modification of AviSynth v2.55 which supports 'direct stream copy'
for both video and audio. This modification is called DSynth and can be
downloaded <a href="http://esby.free.fr/">here</a>.
Perhaps it will be updated and merged into the official AviSynth builds one day.</p>

<a name="How_do_I_load_AVI_files_into_AviSynth.3F"></a>
<h3>How do I load AVI files into AviSynth?</h3>
<p>Use <a href="corefilters/avisource.htm">AviSource</a>
to load your AVI files in AviSynth. Example:</p>
<pre>AviSource(&quot;d:\filename.avi&quot;)</pre>
<p>or without the audio:</p>
<pre>AviSource(&quot;d:\filename.avi&quot;, false)</pre>
<p>If AviSynth is complaining about not being able to load your avi (couldn't
decompress ...) you need to install an appropriate codec. <a href="http://www.headbands.com/gspot/">GSpot</a>,
for example, will tell you what codec you need to install in order to be able to
open your avi.</p>
<p>Forcing a decoder being used for loading the clip into AviSynth:</p>
<pre># load your avi using the XviD codec:
AviSource(&quot;d:\filename.avi&quot;, fourCC=&quot;XVID&quot;) # opens an avi (for example encoded with DivX3) using the XviD Codec</pre>
<pre># load your dv-avi using the Canopus DV Codec:
AviSource(&quot;d:\filename.avi&quot;, fourCC=&quot;CDVC&quot;)</pre>

<a name="Can_I_load_video_with_audio_from_AVI_into_AviSynth.3F"></a>
<h3>Can I load video with audio from AVI into
AviSynth?</h3>
<p>It is always possible to demux your audio from the AVI file and load it
separately in AviSynth using an audio decoder, but in some cases (for example:
AVI with MP2/MP3/AC3/DTS audio) it is possible to load it directly in AviSynth.</p>
<p>For loading your AVI with audio you need (1) a VfW (Video for Windows) codec
to open (that is decode) your video in AviSynth and an ACM (Audio Compression
Manager) codec to open your audio in AviSynth. For many video and audio format
such codecs are available, but certainly not for all of them.</p>
<p>In the document &quot;<a href="advancedtopics/importing_media.htm#load_clip_vidaud">Importing
media into AviSynth</a>&quot; you can find those codecs.</p>

<a name="How_do_I_load_MPEG-1.2FMPEG-2.2FDVD_VOB.2FTS.2FPVA_into_AviSynth.3F"></a>
<h3>How do I load MPEG-1/MPEG-2/DVD VOB/TS/PVA into
AviSynth?</h3>
<p>DGDecode is an external plugin and supports MPEG-1, MPEG-2 / VOB, TS (with MPEG-4
ASP video) and PVA
streams. Open them into DGIndex first and create a d2v script which can be
opened in AviSynth (note that it will only open the video into AviSynth):</p>
<p>A few examples:</p>
<pre># DGDecode:
LoadPlugin(&quot;d:\dgdecode.dll&quot;)
mpeg2source(&quot;d:\filename.d2v&quot;)</pre>

<p>If your transport stream (*.TS) contains MPEG-4 AVC
video you need to demux the raw video stream from it and use <a href="http://forum.doom9.org/showthread.php?p=959013">DGAVCDec</a>
to open it in AviSynth. See <a href="#How_do_I_load_MP4.2FMKV.2FM2TS_into_AviSynth.3F">here</a>
for its usage.</p>

<a name="How_do_I_load_QuickTime_files_into_AviSynth.3F"></a>
<h3>How do I load QuickTime files into AviSynth?</h3>
<p>There are two ways to load your quicktime movies into AviSynth (and also
RawSource for uncompressed movs): QTSource and QTReader. The former one is very
recent and able to open many quicktime formats (with the possibility to open
them as YUY2), but you need to install QuickTime player in order to be able to
use this plugin. The latter one is very old, no installation of a player is
required in order to be able to open quicktime formats in AviSynth.</p>
<p>QTSource:</p>
<p>You will need Quicktime 6 for getting video only or Quicktime 7 for getting
audio and video.</p>
<pre># YUY2 (default):
QTInput(&quot;FileName.mov&quot;, color=2)

# with audio (in many cases possible with QuickTime 7)
QTInput(&quot;FileName.mov&quot;, color=2, audio=1)

# raw (with for example a YUYV format):
QTInput(&quot;FileName.mov&quot;, color=2, mode=1, raw=&quot;yuyv&quot;)

# dither = 1; converts raw 10bit to 8bit video (v210 = 10bit uyvy):
QTInput(&quot;FileName.mov&quot;, color=2, dither=1, raw=&quot;v210&quot;)</pre>
<p>QTReader:</p>
<p>If that doesn't work, or you don't have QuickTime, download the QTReader
plugin (can be found in Dooms download section):</p>
<pre>LoadVFAPIPlugin(&quot;C:\QTReader\QTReader.vfp&quot;, &quot;QTReader&quot;)
QTReader(&quot;C:\quicktime.mov&quot;)</pre>

<a name="How_do_I_load_raw_source_video_files_into_AviSynth.3F"></a>
<h3>How do I load raw source video files into
AviSynth?</h3>
<p>The external plugin RawSource supports all kinds of raw video files with the
YUV4MPEG2 header and without header (video files which contains YUV2, YV16,
YV12, RGB or Y8 video data).</p>
<p>Examples:</p>
<pre># This assumes there is a valid YUV4MPEG2-header inside:
RawSource(&quot;d:\yuv4mpeg.yuv&quot;)

# A raw file with RGBA data:
RawSource(&quot;d:\src6_625.raw&quot;,720,576,&quot;BGRA&quot;)

# You can enter the byte positions of the video frames directly (which can be found with yuvscan.exe).
# This is useful if it's not really raw video, but e.g. uncompressed MOV files or a file with some kind of header:
RawSource(&quot;d:\yuv.mov&quot;, 720, 576, &quot;UYVY&quot;, index=&quot;0:192512 1:1021952 25:21120512 50:42048512 75:62976512&quot;)</pre>

<a name="How_do_I_load_RealMedia_files_into_AviSynth.3F"></a>
<h3>How do I load RealMedia files into AviSynth?</h3>
<p>RM/RMVB (RealMedia / RealMedia Variable Bitrate usually containing Real
Video/Audio): install the <a href="http://sourceforge.net/projects/guliverkli/" class="external text" title="http://sourceforge.net/projects/guliverkli/" rel="nofollow">rmvb
splitter</a> and the Real codecs by installing RealPlayer/<a href="http://www.free-codecs.com/download/Real_Alternative.htm" class="external text" title="http://www.free-codecs.com/download/Real_Alternative.htm" rel="nofollow">RealAlternative</a>.
Create the script:</p>
<pre>DirectShowSource(&quot;d:\clip.rmvb&quot;, fps=25, convertfps=true) # adjust fps if necessary</pre>

<a name="How_do_I_load_Windows_Media_Video_files_into_AviSynth.3F"></a>
<h3>How do I load Windows Media Video files into AviSynth?</h3>
<p>WMV/ASF (Windows Media Video / Advanced Systems Format; usually containing
WMV/WMA) is not fully supported by ffdshow, so you will have to
install wmv codecs. Get <a href="http://msdn.microsoft.com/windowsmedia/downloads/default.aspx">WMF
SDK v9 for W2K or later for XP/Vista</a> which contains the codecs (and the DMO
wrappers necessary to use DMO filters in DirectShow). 
You can also get these codecs from Windows Media Player 9 Series or later, Windows Media Format runtime (WMFDist.exe),
Codec Installation Package (WM9Codecs.exe) from Microsoft site or other place.
(Note that Microsoft's own
VC1 codec is not supported in W2K since you need WMF SDK v11.) Create the
script:</p>
<pre>DirectShowSource(&quot;d:\clip.wmv&quot;, fps=25, convertfps=true) # adjust fps if necessary</pre>

<a name="How_do_I_load_MP4.2FMKV.2FM2TS_into_AviSynth.3F"></a>
<h3>How do I load MP4/MKV/M2TS/EVO into AviSynth?</h3>
<p>If your media file contains MPEG-4 ASP
video, then there are two possibilities of opening them in AviSynth:</p>
<p>1) Using the plugin <a href="http://forum.doom9.org/showthread.php?t=127037">FFmpegSource</a>.
All included dlls except ffmpegsource.dll should be copied to your system
folder. Some examples:</p>
<pre># loading the video from MKV and returning a timecodes file:
FFmpegSource(&quot;D:\file.mkv&quot;, vtrack = -1, atrack = -2, timecodes=&quot;timecodes_file.txt&quot;)

# loading the video and audio from a MP4 and returning a timecodes file:
FFmpegSource(&quot;D:\file_aac.mp4&quot;, vtrack = -1, atrack = -1, timecodes=&quot;timecodes_file.txt&quot;)</pre>
<p>It's important to generate a timecode file to check
whether the video has a constant framerate. If this the case you don't need to
use the timecode file and you can process the video in any way you want.
However, many non-AVI files contain video with a variable framerate (AVI files
always have a constant framerate though), and in that case you need to make sure
of the following two things:</p>
<ol>
  <li><i>Don't change the framerate and the number of
    frames in AviSynth.</i> If you do this (and you don't change the
    timecodes file manually) your video and audio in your final encoding will be
    out of sync.</li>
  <li><i><a href="advancedtopics/hybrid_video.htm#create-vfr-mkv">Use the timecodes file again</a> when muxing your
    encoded video and audio.</i> If you don't do this your video and audio in
    your final encoding will be out of sync.</li>
</ol>
<p>The main reason for this is that FFmpegSource opens the
video as it is. It doesn't add or remove frames to convert it to constant
framerate video to ensure sync.</p>
<p>2) Get <a href="http://ffdshow-tryout.sourceforge.net/">ffdshow</a>
and open the MP4/MKV file with DirectShowSource, thus for example</p>
<pre>DirectShowSource(&quot;D:\file.mkv&quot;, convertfps=true) # convertfps=true ensures sync if your video has a variable framerate</pre>
<p>If your media file contains MPEG-4 AVC video, then
there are two possibilities of opening them in AviSynth:</p>
<p>1) Using the plugin <a href="http://forum.doom9.org/showthread.php?t=127037">FFmpegSource</a>.
See above for its usage. At the moment, the supported containers are: AVI, MKV
and MP4.</p>
<p>2) Get <a href="http://forum.doom9.org/showthread.php?p=959013">DGAVCDec</a>.
At the moment you need to extract the raw stream (*.264)&nbsp; from the
container first (using MKVExtract, MPlayer, TSRemux or whatever program can
extract those streams). Open the raw stream file in DGAVCIndex to create an
index file (say track1.dga). Open the index file in AviSynth:</p>
<pre># raw video demuxed from M2TS (Blu-ray BDAV MPEG-2 transport streams)
LoadPlugin(&quot;C:\Program Files\AviSynth\plugins\DGAVCDecode.dll&quot;)
AVCSource(&quot;D:\track1.dga&quot;)</pre>

<a name="How_do_I_load_WAVE_PCM_files_into_AviSynth.3F"></a>
<h3>How do I load WAVE PCM files into AviSynth?</h3>
<p>Use WavSource to open your WAVE PCM files (assuming
that they are smaller than 4GB):</p>
<pre>WavSource(&quot;D:\file.wav&quot;)</pre>

<p>Use the plugin RaWav to open your WAVE PCM files that
are larger than 4GB (<a href="http://dotwhat.net/w64/9033/">Sonic Foundry Video Editor Wave64 Files
or W64</a>):</p>

<pre>RaWavSource(&quot;D:\file.w64&quot;, SampleRate=96000, SampleBits=24, Channels=6)

# or when a W64 header is present
RaWavSource(&quot;D:\file.w64&quot;, SampleRate=6) # assumes the presence of a W64 header and reads the needed info from it</pre>

<a name="How_do_I_load_MP1.2FMP2.2FMP3.2FMPA.2FAC3.2FDTS.2FLPCM_into_AviSynth.3F"></a>
<h3>How do I load MP1/MP2/MP3/MPA/AC3/DTS/LPCM into
AviSynth?</h3>
<p>Use NicAudio for loading your MP1/MP2/MP3/MPA/AC3/DTS/LPCM in AviSynth:</p>
<p>Some examples:</p>
<pre>LoadPlugin(&quot;C:\Program Files\AviSynth25\plugins\NicAudio.dll&quot;)

# AC3 audio:
V = BlankClip(height=576, width=720, fps=25)
A = NicAC3Source(&quot;D:\audio.AC3&quot;)
# A = NicAC3Source(&quot;D:\audio.AC3&quot;, downmix=2) # downmix to stereo
AudioDub(V, A)</pre>
<pre># LPCM audio (48 kHz, 16 bit and stereo):
V = BlankClip(height=576, width=720, fps=25)
A = NicLPCMSource(&quot;D:\audio.lpcm&quot;, 48000, 16, 2)
AudioDub(V, A)</pre>

<a name="How_do_I_load_aac.2Fflac.2Fogg_files_into_AviSynth.3F"></a>
<h3>How do I load aac/flac/ogg files into AviSynth?</h3>
<p>Use ffdshow (set AAC to libfaad or realaac), and use</p>
<pre>DirectShowSource(&quot;d:\audio.aac&quot;)</pre>
<p>For WAVE_FORMAT_EXTENSIBLE, ogg, flac, wma, and other formats, <a href="http://forum.doom9.org/showthread.php?t=108254" class="external text" title="http://forum.doom9.org/showthread.php?t=108254" rel="nofollow">BassAudio
and the correspoding libraries and Add-Ons</a> can be used. Note that
BassAudioSource can decode stereo aac/mp4, but it can't decode multichannel aac.</p>
<p>Some examples:</p>
<pre>bassAudioSource(&quot;C:\ab\Dido\001 Here With Me.m4a&quot;)</pre>
<pre>bassAudioSource(&quot;C:\ab\Dido\001 Here With Me.aac&quot;)</pre>

<a name="How_do_I_load_pictures_into_AviSynth.3F"></a>
<h3>How do I load pictures into AviSynth?</h3>
<p>1) Use <a href="corefilters/imagesource.htm" title="ImageReader">ImageReader</a>
or <a href="corefilters/imagesource.htm" title="ImageSource">ImageSource</a> to
load your pictures into AviSynth (can load the most popular formats, except GIF
and animated formats). See internal documentation for information.</p>
<p>2) Use the Immaavs plugin for GIF, animated formats and other type of
pictures.</p>
<pre># single picture:
immareadpic(&quot;x:\path\pic.bmp&quot;)
 
# animation:
immareadanim(&quot;x:\path\anim.gif&quot;)

# image sequence:
immareadseq(&quot;x:\path\seq%3.3d.png&quot;, start=5, stop=89, fps=25, textmode=2, posx=50, posy=50)</pre>
<p>
|<a href="faq_sections.htm" title="AviSynth FAQ">
Main Page</a> | <a href="faq_general_info.htm">General
Info</a> | <b>Loading
Clips</b> | <a href="faq_frameserving.htm" title="FAQ frameserving">Loading
Scripts</a> | <a href="faq_common_errors.htm" title="FAQ common errors">Common
Error Messages</a> | <a href="faq_different_types_content.htm" title="FAQ different types content">Processing
Different Content</a> | <a href="faq_yv12.htm" title="FAQ YV12">Dealing
with YV12</a> | <a href="faq_using_virtualdub_plugins.htm" title="FAQ using virtualdub plugins">Processing
with Virtualdub Plugins</a> |
</p>
<p>
<kbd>$Date: 2011/12/04 15:27:59 $</kbd>
</p>
</body>
</html>
