<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<!--
$Id: releasenotes.htm,v 1.20 2008/12/22 01:26:05 ianb1957 Exp $ 
-->
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <title>Release Notes v2.58</title>
   <link rel="stylesheet" type="text/css" href="../avisynth.css">
</head>
<body>
<h2>
AviSynth 2.58</h2>
<h3>Summary of changelist (with respect to v2.57)</h3>
<ul>
  <li> Added Czech doc translation.</li>
  <li> Added Polish doc translation by Slim, Krismen & Co.</li>
  <li> Added Japanese doc translation by niiyan.</li>
  <li> Added Installer standalone option.</li>
  <li> Added Blankclip audio channels= and sample_type= arguments.</li>
  <li> ConvertAudio(cii) available to plugins via env->Invoke().</li>
  <li> Added font aspect, rotation and alpha to text routines.</li>
  <li> Added /* xxx */ block comments.</li>
  <li> Added [* [* xxx *] *] nestable block comments.</li>
  <li> SetMemoryMax(0) now just returns Memory Max value.</li>
  <li> Added planar YV12 color format to Compare().</li>
  <li> ColorKeyMask: Allow independant tolerance levels for each channel.</li>
  <li> Added Tweak Hue/Saturation range limiting.</li>
  <li> Added AudioLevels and Color2 modes to Histogram.</li>
  <li> Added WAVE_FORMAT_EXTENSIBLE audio output.</li>
  <li> Added ShowTime() script verb, like ShowSMPTE() but with milliseconds.</li>
  <li> Added BlackmanResize() and Spline64Resize().</li>
  <li> Modified DeleteFrame()/DuplicateFrame() to process multiple arguments.</li>
  <li> Added Min()/Max() script functions.</li>
</ul>
<ul>
  <li> Fixed ShowFiveVersions() YV12 chroma position in bottom half. Regression.</li>
  <li> Fixed Histogram() Classic mode restore graph brightness. Regression.</li>
  <li> Fixed Compare() graph pixel values exceeding YUV limits.</li>
  <li> Fixed AddBorders() args negative value clamping.</li>
  <li> Fixed AviSource() decoding to RGB24 logic regression.</li>
  <li> Added workaround for HuffYUV, Xvid reading past end of input buffer.</li>
  <li> Fixed current_frame value in nested runtime script invocations (Gavino).</li>
  <li> Fixed Dissolve overlap arg range checking (gzarkadas).</li>
  <li> Fixed OpenDMLSource() multithreading race problem (QuaddiMM).</li>
  <li> Fixed unsaved variableName string in ConditionalReader.</li>
  <li> Fixed Parser FunctionTable::TypeMatch() missing compulsory arguments. Dissolve bug (Various).</li>
  <li> Fixed DirectShowSource() convertfps=false logic regression.</li>
  <li> Fixed DirectShowSource() Flush task interlock race.</li>
  <li> Fixed DirectShowSource() QueryId() use CoTaskMemAlloc for returned value (Dean Pavlekovic).</li>
  <li> Fixed DirectShowSource() use GraphBuilder object for media control (Avery Lee).</li>
  <li> Fixed DirectShowSource() remove PulseEvent calls (Avery Lee).</li>
  <li> Fixed DirectShowSource() QueryAccept() modifying VideoInfo in running script (Haali).</li>
  <li> Fixed Blankclip clip= argument parsing.</li>
  <li> Fixed trashed GPF report, i.e reading 0x0 at 0x0 exception reporting.</li>
  <li> Fixed and refactored Overlay RGB<->YUV conversion routines.</li>
  <li> Fixed ImageReader incompletely inited videoInfo.</li>
  <li> Fixed Layer RGB32 100% alpha implementation, use level=257 (new default).</li>
  <li> Fixed avisynth_c.h avs_is_parity_known().</li>
  <li> Fixed C++ ConvertAudio::Saturate_int32() rounding.</li>
  <li> Fixed WriteFile(), Now remebers absolute path to file.</li>
  <li> Fixed Info() frame pitch, reports pitch of input frame.</li>
  <li> Fixed Invert() right edge memory overrun/corruption.</li>
  <li> Fixed Histogram() Classic mode pixel values exceeding YUV limits.</li>
  <li> Fixed Histogram() chroma plane initialization to 128.</li>
  <li> Fixed Conditional reader/writer illegally saving IScriptEnvironment pointer.</li>
  <li> Fixed YV12 Blur()/Sharpen() right edge pixel corruption with non-writable input frames.</li>
  <li> Fixed MMX Blur()/Sharpen() code to full 8 bit precision.</li>
  <li> Fixed IsAudioFloat()/IsAudioInt() script functions.</li>
  <li> Fixed Cache memory oversubscription of SetMemoryMax() limit.</li>
</ul>
<ul>
  <li> DirectShowSource() convertfps=true add 0.5ms rounding to expected sample time. Improves performance with millisecond based DS spliters.</li>
  <li> DirectShowSource() FPS detection as last attempt try getting the duration of 1st frame.</li>
  <li> DirectShowSource() convertfps=true rely only on sample start time values.</li>
  <li> Cache: Trap returned NULL PVideoFrames, i.e. Don't crash, Winge about it!.</li>
  <li> Refactor horizontal planar resizer, no width restrictions or 2 byte overwrite.</li>
  <li> Provide a simple and fast text writing primatives, see info.h</li>
  <li> Make audio cache actually functional.
  <li> Tweak speed improvements.
  <li> Subtract speed improvements.
  <li> Tuneup Overlay() ISSE Convert444ChromaToYV12 and also provide MMX version.</li>
  <li> PokeCache interface implemented.</li>
  <li> Cache and Memory management enhancements.</li>
</ul>
<ul>
  <li> Initial Memory Max value clamped to 512MB.</li>
  <li> Default Memory Max value restored to quarter of Free memory. Minimum 16Mb. As per 2.5.7.</li>
  <li> Test VFB data buffer for NULL malloc's, if so then Throw!</li>
  <li> Installer Start menu shortcut names translated.</li>
  <li> Test for UTF-8 and Unicode BOM prefixes and issue a useful warning.</li>
  <li> Removed useless current_sample from runtime script environment.</li>
  <li> Added critical section to CAVIFileSynth class.</li>
  <li> Enable Installer multi language support.</li>
  <li> FunctionTable::Lookup() now considers named arguments in making its selection.</li>
  <li> ImageWriter supports negative values as -count for End argument.</li>
  <li> ChangeFPS() use floor instead of round in source frame number calculation.</li>
  <li> Update usage of correct (updated) Rec.709 coefficients.</li>
  <li> Add TCPDeliver.map and DirectShowSource.map to releases.</li>
  <li> Convert to 2.6 Dynamic Assembled rgb to yuy2 code.</li>
  <li> Avisynth_c.h boolean functions return 1 for true instead of arbitrary non-zero.</li>
  <li> Internal RGB2YUV() now copies Alpha top byte through.</li>
  <li> CoUninitialize() done immediately for S_FALSE CoInitialize() returns.</li>
  <li> Pfc, Softwire and SoundTouch updated and added as dependency projects.</li>
  <li> UPX updated to version 2.03 (2006-11-07).</li>
  <li> AVISource/WavSource map WAVEFORMATEXTENSIBLE back to equivalent WAVEFORMATEX.</li>
  <li> DirectShowSource() now recognises incorrect WAVE_FORMAT_EXTENSIBLE audio and accepts it.</li>
  <li> DirectShowSource() now attempts to use partial graph from failing RenderFile call.</li>
  <li> DirectShowSource() now detects and handles non 32 bit aligned picture lines from dud codecs.</li>
  <li> Crop(align=true) tests actual alignment in each GetFrame call.</li>
  <li> Relax YV12 resizer width restriction, now mod 2 was mod 4.</li>
  <li> .AVSI failures during env->CreateScriptEnvironment() are now available to the GetError() interface.</li>
  <li> SetCacheHints(CACHE_RANGE, n) will now surrender frames to satisfy SetMemoryMax().</li>
  <li> CoInitialize()/CoUninitialize() now done as part of ScriptEnvironment creation/deletion.</li>
  <li> Much code from 2.6 base included. Typically IsYV12() changed to IsPlanar().</li>
</ul>
<p>A complete list can be found <a href="changelist.htm">here</a>
 and <a href="http://avisynth.org/mediawiki/Changelist">there</a>.</p>
<h3>Known problems and issues</h3>
<ul>
  <li>Rightclick on scripts to open them in VDubMod: When the script is messed
      up in the script editor, the correct error message does not appear.</li>

  <li>Possible other bugs which are reported
  <a href="http://sourceforge.net/tracker/?atid=482673&group_id=57023&func=browse">sourceforge</a>.</li>
</ul>
<h3>Future plans</h3>
<h4>AviSynth v2.60:</h4>
<p>This version will be the next major version. Plugins for v2.5 will work in v2.6.
  Most of the new code will be dormant inside 2.58 and with a minimal surgical change
  a parallel 2.60 release will be made. This should allow easy A-B testing for coding
  problems versus 2.6 interface problems. Design goals and proposals can be found
<a href="http://forum.doom9.org/showthread.php?t=98585">here</a>.
Proposals include the following:</p>
<ul>
  <li>New Y8 (greyscale), YV411(4:1:1 planar), YV16 (4:2:2 planar), YV24 (4:4:4 planar) formats.</li>
  <li>All planes are created 16 byte address aligned and have mod 16 pitch.</li>
  <li>Thread-safe avisynth.h.</li>
</ul>
<h4>AviSynth v2.61:</h4>
<p>This version will use the free Microsoft compiler. It will be feature identical to 2.60
i.e. Source new syntax changes only!</p>
<h4>AviSynth v2.6n:</h4>
<p>A bit further down the track as time and volunteers permit.</p>
<ul>
  <li>Add MaskTools to the core.</li>
  <li>Official Win64 support.</li>
  <li>ImageMagick support to import and export pictures (besides DevIL).</li>
</ul>
<h4>AviSynth v3:</h4>
<p>AviSynth v3.0 is a powerful frameserver for Windows and Linux, and it is a
complete rewrite of AviSynth v2.5, written from scratch by Bidoche (David
Pierre), Kurosu, Caro and others.  v3.0 is not relying on vfw anymore, although
it can be used when possible. It is made in such a way, that new APIs can be
added to the core, like ffmpeg and gstreamer.  Also here many new colorformats
will be added: YV24, RGB45 and YV45 which are 15 bits depth versions of RGB24
and YV24.  Direct streaming will be supported, and many other new things. The
progress can be found <a href="http://www.avisynth.org/AviSynth30">here</a>.
The discussion takes place at irc.freenode.org#avisynth and
<a href="http://forum.doom9.org/showthread.php?p=721468">here</a>.</p>
<p><kbd>$Date: 2008/12/22 01:26:05 $</kbd>
</body>
</html>
