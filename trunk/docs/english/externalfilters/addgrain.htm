<html>
<head>
<title>AddGrain</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: addgrain.htm,v 1.3 2006/09/17 20:03:08 fizick Exp $ 
-->
</head>
<body>
<h1>AddGrain/AddGrainC</h1>
<h2>Abstract</h2>
<b>author:</b> Tom Barry, Foxyshadis
<br><b>version:</b>  1.4
<br><b>download: </b><a href="http://foxyshadis.slightlydark.com/random/AddGrainC.zip">http://foxyshadis.slightlydark.com/random/AddGrainC.zip</a><br>
<b>category:</b> Misc Plugins<br>
<b>requirements:</b> &nbsp;YV12, YUY2, RGB Colorspace, SSE CPU
<hr>
<h2>Description</h2>
<p>AddGrain generates film like grain or other effects (like rain) by adding
random noise to a video clip. This noise may optionally be horizontally or
vertically correlated to cause streaking.</p>
<h3>Usage</h3>
<p>1) Place the AddGrain.dll in a directory somewhere. If that is the C:\Program
Files\AviSynth 2.5\plugins folder folder (recommended) then you can omit the
LoadPlugin command in your script. In your Avisynth file use commands similar to
</p>
<pre>LoadPlugin(&quot;F:\AddGrain\AddGrainC.dll&quot;)
AviSource(&quot;D:\wherever\myfile.avi&quot;)
AddGrain(20, 0, 0)</pre>
<p>Of course replace the file and directory names with your own. </p>
<h3><b>P</b><b>arameters</b></h3>
<p><code>AddGrain</code> (<var>float "var", float "hcorr", float "vcorr", float "uvar", int "seed"</var>) </p>
<p><code>AddGrainC</code> (<var>float "var", float "uvar", float "hcorr", float "vcorr", int "seed"</var>) </p>
<p>where: </p>
<p><var>var(1.0), uvar(0)</var> = the standard deviation (strength) of the luma and chroma noise generated, 0 is disabled.<br>
uvar does nothing in RGB mode.
 </p>
<p><var>hcorr(0), vcorr(0)</var> = the horizontal and vertical correlation, which cause 
steaking effect. (0.0 to 1.0) </p>
<p><var>seed (-1)</var> 
	Specifies a repeatable grain sequence. Set to at least 0 to use.
</p>
<p><var>constant (false)</var> 
	Specifies a constant grain pattern on every frame.
</p>
<p>The correlation factors are actually just implemented as exponential
smoothing which give a weird side affect that I did not attempt to adjust. But
this means that as you increase either corr factor you will have to also
increase the stddev (grain amount) in order to get the same visible amount of
grain, since it is being smooth out a bit.</p>
<p>Increase both corr factors can somewhat give clumps, or larger grain size. </p>
<p>And there is an interesting effect with, say, AddGrain(800,0,.9) or any huge
amount of strongly vertical grain. It can make any scene look like it is
raining.</p>
<h3>Version History</h3>
<code>
1.0	2003/06/18	Tom Barry	Initial Release<br>
1.1	2006/06/01	Foxyshadis	Chroma grain + constant seed<br>
1.2	2006/06/06	Foxyshadis	Supports YUY2, RGB. Fix cache mess.<br>
1.3	2006/06/10	Foxyshadis	Crashfix, noisegen optimization<br>
1.4	2006/08/11	Foxyshadis	Constant replaces seed, seed repeatable<br>
</code>
<p><kbd>$Date: 2006/09/17 20:03:08 $</kbd></p>
</html>
