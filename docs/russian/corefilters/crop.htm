<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="ru">
<head>
<meta http-equiv="Content-Language" content="ru">
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <title>Crop / CropBottom Avisynth Filter</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: crop.htm,v 1.6 2008/09/08 16:43:48 fizick Exp $
-->
</head>
<body >
<h2>
<a NAME="Crop"></a>Crop
/ CropBottom
</h2>
<p><code>Crop </code>(<var>clip, int left, int top, int width, int height,
bool &quot;align</var>&quot;)<br>
  <code>Crop </code>(<var>clip, int left, int top, int -right, int -bottom,
bool &quot;align&quot;</var>)<br>
  <code>CropBottom </code>(<var>clip, int count, bool align</var>)
<p><code>Crop</code> обрезает излишек пикселей каждого кадра.

<p>Если исходное видео имеет разрешение 720х480 и хочется уменьшить его до 352х240 для VideoCD,
 то правильный путь сделать это:

<pre># Преобразует CCIR601 в VCD, сохраняя правильное соотношение сторон
ReduceBy2
Crop(4,0,352,240)</pre>
См <a href="convert.htm">фильтры преобразования цветового пространства</a>
для информации о ограничениях при использовании разных цветовых форматов.

<p>(<var>left</var> - левая граница, <var>top</var> - верхняя граница, 
<var>width</var> - ширина, <var>height</var> - высота выходного кадра).</p> 

<p>Если введено отрицательное значение ширины <var>width</var> и высоты <var>height</var>, 
то они также трактуются как отступы справа и снизу (<var>right, bottom</var>). Например: 
<pre># Обрезает 16 пикселей вокруг всего изображения, независимо от его размера:
Crop(16,16,-16,-16)</pre>

<p>В <em>v2.53</em> добавлена опция <var>align</var> (по умолчанию false):<br>
 Обрезание YUY2/RGB32 изображения всегда кратно четырем байтам. 
 Однако, при считывании X байтов (целого 32битного числа), операция проводится быстрее,
  когда читаемое выровнено по некоторому кратному значению. 
  ММХ/SSE любят 8-байтовое выравнивание и SSE2 любит 16-байтовое выравнивание.
   Если данные НЕ выровнены, то каждая операция чтения/записи будет задерживаться на время не менее 4 тактов.
    Так что изображения всегда выровнены по кратному 16 адресу когда они создаются AviSynth. <br><br>

Если изображение было обрезано, оно иногда размещается в невыровненной памяти - &quot;align = true&quot; 
скопирует весь кадр из невыровненной памяти в выровненную область. 
Так что если пенальти (торможение) от следующего фильтра больше, чем пенальти от полного копирования изображения, 
использование &quot;align=true&quot; обеспечит более быструю работу.
 Особенно если следующие фильтры являются смягчающими (smoother).<br>

Альтернативный <code>CropBottom</code> синтакс полезен для обрезания мусора из низа клипа, захваченного с VHS ленты.
 Этот фильтр обрезает <var>count</var> строк с низа каждого кадра.
</p>

<p>Для сохранения структуры информации в разных цветовых пространствах должны использоваться следующие условия.
 Если они не выполняются, то сообщений об ошибках не будет, но могут появиться странные искажения.

<p>В RGB:
<br>ширина без ограничения
<br>высота без ограничения если видео прогрессивное
<br>высота кратна 2 если видео чересстрочное

<p>В YUY2:
<br>ширина кратна 2 
<br>высота без ограничений если видео прогрессивное
<br>высота кратна 2 если видео чересстрочное

<p>В YV12:
<br>ширина кратна 2
<br>высота кратна 2 если видео прогрессивное
<br>высота кратна 4 если видео чересстрочное

<p>ЗАМЕЧАНИЕ: Функции изменения размера опционально позволяют частичное обрезание пикселей входного кадра, 
это приводит к применению взвешивания к краевым пикселям, которые подвергаются изменению размера. 
Эти опции могут быть использованы, если ограничения кратности размера для обрезания являются неудобными. 
См <a href="resize.htm">Функции изменения размера</a>. 
В общем - "Для обрезания жестких артефактов вроде шума головок VHS или краев для режима letterbox
 всегда используйте Crop. Для извлечения части изображения и для поддержания правильного пересчета
  на краях, используйте режим обрезания в функциях изменения размера." 
  (<a href="http://forum.doom9.org/showthread.php?s=&amp;threadid=91630">Doom9
thread</a>)

<p><kbd>$English Date: 2005/03/24 22:07:08 $ <br>
Русский перевод 10.05.2005 Drakon Rider <a href="http://drakan.ru">drakan.ru</a>
</kbd></p>
<form><input TYPE="Button" VALUE="Назад"
onClick="history.go(-1)"></form>
</body>
</html>