<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="ru">
<head>
<meta http-equiv="Content-Language" content="ru">
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <title>TCPDeliver Avisynth Filter</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: tcpdeliver.htm,v 1.4 2008/09/08 16:43:48 fizick Exp $
-->

</head>
<body >
<h2>
<a NAME="TCPDeliver"></a>TCPServer / TCPSource
</h2>
<p><code>TCPServer</code> (<var>clip, int &quot;port&quot;</var>)<br>
<code>TCPSource</code> (<var>string hostname, int &quot;port&quot;, string
&quot;compression&quot;</var>)
<p>Фильтр позволяет передавать видео по сети. Можно подключать несколько клиентских приложений к одному серверу.
<h3>Синтаксис</h3>
<h4>Сервер:</h4>
<p><code>TCPServer</code> (<var>clip, int &quot;port&quot;</var>)<br>
<br>
Запускает сервер на заданном порту (по умолчанию порт 22050).<br>
Сервер остаётся запущен до тех пор, пока открыто приложение, открывшее этот скрипт (например, VirtualDub).<br>
<br>
Пример:<pre>Colorbars(512, 256)
TCPServer()</pre>
<p>запускает сервер.
<h4>Клиент:</h4>
<p><code>TCPSource</code> (<var>string hostname, int &quot;port&quot;, string &quot;compression&quot;</var>)<br>
<br>
Подключается к компьютеру с указанным адресов (например, IP-адресом) по указанному порту (по умолчанию 22050).

<p><var>Compression<span lang="en-us"> </span></var>позволяет задать алгоритм сжатия для передачи данных:
<table border="1" width="100%">
  <tr>
    <td width="10%" align="center"><b>Вид сжатия</b></td>
    <td width="50%" align="center"><b>	Описание</b></td>
  </tr>
  <tr>
    <td width="10%">None</td>
    <td width="50%">	Без сжатия</td>
  </tr>
  <tr>
    <td width="10%">LZO</td>
    <td width="50%">Использует алгоритм <a href="http://www.oberhumer.com/opensource/lzo/"><cite>LZO</cite></a> 
    словарного сжатия. Достаточно быстр, но хорошо работает только на видео типа мультфильмов с большими однородными 
    областями.</td>
  </tr>
  <tr>
    <td width="10%">Huffman</td>
    <td width="50%">Использует достаточно медленную реализацию алгоритма Хаффмана от 
    <a href="http://bcl.sourceforge.net/"><cite>Marcus Geelnard</cite></a>. Сжимает естественные изображения лучше LZO.</td>
  </tr>
  <tr>
    <td width="10%">GZip</td>
    <td width="50%">Использует алгоритм <a href="http://www.gzip.org/"><cite>Gzip</cite></a>. 
    Работает аналогично установке Huffman, но быстрее.</td>
  </tr>
</table>
<p>В нынешней версии по умолчанию используется алгоритм GZip. Чересстрочное видео сжимается хуже. Если скорость сети
критична, можно использовать <a href="separatefields.htm">SeparateFields</a> на серверной стороне.
<p>Пример:<pre>TCPSource(&quot;127.0.0.1&quot;)
Info()</pre>
<p>Подключается к локальному компьютеру, если на нём запущен сервер.</p>
<h3>Примеры</h3>
<p>Можно использовать для разделения цепочки фильтров по разным компьютерам:
<pre># Компьютер 1:
AVISource
Deinterlacer
TCPServer

# Компьютер 2:
TCPSource
Sharpener
TCPServer

# Компьютер 3:
TCPSource
# приложение-клиент -&gt; видео кодек -&gt; окончательный файл</pre>
<p>
 <h3>Замечания по применению</h3>	
<p>Если Вы добавили TCPServer, то Вы не можете больше добавлять фильтры в цепочку, или использовать выход от фильтра. 
Сервер выполняется в отдельной нити, но так как AviSynth не полностью безопасен по нитям (thread-safe), 
Вы не можете надежно выполнять несколько серверов. Следующее	
<b>не</b> должно быть использовано:</p>	
<pre>AviSource("avi.avi")	
TCPServer(1001)	
TCPServer(1002) # Это НЕ хорошая идея</pre>	
<p>Так что основное правило - <b>никогда больше одного TCPServer на скрипт</b>.</p>	
<p>Использование команд после TCPServer также является плохой идеей:</p>	
<pre>AviSource("avi.avi")	
TCPServer(1001)	
AviSource("avi2.avi") # НЕ делайте так, это будет отменять сервер.</pre>	
<p>AviSynth детектирует, что выход TCPServer не используется, и убъет фильтр-Server.	
<b>TCPServer должен всегда быть последним фильтром.</b></p>

<h3>Изменения</h3>
<table border="1">
  <tbody>
    <tr>
      <td>появился в v2.55</td>
    </tr>
  </tbody>
</table>

<p><kbd>$English Date: 2006/01/02 14:51:17 $<br>
Русский перевод 18.05.2005 Eugene Vasiliev (eugvas<span>&#64;</span>mccme.ru)<br>
Обновление 13.01.2006 Fizick </kbd></p>
<form><input TYPE="Button" VALUE="Back" onClick="history.go(-1)"></form>
</body>
</html>