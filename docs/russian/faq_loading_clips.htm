<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="ru">
<head>
<!--
Automatically generated, don't change:
$Id: faq_loading_clips.htm,v 1.3 2008/07/18 06:27:18 fizick Exp $ 
-->
    <meta http-equiv="Content-Language" content="ru">
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
   <title> FAQ - Loading clips (video, audio and images) into AviSynth </title>
<style type=text/css></style>
   <link rel="stylesheet" type="text/css" href="../avisynth.css">
</head>
<body>

<h1>AviSynth FAQ - Загрузка клипов (видео, аудио и
изображений) в AviSynth</h1>

<h2>Содержание</h2>

<ol>
  <li><a href="#Which_media_formats_can_be_loaded_into_AviSynth.3F">Какие медиа форматы могут быть загружены в AviSynth?</a></li>
  <li><a href="#Which_possibilities_exist_to_load_my_clip_into_AviSynth.3F">Какие существуют возможности загрузить мой клип в
AviSynth?</a></li>
  <li><a href="#What_are_the_advantages_and_disadvantages_of_using_DirectShowSource_to_load_your_media_files.3F">В чем преимущества
и недостатки использования DirectShowSource для загрузки медиа файлов?</a></li>
  <li><a href="#Has_AviSynth_a_direct_stream_copy_mode_like_VirtualDub.3F">Имеет ли AviSynth режим прямого копирования потока подобно
VirtualDub?</a></li>
  <li><a href="#How_do_I_load_AVI_files_into_AviSynth.3F">Как мне загрузить AVI файлы в AviSynth?</a></li>
  <li><a href="#Can_I_load_video_with_audio_from_AVI_into_AviSynth.3F">Могу я загрузить видео с аудио из AVI в
AviSynth?</a></li>
  <li><a href="#How_do_I_load_MPEG-1.2FMPEG-2.2FDVD_VOB.2FTS.2FPVA_into_AviSynth.3F">Как мне загрузить MPEG-1/MPEG-2/DVD VOB/TS/PVA в
AviSynth?</a></li>
  <li><a href="#How_do_I_load_QuickTime_files_into_AviSynth.3F">Как мне загрузить файлы QuickTime в AviSynth?</a></li>
  <li><a href="#How_do_I_load_QuickTime_files_into_AviSynth.3F">Как мне загрузить бесформатные (raw) видео файлы в
AviSynth?</a></li>
  <li><a href="#How_do_I_load_RealMedia_files_into_AviSynth.3F">Как мне загрузить файлы RealMedia в AviSynth?</a></li>
  <li><a href="#How_do_I_load_Windows_Media_Video_files_into_AviSynth.3F">Как мне загрузить Windows Media Video файлы в AviSynth?</a></li>
  <li><a href="#How_do_I_load_MP4.2FMKV.2FM2TS_into_AviSynth.3F">Как мне загрузить MP4/MKV/M2TS/EVO в AviSynth?</a></li>
  <li><a href="#How_do_I_load_RealMedia_files_into_AviSynth.3F">Как мне загрузить аудио файлы WAVE PCM в AviSynth?</a></li>
  <li><a href="#How_do_I_load_MP1.2FMP2.2FMP3.2FMPA.2FAC3.2FDTS.2FLPCM_into_AviSynth.3F">Как мне загрузить аудио MP1/MP2/MP3/MPA/AC3/DTS/LPCM в
AviSynth?</a></li>
  <li><a href="#How_do_I_load_aac.2Fflac.2Fogg_files_into_AviSynth.3F">Как мне загрузить файлы aac/flac/ogg в AviSynth?</a></li>
  <li><a href="#How_do_I_load_pictures_into_AviSynth.3F">Как мне загрузить изображения в AviSynth?</a></li>
</ol>

<a name="Which_media_formats_can_be_loaded_into_AviSynth.3F"></a>
<h3>Какие медиа форматы могут быть загружены в AviSynth?</h3>
<p>Большинство видео и аудио форматов может быть загружено в AviSynth, но существуют и некоторые 
исключения такие как flv4 (VP6) и dvr-ms. Если невозможно загрузить
клип в AviSynth, вы должны сконвертировать его в некоторый другой формат, который
может быть загружен. Помните выбрать такой формат, для которого вы будете иметь минимальные потери
в качестве в результатах преобразования.</p>

<a name="Which_possibilities_exist_to_load_my_clip_into_AviSynth.3F"></a>
<h3>Какие существуют возможности загрузить мой клип в
AviSynth?</h3>
<p>Вообще есть два способа загрузить ваше видео в AviSynth:</p>
<ol>
  <li>используя внутренний фильтр AviSynth или плагин, который предназначен для открытия некоторого специфичного формата.</li>
  <li>используя <a href="corefilters/directshowsource.htm">DirectShowSource</a>
    (ныне плагин).</li>
</ol>
<p>Удостоверьтесь, что ваш клип содержит максимум один видео и (или) один аудио поток
(таким образом удалите субтитры и удалите другие видео/аудио потоки). 
Если вы хотите загрузить клип, который содержит видео и аудио, 
у вас есть две возможности:
<ul>
  <li>Выделите (demux) аудио поток и загрузите потоки отдельно в AviSynth.</li>
  <li>Попробуйте загрузить клип в AviSynth целиком. Это может сработать или
может не сработать. Для AVI, удостоверьтесь, что вы имеете установленный
хороший AVI расщепитель
    [<a href="http://sourceforge.net/project/showfiles.php?group_id=82303">Gabest
    AVI splitter</a>]. (Да, Windows поставляется с собственным AVI расщепителем,
который будет работать в большинстве случаев.)</li>
</ul>
<p>При загрузке клипа в AviSynth советуем следовать следующим правилам:</p>
<ul>
  <li>Если возможно загрузить ваш клип в AviSynth, используя либо AviSource
 либо специальный плагин, то делайте так, так как это более надежно чем
 две альтернативы, которые приведены ниже.</li>
  <li>Если указанное выше не сработало, загрузите клип используя DirectShowSource плагин.</li>
  <li>Если указанное выше не сработало, преобразуйте ваш клип в другой формат
 (в такой, какой поддерживается AviSynth).</li>
</ul>

<a name="What_are_the_advantages_and_disadvantages_of_using_DirectShowSource_to_load_your_media_files.3F"></a>
<h3>В чем преимущества
и недостатки использования DirectShowSource для загрузки медиа файлов?</h3>
<p><i>преимущества DirectShowSource:</i></p>
<ul>
  <li>Через DirectShowSource поддерживаются многие видео и аудио форматы (посмотрите
    например ffdshow).</li>
</ul>
<p><i>недостатки DirectShowSource:</i></p>
<ul>
  <li>Он менее надежный, чем AviSource и плагины ввода специфических видео и аудио.</li>
  <li>Проблемы поиска (прокрутки).</li>
  <li>Может быть проблемой получить требуемый DirectShow фильтр выполняющим 
    декодирование. Во многих случаях вы имеете несколько декодеров, которые могут
    декодировать тот же специфический формат. Фильтр, который будет использован, это тот,
    что имеет наивысший приоритет (merit). Может оказаться проблемным
    заставить выполнять декодирование конкретным декодером. Документ
    &quot;<a href="advancedtopics/importing_media.htm">Импортирование медиа
    в AviSynth</a>&quot; содержит больше информации на эту тему.</li>
</ul>

<a name="Has_AviSynth_a_direct_stream_copy_mode_like_VirtualDub.3F"></a>
<h3>Имеет ли AviSynth режим прямого копирования потока подобно
VirtualDub?</h3>
<p>Нет, видео и аудио распаковываются при их открытии в AviSynth.</p>
<p>Однако существует модификация AviSynth v2.55, которая поддерживает 'direct stream copy'
для видео и аудио. Эта модификация называется DSynth и может быть
загружена <a href="http://esby.free.fr/">здесь</a>.
Возможно, когда-нибудь она будет обновлена и вольется в официальный релиз AviSynth.</p>

<a name="How_do_I_load_AVI_files_into_AviSynth.3F"></a>
<h3>Как мне загрузить AVI файлы в AviSynth?</h3>
<p>Используйте <a href="corefilters/avisource.htm">AviSource</a>
для загрузки файлов AVI в AviSynth. Пример:</p>
<pre>AviSource(&quot;d:\filename.avi&quot;)</pre>
<p>или без аудио:</p>
<pre>AviSource(&quot;d:\filename.avi&quot;, false)</pre>
<p>Если AviSynth ругается о неспособности загрузить ваш avi (couldn't
decompress ...), вам необходимо установить соответствующий кодек. <a href="http://www.headbands.com/gspot/">GSpot</a>,
в частности, подскажет вам, какой кодек вам необходимо установить для возможности 
открытия вашего avi.</p>
<p>Явное указание декодера, который будет использован для загрузки клипа в AviSynth:</p>
<pre># загрузить avi используя кодек XviD:
AviSource(&quot;d:\filename.avi&quot;, fourCC=&quot;XVID&quot;) # открывает avi (например DivX3) используя кодек XviD</pre>
<pre># загружаем ваш dv-avi используя Canopus DV кодек:
AviSource(&quot;d:\filename.avi&quot;, fourCC=&quot;CDVC&quot;)</pre>

<a name="Can_I_load_video_with_audio_from_AVI_into_AviSynth.3F"></a>
<h3>Могу я загрузить видео с аудио из AVI в
AviSynth?</h3>
<p>Всегда возможно выделить (demux) ваше аудио из AVI файла и загрузить его
отдельно в AviSynth, используя декодер аудио, но в некоторых случаях (например:
AVI с MP2/MP3/AC3/DTS аудио) возможно загрузить его непосредственно в AviSynth.</p>
<p>Для загрузки AVI с аудио вам необходимо (1) VfW (Video for Windows) кодек,
чтобы открыть (то есть декодировать) ваше видео в AviSynth и ACM (Audio Compression
Manager) кодек, чтобы открыть аудио в AviSynth. Для многих видео и аудио форматов
такие кодеки доступны, ко определенно не для всех из них.</p>
<p>В документе &quot;<a href="advancedtopics/importing_media.htm#load_clip_vidaud">Импортирование
медиа в AviSynth</a>&quot; вы можете найти эти кодеки.</p>

<a name="How_do_I_load_MPEG-1.2FMPEG-2.2FDVD_VOB.2FTS.2FPVA_into_AviSynth.3F"></a>
<h3>Как мне загрузить MPEG-1/MPEG-2/DVD VOB/TS/PVA в
AviSynth?</h3>
<p>DGDecode является внешним плагином
и поддерживает MPEG-1, MPEG-2 / VOB, TS и PVA потоки. 
Откройте их сначала в DGIndex  
и создайте d2v файл, который может быть открыт в AviSynth (заметьте,
что это будет открывать только видео в AviSynth):</p>
<p>Немного примеров:</p>
<pre># DGDecode:
LoadPlugin(&quot;d:\dgecode.dll&quot;)
mpeg2source(&quot;d:\filename.d2v&quot;) </pre>

<p>Если ваш транспортный поток (*.TS) содержит MPEG-4 AVC
видео, вам необходимо выделить (demux) неформатированный (raw) видео поток из него, 
и использовать <a href="http://forum.doom9.org/showthread.php?p=959013">DGAVCDec</a>
для его открытия в AviSynth. Смотри <a href="#How_do_I_load_MP4.2FMKV.2FM2TS_into_AviSynth.3F">здесь</a>
о его использовании.</p>

<a name="How_do_I_load_QuickTime_files_into_AviSynth.3F"></a>
<h3>Как мне загрузить файлы QuickTime в AviSynth?</h3>
<p>Есть два способа загрузить ваши quicktime mov видео в AviSynth 
(и еще RawSource для несжатых mov): QTSource и QTReader. 
Первый появился недавно и способен открыть многие форматы quicktime 
(с возможностью открыть их как YUY2), но вам необходимо установить 
проигрыватель QuickTime player для возможности использовать данный плагин. 
Второй (QTReader) - очень старый, не требуется установка проигрывателя
для открытия форматов quicktime в AviSynth.</p>
<p><i>QTSource:</i></p>
<p>Вам необходим Quicktime 6 для получения только видео
или Quicktime 7 для получения аудио и видео.</p>
<pre># YUY2 (по умолчанию):
QTInput(&quot;FileName.mov&quot;, color=2)

# с аудио (с QuickTime 7 возможно во многих случаях)
QTInput(&quot;FileName.mov&quot;, color=2, audio=true)

# бесформатное (raw) (с примером YUYV):
QTInput(&quot;FileName.mov&quot;, color=2, mode=1, raw=&quot;yuyv&quot;)

# dither = 1; преобразует бесформатное (raw) 10 бит в 8 бит видео (v210 = 10 бит uyvy):
QTInput(&quot;FileName.mov&quot;, color=2, dither=1, raw=&quot;v210&quot;)</pre>
<p><i>QTReader:</i></p>
<pre># Если это не работает, или вы не имеете QuickTime, скачайте плагин QTReader
(может быть найден в разделе загрузок Doom9):
LoadVFAPIPlugin(&quot;C:\QTReader\QTReader.vfp&quot;, &quot;QTReader&quot;)
QTReader(&quot;C:\quicktime.mov&quot;) </pre>

<a name="How_do_I_load_raw_source_video_files_into_AviSynth.3F"></a>
<h3>Как мне загрузить бесформатные (сырые, raw) видео файлы в
AviSynth?</h3>
<p>Внешний плагин RawSource поддерживает все виды бесформатных (raw) 
 видео файлов с заголовком YUV4MPEG2 или без заголовка (видео файлы, 
которые содержат YUV2, YV16, YV12, RGB или Y8 видео данные, записанные
кадр за кадром без сжатия).</p>
<p>Примеры:</p>
<pre># Следующее предполагает, что есть соответствующий YUV4MPEG2-заголовок внутри:
RawSource(&quot;d:\yuv4mpeg.yuv&quot;)

# Бесформатный файл с RGBA данными:
RawSource(&quot;d:\src6_625.raw&quot;,720,576,&quot;BGRA&quot;)

# Вы можете указать байтовую позицию видеокадров в файле прямо
# (что может быть найдено  с помощью yuvscan.exe).
# Это полезно, если это видео не сосем неформатированное, 
№ но например несжатые файлы MOV или файлы с некоторым специфичным заголовком:
RawSource(&quot;d:\yuv.mov&quot;, 720, 576, &quot;UYVY&quot;, index=&quot;0:192512 1:1021952 25:21120512 50:42048512 75:62976512&quot;)</pre>

<a name="How_do_I_load_RealMedia_files_into_AviSynth.3F"></a>
<h3>Как мне загрузить файлы RealMedia в AviSynth?</h3>
<p>RM/RMVB (RealMedia / RealMedia с переменным битрейтом; обычно содержит
Real Video/Audio): установите 
<a href="http://sourceforge.net/projects/guliverkli/">rmvb splitter</a>
 и Real кодеки путем устанвки
RealPlayer/<a href="http://www.free-codecs.com/download/Real_Alternative.htm">RealAlternative</a>. 
Создайте скрипт:</p>
<pre>DirectShowSource(&quot;d:\clip.rmvb&quot;, fps=25, convertfps=true) # подстройте fps при необходимости</pre>

<a name="How_do_I_load_Windows_Media_Video_files_into_AviSynth.3F"></a>
<h3>Как мне загрузить Windows Media Video файлы в AviSynth?</h3>
<p>WMV/ASF (Windows Media Video / Advanced Systems Format; обычно содержит
WMV/WMA): этот формат не полностью поддерживается ffdshow,
так что вы должны будете установить wmv кодеки.
Возьмите <a href="http://msdn.microsoft.com/windowsmedia/downloads/default.aspx">
 WMF SDK v9 для W2K или позже для XP/Vista</a> который содержит кодеки
 (и DMO упаковщики (wrappers) необходимые для использования DMO фильтров
в DirectShow). Вы можете также получить эти кодеки с Windows Media Player 9 Series или позже, 
Windows Media Format runtime (WMFDist.exe), Codec Installation Package (WM9Codecs.exe) 
с сайта Microsoft или другого места. 
(Заметьте, что собственный кодек Microsoft VC1 не поддерживается
в W2K так как вам необходим WMF SDK v11.) Создайте скрипт:</p>
<pre>DirectShowSource(&quot;d:\clip.wmv&quot;, fps=25, convertfps=true) # подстройте fps при необходимости</pre>

<a name="How_do_I_load_MP4.2FMKV.2FM2TS_into_AviSynth.3F"></a>
<h3>Как мне загрузить MP4/MKV/M2TS/EVO в AviSynth?</h3>
<p>Если медиа файл сожержит MPEG-4 ASP видео,
то существуют две возможности открытия его в AviSynth:</p>
<p>1) Используя плагин <a href="http://forum.doom9.org/showthread.php?t=127037">FFmpegSource</a>.
Все включенные dlls кроме ffmpegsource.dll должны быть скопированы в вашу системную
папку. Некоторые примеры:</p>
<pre># загрузка видео из MKV и возврат файла временных кодов:
FFmpegSource(&quot;D:\file.mkv&quot;, vtrack = -1, atrack = -2, timecodes=&quot;timecodes_file.txt&quot;)

# загрузка видео и аудио из MP4 и возврат файла временных кодов:
FFmpegSource(&quot;D:\file_aac.mp4&quot;, vtrack = -1, atrack = -1, timecodes=&quot;timecodes_file.txt&quot;)</pre>
<p>Важно сгенерировать файл временных кодов, для проверки
имеет ли видео постоянную частоту кадров. В этом случае вы не должны
использовать файла временных кодов и вы можете обрабатывать виде любым способом по вашему желанию.
Однако, многие не-AVI файлы содержат видео с переменной частотой кадров (AVI файлы 
всегда имеют постоянную), и в этом случая вам надо удостовериться в двух вещах:</p>
<ol>
  <li><i>Не меняйте частоту и число кадров 
    в AviSynth.</i> Если вы не выполните этого (и вы не изменили файл временных кодов
    вручную), то ваше видео и аудио будут несинхронны.</li>
  <li><i>Используйте временные коды снова, когд вы мультиплексируете 
    кодированное видео и аудио.</i> Если вы не выполните этого, то ваше видео и аудио будут несинхронны.</li>
</ol>
<p>Основная причина этого в том, что FFmpegSource открывает
видео как есть. Она не добавляет или удаляет кадры для превращения его в видео постоянной скорости
для вынуждения синхронности.</p>
<p>2) Получите <a href="http://ffdshow-tryout.sourceforge.net/">ffdshow</a>
и откройте MP4/MKV файл с DirectShowSource, вот пример</p>
<pre>DirectShowSource(&quot;D:\file.mkv&quot;, convertfps=true) # convertfps=true вынуждает синхронность если видео - VFR</pre>
<p>Если ваш медиа файл содержит MPEG-4 AVC видео, то
есть две возможности открытия его в AviSynth:</p>
<p>1) Используя плагин <a href="http://forum.doom9.org/showthread.php?t=127037">FFmpegSource</a>.
Смотри выше о б его использовании. В настоящий момент, поддерживаемыми контейнерами являются: AVI, MKV
and MP4.</p>
<p>2) Возьмите <a href="http://forum.doom9.org/showthread.php?p=959013">DGAVCDec</a>.
В настоящее время вам сначала необходимо выделить бесформатный (raw) поток (*.264) из
контейнера (используя MKVExtract, MPlayer, TSRemux или другую программу). 
Откройте бесформатный (raw) файл потока в DGAVCIndex, чтобы создать индексный файл
(скажем track1.dga). Откоройте индексный файл в AviSynth:</p>
<pre># raw video demuxed from M2TS (Blu-ray BDAV MPEG-2 transport streams)
LoadPlugin(&quot;C:\Program Files\AviSynth\plugins\DGAVCDecode.dll&quot;)
AVCSource(&quot;D:\track1.dga&quot;)</pre>

<a name="How_do_I_load_WAVE_PCM_files_into_AviSynth.3F"></a>
<h3>Как мне загрузить аудио файлы WAVE PCM в AviSynth?</h3>
<p>Используйте WavSource для открытия WAVE PCM файлов (предполагая, 
что они меньше 4 Гб):</p>
<pre>WavSource(&quot;D:\file.wav&quot;)</pre>

<p>Используя плагин RaWav дляоткрытия WAVE PCM файлов, которые
больше чем 4GB (<a href="http://filext.com/file-extension/W64">Sonic Foundry Video Editor Wave64 Files
or W64</a>):</p>

<pre>RaWavSource(&quot;D:\file.w64&quot;, SampleRate=96000, SampleBits=24, Channels=6)

# или если присутствует заголовок W64
RaWavSource(&quot;D:\file.w64&quot;, SampleRate=6) # предполагает присутствие заголовка W64 и читает необходимую информацию</pre>

<a name="How_do_I_load_MP1.2FMP2.2FMP3.2FMPA.2FAC3.2FDTS.2FLPCM_into_AviSynth.3F"></a>
<h3>Как мне загрузить аудио MP1/MP2/MP3/MPA/AC3/DTS/LPCM в
AviSynth?</h3>
<p>Используйте NicAudio для загрузки вашего MP1/MP2/MP3/MPA/AC3/DTS/LPCM в AviSynth:</p>
<p>Некоторые примеры:</p>
<pre>LoadPlugin(&quot;C:\Program Files\AviSynth25\plugins\NicAudio.dll&quot;)

# AC3 audio:
V = BlankClip(height=576, width=720, fps=25)
A = NicAC3Source(&quot;D:\audio.AC3&quot;)
# A = NicAC3Source(&quot;D:\audio.AC3&quot;, downmix=2) # downmix to stereo
AudioDub(V, A)</pre>
<pre># LPCM audio (48 kHz, 16 bit and stereo):
V = BlankClip(height=576, width=720, fps=25)
A = NicLPCMSource(&quot;D:\audio.lpcm&quot;, 48000, 16, 2)
AudioDub(V, A)</pre>

<a name="How_do_I_load_aac.2Fflac.2Fogg_files_into_AviSynth.3F"></a>
<h3>Как мне загрузить файлы aac/flac/ogg в AviSynth?</h3>
<p>Используйте ffdshow (установите AAC как libfaad или realaac), и используйте</p>
<pre>DirectShowSource(&quot;d:\audio.aac&quot;)</pre>
<p>Для WAVE_FORMAT_EXTENSIBLE, ogg, flac, wma, и других форматов, 
может быть использовано <a href="http://forum.doom9.org/showthread.php?t=108254">BassAudio
и соответствующие библиотеки и дополнения</a>. Заметьте, что
BassAudioSource может декодировать стерео aac/mp4, но не может декодировать многоканальный aac.</p>
<p>Некоторые примеры:</p>
<pre>bassAudioSource(&quot;C:\ab\Dido\001 Here With Me.m4a&quot;)</pre>
<pre>bassAudioSource(&quot;C:\ab\Dido\001 Here With Me.aac&quot;)</pre>

<a name="How_do_I_load_pictures_into_AviSynth.3F"></a>
<h3>Как мне загрузить изображения в AviSynth?</h3>
<p>1) Используйте <a href="corefilters/imagesource.htm" title="ImageReader">ImageReader</a>
или <a href="corefilters/imagesource.htm" title="ImageSource">ImageSource</a> чтобы
загрузить ваше изображение в AviSynth (может загузить наиболее популярные форматы, исключая GIF
и анимированные форматы). Смотри внутренюю документаци для дальнейшей информации.</p>
<p>2) Используйте плагин Immaavs для GIF, анимированных форматов и других типов
изображений.</p>
<pre># одиночное изобрвжение:
immareadpic(&quot;x:\path\pic.bmp&quot;)
 
# анимация:
immareadanim(&quot;x:\path\anim.gif&quot;)

# последовательность изображений
immareadseq(&quot;x:\path\seq%3.3d.png&quot;, start=5, stop=89, fps=25, textmode=2, posx=50, posy=50)</pre>
<p>|<a href="faq_sections.htm" title="AviSynth FAQ">
Содержание FAQ</a> | <a href="faq_general_info.htm">Общая информация</a> |
 <a href="faq_loading_clips.htm">Загрузка клипов</a> |
 <a href="faq_frameserving.htm">Открытие скриптов</a> |
 <a href="faq_common_errors.htm">Общие сообщения об ошибках</a> |
 <a href="faq_different_types_content.htm">Обработка различного контента</a> |
 <a href="faq_yv12.htm">Работа с YV12</a> |
 <a href="faq_using_virtualdub_plugins.htm">Обработка с плагинами от Virtualdub</a> |</p>

<kbd>$English Date: 2008/07/06 19:23:36 $<br>
Русский перевод 19.05.2005-06.07.2008 Fizick http://bag.hotmail.ru</kbd>
</body>
</html>