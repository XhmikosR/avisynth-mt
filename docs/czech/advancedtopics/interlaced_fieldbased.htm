<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-2">
   <META NAME="GENERATOR" CONTENT="Microsoft FrontPage 4.0">
   <TITLE>Interlaced and Field-based video</TITLE>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
</HEAD>
<BODY>
<h2>Prokládané (Interlaced) a na polích zalo¾ené (Field-based)video</h2>
<p>V souèasnosti (v2.5x a star¹í&nbsp;verze) AviSynth nemá 
znak prokládání, který mù¾e být pou¾it pro prokládané video. Existuje znak pro video zalo¾ené na polích&nbsp;(fieldbased flag), ale&nbsp;proti va¹emu oèekávání, se tento znak nevztahuje k prokládanému videu. Ve skuteènosti je ka¾dé video&nbsp;(progresivní nebo prokládané)&nbsp;zalo¾ené na snímcích (framebased), pokud nevyu¾ijete speciální filtry&nbsp;AviSynthu, aby jste to zmìnili. Jsou dva filtry, které pøevádí video zalo¾ené na snímcích na video zalozené na polích:
<A href="../corefilters/separatefields.htm"> SeparateFields</A> a <A href="../corefilters/parity.htm">AssumeFieldBased</A>.</p>
<ul>
  <li>SeparateFields / Weave
    <ul>
      <li>SeparateFields (oddìlit pole): Pokud je potøeba (napøíklad 
    odstraòovaèe ¹umu&nbsp;vy¾adují&nbsp;progresivní vstup), mù¾ete oddìlit&nbsp;prokládané streamy na pole pou¾itím&nbsp;SeparateFields. Výstupní klip&nbsp;bude mít 
    dvojnásobnou snímkovou frekvenci oproti&nbsp;originálnímu klipu. 
      <li>Weave (spojit pole): Po pou¾ití&nbsp;prostorových odstraòovaèù ¹umu (pro èasové odstraòovaèe je&nbsp;situace
        trochu&nbsp;[<a href="http://www.doom9.org/index.html?/capture/postprocessing_avisynth.html">slo¾itìj¹í</a>]), mù¾e být filtr&nbsp;Weave pou¾it pro&nbsp;opìtovné spojení polí do prokládaných snímkù.</li>
    </ul>
  <li>AssumeFieldBased / AssumeFrameBased
    <ul>
      <li>AssumeFieldBased (pøedpokládej zalo¾ené na polích): Pou¾ití tohoto filtru vytvoøí klip zalo¾ený 
    na polích. Mù¾e to být u¾iteèné pro vytváøení&nbsp;"umìlých" na polích 
    zalo¾ených&nbsp;klipù. 
      <li>AssumeFrameBased (pøedpokládej zalo¾ené na 
    snímcích):&nbsp;Pou¾ití tohoto filtru vytvoøí klip zalo¾ený na snímcích. Mù¾e to být u¾iteèné pro vytváøení "umìlých"
        na&nbsp;snímcích zalo¾ených&nbsp;klipù.</li>
    </ul>
  </li>
</ul>
<h3>Pøevody barev a&nbsp;prokládané / na polích zalo¾ené video</h3>
<p>Pøedpokládejme, ¾e máte&nbsp; <b> prokládané video</b>, chcete pracovat v 
re¾imu&nbsp;zalo¾eném na polích (napøíklad pro aplikování nìkterých&nbsp;filtrù) a také k tomu potøebujete&nbsp;nìkterý z pøevodù barev. Potøebujete&nbsp;udìlat pøevod na videu zalo¾eném na snímcích nebo na videu zalo¾eném na polích? Tedy, to&nbsp; závisí na tipu&nbsp;
<A href="../corefilters/convert.htm"> pøevodu barev</A>&nbsp;, který pou¾ijete:</p>
<p> *YUY2&lt;-&gt;RGB&nbsp;pøevody mohou být provádìny v 
obou re¾imech. (V¹imnìte si, ¾e v tomto pøípadì, nastavení&nbsp;interlaced=      
       true/false (prokládané=      
        
                 ano/ne)  nedìlá nic. Je prostì ignorováno).<br>
     *YV12&lt;-&gt;YUY2/RGB
     pøevody mohou být provádìny v klipu zalo¾eném na snímcích (s nastavením&nbsp;
<b> interlaced=true</b>                ). Provedením pøevodu v klipu zalo¾eném na polích povede k nesprávným výsledkùm. Pøesná pøíèina je&nbsp;mimo rámec tohoto pojednání, ale&nbsp;obecnì je to dùsledek toho jak je definován&nbsp;formát YV12. Hlavním problémem je, ¾e barva je sdílena dvìma pixely ze dvou rùzných øádkù snímku. Více informací naleznete
<A href="sampling.htm">zde</A>.</p>
<p> Zku¹enìj¹í u¾ivatelé by se mìli zamyslet nad 
následujícím. Obecnì, prokládané&nbsp;video má&nbsp;èásti, ve kterých není a nebo je málo pohybu. Proto,&nbsp;sotva uvidíte&nbsp;nìjaké prokládané efekty&nbsp;(také nazývané&nbsp;combing) v tìchto èástech. Mù¾eme na nì pohlí¾et jako na progresivní, a pøi provádìní&nbsp; pøevodu YV12&lt;-&gt;YUY2/RGB&nbsp;na progresivním videu by jste mìli&nbsp;pou¾ít nastavení
<b> interlaced=false</b>&nbsp;pro dosa¾ení lep¹ích 
výsledkù. Je mo¾né provádìt pøevody YV12&lt;-&gt;YUY2/RGB&nbsp;na klipech zalo¾ených na snímcích pøi pøepínání nastavení&nbsp;interlaced=true a interlaced=         false. Zde je ukázka jak to provést (budete potøebovat&nbsp;nainstalovaný plugin decomb&nbsp;pro mo¾nost pou¾ití&nbsp;funkce IsCombed)</p>
<pre>function ConvertHybridToYUY2(clip a, int &quot;threshold&quot;, bool &quot;debug&quot;)
{
debug = default(debug, false)
global threshold = default(threshold, 20)

b = ConvertToYUY2(a, interlaced=false)
c = ConvertToYUY2(a, interlaced=true)
ConditionalFilter(a, b, c, &quot;IsCombed(threshold)&quot;, &quot;equals&quot;, &quot;true&quot;, show=debug)
}

function ConvertHybridToRGB(clip a, int &quot;threshold&quot;, bool &quot;debug&quot;)
{
debug = default(debug, false)
global threshold = default(threshold, 20)

b = ConvertToYUY2(a, interlaced=false)
c = ConvertToYUY2(a, interlaced=true)
ConditionalFilter(a, b, c, &quot;IsCombed(threshold)&quot;, &quot;equals&quot;, &quot;true&quot;, show=debug)
}

AviSource(&quot;D:\captures\interlaced-clip.avi&quot;) # prokládané YV12
#ConvertHybridToYUY2(debug=true)
ConvertHybridToYUY2()</pre>
<p>Nicménì, stinnou stránkou tohoto je, ¾e&nbsp;to mù¾e vést k&nbsp;[<a href="http://forum.doom9.org/showthread.php?s=&amp;postid=476199#post476199">chroma
shimmering</a>]&nbsp;pøi pøechodech od 
"roztøepeného-combed" (prokládaného) snímku&nbsp;k progresivnímu. Tak¾e to není dokonalé øe¹ení.</p>
<h3>Pøevody barev,&nbsp;prokládaného / na polích zalo¾eného videa a&nbsp;znak prokládání&nbsp;z dvd2avi</h3>
<p>  Pro zku¹enìj¹í u¾ivatele. Dvd2avi&nbsp;informuje 
je-li&nbsp;snímek&nbsp;prokládaný nebo progresivní&nbsp;(s pou¾itím znaku prokládání). V principu, mù¾e být dvd2avi&nbsp;modifikován k ukládání&nbsp;údajù do&nbsp;textového&nbsp;souboru a AviSynth&nbsp;je mù¾e èíst&nbsp;a pou¾ít&nbsp;je po snímcích. Nicménì to není u¾iteèné.&nbsp;Problém je v tom, ¾e&nbsp;progresivní video&nbsp;je nìkdy zakódováno jako prokládané, a tak ho&nbsp;dvd2avi detekuje jako prokládané. V pøedchozí kapitole&nbsp;je vysvìtleno, ¾e v takovém pøípadì musíte pou¾ít&nbsp;interlaced=    false&nbsp;pøi pøevodu YV12&lt;-&gt;YUY2/RGB&nbsp;(proto¾e zde není pohyb) pro dosa¾ení pøesnìj¹ích výsledkù.
<b> Tak¾e, pro pøevod 
YV12&lt;-&gt;YUY2/RGB je dùle¾ité brát v úvahu skuteènou pøítomnost roztøepení obrazu (høebínkový obraz), a ne to ¾e se snímek zdá prokládaný podle znaku ve snímku.</b></p>
<h3>    Zmìna poøadí polí v klipu</h3>
<p>Existuje filtr&nbsp;který prohodí&nbsp;sudá/lichá&nbsp;pole <A href="../corefilters/swapfields.htm">SwapFields</A>
 , a plugin který obrací dominanci (poøadí) polí
[<a href="http://www.geocities.com/siwalters_uk/reversefielddominance.html">ReverseFieldDominance</a>
  ]. První mìní prostorové poøadí a druhý mìní èasové poøadí.</p>
<h4>Prohození polí:</h4>
<p>pøed pou¾itím&nbsp;SwapFields:</p>
<table border="1" width="25%" height="183">
  <tr>
    <td width="50%" height="20">øádek</td>
    <td width="50%" height="20"> 	snímek&nbsp;0</td>
  </tr>
  <tr>
    <td width="50%" height="20">0</td>
    <td width="50%" height="20"> 	t0</td>
  </tr>
  <tr>
    <td width="50%" height="20">1</td>
    <td width="50%" height="20">b1</td>
  </tr>
  <tr>
    <td width="50%" height="20">2</td>
    <td width="50%" height="20"> 	t2</td>
  </tr>
  <tr>
    <td width="50%" height="20">3</td>
    <td width="50%" height="20"> 	b3</td>
  </tr>
  <tr>
    <td width="50%" height="21">4</td>
    <td width="50%" height="21">t4</td>
  </tr>
  <tr>
    <td width="50%" height="20">5</td>
    <td width="50%" height="20"> 	b5</td>
  </tr>
</table>
<p>poøadí polí&nbsp;(horní pole první, spodní pole druhé):</p>
<table border="1" width="25%">
  <tr>
    <td width="33%">øádek</td>
    <td width="33%">pole&nbsp;0</td>
    <td width="33%">pole&nbsp;1</td>
  </tr>
  <tr>
    <td width="33%">0</td>
    <td width="33%"> 	t0</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">1</td>
    <td width="33%">&nbsp;</td>
    <td width="33%"> 	b1</td>
  </tr>
  <tr>
    <td width="33%">2</td>
    <td width="33%"> 	t2</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">3</td>
    <td width="33%">&nbsp;</td>
    <td width="33%"> 	b3</td>
  </tr>
  <tr>
    <td width="33%">4</td>
    <td width="33%">t4</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">5</td>
    <td width="33%">&nbsp;</td>
    <td width="33%"> 	b5</td>
  </tr>
</table>
<p>po pou¾ití SwapFields:</p>
<table border="1" width="25%" height="183">
  <tr>
    <td width="50%" height="20">øádek</td>
    <td width="50%" height="20"> 	snímek&nbsp;0</td>
  </tr>
  <tr>
    <td width="50%" height="20">0</td>
    <td width="50%" height="20">b1</td>
  </tr>
  <tr>
    <td width="50%" height="20">1</td>
    <td width="50%" height="20">t0</td>
  </tr>
  <tr>
    <td width="50%" height="20">2</td>
    <td width="50%" height="20">b3</td>
  </tr>
  <tr>
    <td width="50%" height="20">3</td>
    <td width="50%" height="20">t2</td>
  </tr>
  <tr>
    <td width="50%" height="21">4</td>
    <td width="50%" height="21">b5</td>
  </tr>
  <tr>
    <td width="50%" height="20">5</td>
    <td width="50%" height="20">t4</td>
  </tr>
</table>
<p> poøadí polí (horní pole první, spodní druhé):</p>
<table border="1" width="25%">
  <tr>
    <td width="33%">øádek</td>
    <td width="33%">pole&nbsp;0</td>
    <td width="33%">pole 1</td>
  </tr>
  <tr>
    <td width="33%">0</td>
    <td width="33%">&nbsp;</td>
    <td width="33%">b1</td>
  </tr>
  <tr>
    <td width="33%">1</td>
    <td width="33%">t0</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">2</td>
    <td width="33%">&nbsp;</td>
    <td width="33%">b3</td>
  </tr>
  <tr>
    <td width="33%">3</td>
    <td width="33%">t2</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">4</td>
    <td width="33%">&nbsp;</td>
    <td width="33%">b5</td>
  </tr>
  <tr>
    <td width="33%">5</td>
    <td width="33%">t4</td>
    <td width="33%">&nbsp;</td>
  </tr>
</table>
<p>      V¹imnìte si, ¾e sudá a lichá pole jsou prohozena, tak¾e mù¾ete horní
pole nazvat spodním a&nbsp;naopak.</p>
<h4>Obrácení dominance pole:</h4>
<p> pøed obrácením dominance pole:</p>
<table border="1" width="25%" height="183">
  <tr>
    <td width="50%" height="20">øádek</td>
    <td width="50%" height="20"> 	snímek&nbsp;0</td>
  </tr>
  <tr>
    <td width="50%" height="20">0</td>
    <td width="50%" height="20"> 	t0</td>
  </tr>
  <tr>
    <td width="50%" height="20">1</td>
    <td width="50%" height="20"> 	b1</td>
  </tr>
  <tr>
    <td width="50%" height="20">2</td>
    <td width="50%" height="20"> 	t2</td>
  </tr>
  <tr>
    <td width="50%" height="20">3</td>
    <td width="50%" height="20"> 	b3</td>
  </tr>
  <tr>
    <td width="50%" height="21">4</td>
    <td width="50%" height="21">t4</td>
  </tr>
  <tr>
    <td width="50%" height="20">5</td>
    <td width="50%" height="20"> 	b5</td>
  </tr>
</table>
<p> poøadí polí (horní pole první, spodní druhé):</p>
<table border="1" width="25%">
  <tr>
    <td width="33%">øádek</td>
    <td width="33%">pole&nbsp;0</td>
    <td width="33%">pole&nbsp;1</td>
  </tr>
  <tr>
    <td width="33%">0</td>
    <td width="33%"> 	t0</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">1</td>
    <td width="33%">&nbsp;</td>
    <td width="33%"> 	b1</td>
  </tr>
  <tr>
    <td width="33%">2</td>
    <td width="33%"> 	t2</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">3</td>
    <td width="33%">&nbsp;</td>
    <td width="33%"> 	b3</td>
  </tr>
  <tr>
    <td width="33%">4</td>
    <td width="33%">t4</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">5</td>
    <td width="33%">&nbsp;</td>
    <td width="33%"> 	b5</td>
  </tr>
</table>
<p>     po obrácení dominance pole (pøedpokládáme, ¾e øádky jsou posunuty nahoru a&nbsp;poslední øádek bude duplikován):</p>
<table border="1" width="25%" height="183">
  <tr>
    <td width="50%" height="20">øádek</td>
    <td width="50%" height="20"> 	snímek&nbsp;0</td>
  </tr>
  <tr>
    <td width="50%" height="20">0</td>
    <td width="50%" height="20">b1</td>
  </tr>
  <tr>
    <td width="50%" height="20">1</td>
    <td width="50%" height="20">t2</td>
  </tr>
  <tr>
    <td width="50%" height="20">2</td>
    <td width="50%" height="20">b3</td>
  </tr>
  <tr>
    <td width="50%" height="20">3</td>
    <td width="50%" height="20">t4</td>
  </tr>
  <tr>
    <td width="50%" height="21">4</td>
    <td width="50%" height="21">b5</td>
  </tr>
  <tr>
    <td width="50%" height="20">5</td>
    <td width="50%" height="20"> 	b5</td>
  </tr>
</table>
<p>poøadí polí&nbsp;(spodní pole první, horní druhé):</p>
<table border="1" width="25%">
  <tr>
    <td width="33%">øádek</td>
    <td width="33%">pole&nbsp;0</td>
    <td width="33%">pole&nbsp;1</td>
  </tr>
  <tr>
    <td width="33%">0</td>
    <td width="33%">b1</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">1</td>
    <td width="33%">&nbsp;</td>
    <td width="33%">t2</td>
  </tr>
  <tr>
    <td width="33%">2</td>
    <td width="33%">b3</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">3</td>
    <td width="33%">&nbsp;</td>
    <td width="33%">t4</td>
  </tr>
  <tr>
    <td width="33%">4</td>
    <td width="33%">b5</td>
    <td width="33%">&nbsp;</td>
  </tr>
  <tr>
    <td width="33%">5</td>
    <td width="33%">&nbsp;</td>
    <td width="33%"> 	b5</td>
  </tr>
</table>
<p>V¹imnìte si, ¾e horní a spodní pole jsou prohozena, ale&nbsp;sudé a liché øádky nejsou prohozeny.</p>
<h3>  Hodnota&nbsp;(=   order) polí v AviSynthu</h3>
<p>                 Je-li klip zalo¾ený na polích&nbsp;AviSynth dohlí¾í na&nbsp;hodnotu pozice&nbsp;(parity) ka¾dého pole (tj., zda je&nbsp;pole ve snímku horní nebo spodní). Je-li klip zalo¾en na snímcích dohlí¾í na dominanci&nbsp;polí v ka¾dém snímku (tj., které pole snímku bude první pøi oddìlení).</p>
<p>Nicménì, tato informace&nbsp;nemusí být správná, proto¾e&nbsp;informace o plích se obvykle u video&nbsp;souborù neuchovává,&nbsp;zdrojové filtry&nbsp;AviSynthu&nbsp; normálnì pøedpokládají spodní pole jako první&nbsp;(s výjimkou&nbsp;MPEG2Source pluginu, který to dìlá správnì!).</p>
<h3> O formátech&nbsp;DV / DVD ve vztahu k dominanci polí</h3>
<p>Dominance polí není stejná pro ka¾dý zdroj. DV (s prokládaným obsahem) má v¾dy spodní pole jako první, zatímco&nbsp;DVD (nebo CVD/SVCD) má jako první horní pole. Proto pøi pøevodu mezi tìmito dvìma&nbsp;formáty, musíte zmìnit dominanci polí. Mù¾ete to udìlat v&nbsp;AviSynthu (viz ní¾e), ale také v&nbsp;enkodéru samotném (pro bff materiálu&nbsp;jako DV video, musíte nastavit Upper field first). Nìkteré komentáøe k
[<a href="http://forum.doom9.org/showthread.php?s=&amp;postid=410692#post410692">jiným metodám</a>].</p>
<h3>Odkazy</h3>
<p>[<a href="http://forum.doom9.org/showthread.php?s=&amp;threadid=47393"> DV / DVD a&nbsp;dominance
polí</a>]<br>
 O&nbsp;[<a href="http://www.lurkertech.com/lg/dominance.html"> dominancipolí</a>].<br>
[<a href="http://forum.doom9.org/showthread.php?s=&amp;postid=268353">Vlákna na
Doom</a>] o prohozených polích a&nbsp;dominanci polí.<br>
[<a href="http://www.geocities.com/siwalters_uk/reversefielddominance.html">ReverseFieldDominance
plugin</a>]</p>
<p><kbd>$English Date: 2006/12/15 19:29:25 $</kbd></p>
<P><KBD>Èeský pøeklad:4.5.2008</KBD></P>
<FORM><INPUT TYPE="button" VALUE="Zpìt"
 onClick="history.go(-1)"></FORM>
</BODY>
</HTML>













