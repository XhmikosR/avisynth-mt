<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<title>Write Avisynth Filter</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body >
<h2>WriteFile / WriteFileIf / WriteFileStart / WriteFileEnd</h2>
<p><code>WriteFile </code>(<var>clip, string filename, <i>string expression1, 
  ... , string expression16, bool "append", bool "flush"</i></var>)<br>
  <code>WriteFileIf </code>(<var>clip, string filename, <i>string expression1, 
  ... , string expression16, bool "append", bool "flush"</i></var>)<br>
  <code>WriteFileStart </code>(<var>clip, string filename, <i>string expression1, 
  ... , string expression16, bool "append"</i></var>)<br>
  <code>WriteFileEnd </code>(<var>clip, string filename, <i>string expression1, 
  ... , string expression16, bool "append"</i></var>)</p>
<p><code>WriteFile</code>&nbsp; 
vyhodnocuje výraz &nbsp; <var>expressionN</var>      ,&nbsp;pøevádí výsledek na&nbsp;øetìzec 
  a vlo¾í ho do souboru.
</p>
<p>  "Run-time"&nbsp;promìnná <var>current_frame</var>&nbsp;se nastavuje tak, ¾e ji&nbsp;pou¾ijete&nbsp;ve výrazu&nbsp;"expression"<br>
  (pracuje to podobnì jako ScriptClip,&nbsp;pro více podrobností se podívejte do jeho dokumentace).<br>
  <var>current_frame</var> je nastaven na -1 kdy¾ je skript naèten&nbsp;a&nbsp;na -2 kdy¾ je skript zavøen.</p>
<p><code>WriteFile</code>&nbsp; 
vyhodnocuje výrazy ''expression'' a generuje výstup do ka¾dého snímku. <code>WriteFileIf</code> je podobný, ale generuje výstup jen kdy¾ je první výraz true.
V obou pøípadech se pøi otvírání nebo zavírání skriptu ¾ádné výstupy negenerují. V¹imnìte si, ¾e
proto¾e je výstup produkován jen pro ''rendrované'' snímky, nebude ¾ádný výstup na ¾ádných snímcích,
pokud výsledek filtru není pou¾it v odvození finálního výsledku
skriptu.</p>
<p>
  <code>WriteFileStart</code> a <code>WriteFileEnd</code> generují výstup pouze&nbsp;u otvíraného nebo zavíraného skriptu, neprovádí nic se ¾ádnými snímky.
  V obou pøípadech jsou výrazy ''expression'' vyhodnocovány pøesnì jednou, na místì filtru ve skriptu.</p>
<p>Kdy¾ je &nbsp; <var>append</var> = 
  true , pak bude výsledek pøipojen&nbsp;k existujícímu souboru.<br>
  Kdy¾
  je&nbsp; <var>flush</var> = true , pak 
je soubor zavøen a&nbsp;znovu otevøen po&nbsp;ka¾dé operaci, tak¾e mù¾ete&nbsp;ihned vidìt výsledky&nbsp;(mù¾e to být pomalej¹í).<br>
   Pro&nbsp; <code>WriteFileStart</code> a <code>WriteFileEnd</code>&nbsp; je <var>flush</var> &nbsp;v¾dy true .<br>
   Výchozí nastavení <var>append</var>&nbsp;je v¾dy <code>true</code>  ,&nbsp;kromì <code>WriteFileStart</code> (zde je false).</p>
<h4> Pou¾ití se nejlépe vysvìtlí na nìkolika jednoduchých pøíkladech:</h4>
      
<pre>filename = &quot;c:\myprojects\output.txt&quot; 
# vytvoøíme zku¹ební video 
Version() 

# výrazem je zde pouze promìnná, která je vyhodnocena a vlo¾ena do souboru 
# dostanete soubor s èíslem snímku v ka¾dém øádku 
WriteFile(filename, &quot;current_frame&quot;) 

# tento øádek je napsán pøi otevøení skriptu 
WriteFileStart(filename, &quot;&quot;&quot; &quot;Toto je zahlavi&quot; &quot;&quot;&quot;) 

# a tento, kdy¾ je skript zavírán 
WriteFileEnd(filename, &quot;&quot;&quot; &quot;Nyni byl skript ukoncen&quot; &quot;&quot;&quot;)</pre>
    
<p>Podívejte se jak mù¾ete pou¾ít&nbsp;trojité uvozovky pro napsání&nbsp;øetìzce uvnitø øetìzce!</p>
<p>    Pokud výraz nemù¾e být vyhodnocen,&nbsp;zobrazí se chybová zpráva.<br>
  V tomto pøípadì&nbsp;nastane, ¾e se u výrazu If ve funkci&nbsp; <code>WriteFileIf</code>
    &nbsp;pøedpokládá hodnota <code>true</code>.</p>
<pre># povede ke sdìlení &quot;I don't know what &quot;toto&quot; means&quot;
WriteFile(filename, &quot;toto je nesmysl&quot;)</pre>
    <hr>
<h4><b>Jsou i jednodu¹¹í zpùsoby jak zapsat èísla snímkù do souboru, ALE:</b></h4>
<p>... na tomto pøíkladu vidíte jak pou¾ít&nbsp; vyhodnocovací funkce ("runtime 
  functions")&nbsp;spolu s FrameEvaluate:</p>
      
<pre># vytvoøí zku¹ební video pro obdr¾ení rùzných snímkù 
Version.FadeIn(50).ConvertToYV12 

# toto natiskne èíslo snímku, dvojteèka &quot;:&quot; a prùmìrný jas (luma) tohoto snímku
colon = &quot;: &quot;
WriteFile(&quot;F:\text.log&quot;, &quot;current_frame&quot;, &quot;colon&quot;, &quot;AverageLuma&quot;)</pre>
    <p>Nebo mù¾ete natisknout aktuální èas:</p>  
<pre># vytvoøí zku¹ební video
Version.FadeIn(50).ConvertToYV12 

# toto natiskne èíslo snímku, aktuální èas a prùmìrný jas (luma)tohoto snímku 
# trojité uvozovky jsou nutné pro vlo¾ení uvozovek místo øetìzce
WriteFile(last, filename, &quot;current_frame&quot;, &quot;&quot;&quot; time(&quot; %H:%M:%S&quot;) &quot;&quot;&quot;, &quot;AverageLuma&quot;)</pre>
    
<hr>
<h4>Více pøíkladù:</h4>
<p>Ve&nbsp; <code>WriteFileIf</code>&nbsp;je&nbsp;PRVNÍ výraz&nbsp;pøedpokládán&nbsp;logický (true&nbsp;nebo false).<br>
  Pouze pokud je TRUE , tak budou&nbsp;dal¹í výrazy vyhodnocovány a&nbsp;øádky ti¹tìny.<br>
  (Pamatujte: &amp;&amp;&nbsp;je AND, ||&nbsp;je OR, == &nbsp;je EQUAL, != &nbsp;je NOT EQUAL)<br>
  
Zpùsob jakým mù¾ete zcela vynechat øádky ve výstupním souboru je:</p>
<pre># vytvoøí zku¹ební video pro obdr¾ení rùzných snímkù 
Version.FadeIn(50).ConvertToYV12 

# toto natiskne èíslo snímku, ale jen u snímkù kde AverageLuma je mezi 30 a 60
WriteFileIf(last, filename, &quot;(AverageLuma&gt;30) &amp;&amp; (AverageLuma&lt;60)&quot;, &quot;current_frame&quot;, &quot;&quot;&quot; &quot;:&quot; &quot;&quot;&quot;, &quot;AverageLuma&quot;)</pre>
    <p><kbd>$English Date: 2008/12/21 09:23:02 $</kbd></p>
<P><KBD>Èeský pøeklad:12.2.2009</KBD></P>
<FORM>
<INPUT TYPE="button" VALUE="Zpìt"
 onClick="history.go(-1)">
</FORM>
</body>
</html>

















