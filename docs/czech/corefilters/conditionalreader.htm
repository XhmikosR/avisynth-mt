<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <meta name="Author" content="Wilbert Dijkhof">
   <title>ConditionalReader Avisynth Filter</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body>
<h2>
<a NAME="ConditionalFilter"></a>ConditionalReader
</h2>
<p><code>ConditionalReader </code>(<var>clip, string filename, string
variablename, bool "show"</var>)
<p><code>ConditionalReader</code>     vám umo¾ní import informací
z textového souboru, s rùznými hodnotami pro ka¾dý snímek - nebo rozsah snímkù.
<h3>Parametry</h3>
<table border="1" width="61%">
  <tr>
    <td width="9%"><b>Parametr</b></td>
    <td width="76%"><b>Popis</b></td>
    <td width="15%"><b> 
      Výchozí hodnota</b></td>
  </tr>
  <tr>
    <td width="9%">clip</td>
    <td width="76%">     Vstupní&nbsp;klip. Nemìní se, dokud nezadáte
      show=true.</td>
    <td width="15%"> Není</td>
  </tr>
  <tr>
    <td width="9%">filename</td>
    <td width="76%">Soubor s hodnotami promìnných, které chcete nastavit.</td>
    <td width="15%"> Není</td>
  </tr>
  <tr>
    <td width="9%">variablename</td>
    <td width="76%">   Název promìnné, které chcete pøiøadit informace ze
      souboru.</td>
    <td width="15%"> Není</td>
  </tr>
  <tr>
    <td width="9%">show</td>
    <td width="76%">Je-li nastaveno&nbsp;true, tak hodnota odpovídající aktuálnímu snímku bude zobrazena&nbsp;na tomto
      snímku.</td>
    <td width="15%">false</td>
  </tr>
</table>
<h3>Formát souboru</h3>
<p>Je to&nbsp;prostý textový soubor.&nbsp;V¹echny separátory
jsou&nbsp;tvoøeny mezerami, a nové øádky&nbsp;oznaèují nová (dal¹í)&nbsp;nastavení. Registr nemá hodnoty!<br>
<br>
<b>TYPE (int|float|bool)</b>
<p>V ka¾dém souboru mù¾ete zadat pouze jeden typ dat. V danou chvíli&nbsp;je mo¾né mít&nbsp;&nbsp;
<i>float</i>, <i>int</i>&nbsp;nebo <i>bool</i> hodnoty. Zadáváte je pou¾itím&nbsp;pøíkazu
<b>TYPE</b>           
   .&nbsp;Musíte v¾dy&nbsp;zaèít zadáním&nbsp;typu dat,&nbsp;t.j. dokud&nbsp;&nbsp;není&nbsp;urèen typ dat, nic  se nièemu nepøiøazuje.
Jednou zadaný typ dat nelze v prùbìhu provádìní mìnit!
<p><b>DEFAULT &lt;value&gt;</b>
<p>Zadává výchozí nastavení hodnot v¹ech snímkù. Tento pøíkaz mù¾ete pou¾ít
hned po zadání typu dat, toto nastavení se pou¾ije na v¹echny snímky. Mù¾ete
toto nastavení také vynechat, ale pak se musíte pøesvìdèit, ¾e&nbsp;pro ka¾dý snímek máte pøímo definované nastavení,
Jinak bude chování filtru neodhadnutelné.
<p><b>OFFSET &lt;value></b><br>
Kdy¾ je zadáno, posune to v¹echna èísla snímkù o konstantní posunutí. Toto je provedeno pro v¹echna èísla snímkù, která jsou nastavena za tímto klíèovým slovem.
<p><b>&lt;framenumber&gt; &lt;value&gt;</b>
<p>Nastavuje hodnotu jen pro uvedený snímek&lt;framenumber&gt;.
<p><b>R &lt;startframe&gt; &lt;endframe&gt; &lt;value&gt;</b>
<p>Nastavuje hodnotu pro zadaný rozsah snímkù. Oba hranièní snímky
&lt;start-frame&gt;&nbsp;a &lt;end-frame&gt;&nbsp;jsou&nbsp;zahrnuty v daném rozsahu.&nbsp;
<p><b>I &lt;startframe&gt; &lt;endframe&gt; &lt;startvalue&gt; &lt;stopvalue&gt;</b>
<p>Interpoluje hodnoty&nbsp;od 
&lt;startvalue&gt;&nbsp;do &lt;stopvalue&gt; v zadaném&nbsp;rozsahu snímkù. Pracuje
pouze pro celé (int) a desetinné (float) hodnoty. Oba hranièní snímky &lt;start-frame&gt;&nbsp;a &lt;end-frame&gt;&nbsp;jsou&nbsp;zahrnuty v
daném rozsahu.
<h3>Typy</h3>
<p>Jak bylo zmínìno,&nbsp;typ mù¾e být &nbsp; <i>float</i>, <i>int</i>&nbsp;nebo <i>bool</i>.&nbsp;<br>
<br>
<i>Int</i>   - celá èísla, mohou být se znakem.<br>
<br>
<i>Float</i> - desetinná èísla (s desetinnou teèkou),&nbsp;mù¾e jim pøedcházet znak&nbsp;a&nbsp;mohou být následována&nbsp;písmeny
e&nbsp;nebo E&nbsp;a desítkovým èíslem jako exponentem.&nbsp;Napøíklad -732.103&nbsp;nebo 7.12e4.<br>
<br>
<i>Bool</i> mù¾e být&nbsp; <i>true</i>, <i>T</i>, <i>yes</i>, <i>false</i>, <i>F</i>&nbsp;nebo <i>no</i>.
<h3>Pøíklady</h3>
<h4>Základní pou¾ití</h4>
<p>File.txt:
<pre>Type float
Default 3.45567

R 45 300 76.5654
2 -671.454
72 -671.454</pre>
<p>Tento soubor vrací desetinné hodnoty.&nbsp;Výchozí nastavení (default) vrátí&nbsp;3.45567. Nicménì snímky od 45&nbsp;do 300&nbsp;vrátí 76.5654.&nbsp;A&nbsp;snímky 2 a 72&nbsp;vrátí
-671.454.&nbsp;<br>
Mù¾ete si v¹imnout&nbsp;-&nbsp;následující&nbsp;nastavení pøepisují pøedchozí. To ilustruje snímek '72' - nehledì na to ¾e&nbsp;
se nachází uvnitø rozsahu 45-300, bude vrácena pozdìj¹í&nbsp;hodnota. Na druhou stranu, pokud by byl rozsah&nbsp;zadán a¾
po '72&nbsp; -671.454' - vrátila by se hodnota 76.5654.<br>
<br>Skript pro 
práci s tímto souborem by mohl vypadat takto:
<pre>colorbars(512,512)
trim(0,500)
ScriptClip(&quot;subtitle(string(myvar))&quot;)
ConditionalReader(&quot;file.txt&quot;, &quot;myvar&quot;, false)</pre>
<p>Tento skript vkládá hodnoty&nbsp;do promìnné&nbsp;"myvar", která je pou¾ita&nbsp;filtrem
<A href="subtitle.htm">Subtitle</A>, vyvolaný filtrem
<A href="conditionalfilter.htm#ScriptClip">ScriptClip</A>&nbsp;pro 
zobrazení&nbsp;podmínìné hodnoty jako titulku.</p>
<p><b>V¹imnìte si!</b>&nbsp;Øádek ConditionalReader() se nachází <b>po</b>&nbsp;ka¾dém pou¾ití
"myvar" ve Va¹em skriptu.</p>
<h4>Úprava pøekrytí (overlay)</h4>
<p><b>AviSynth skript:</b>
<pre>colorbars(512,256)
a1 = trim(0,600)
a2 = MessageClip(&quot;Text clip&quot;)
overlay(a1,a2, y = 100, x = 110, mode=&quot;subtract&quot;, opacity=0, pc_range=true)
ConditionalReader(&quot;opacity.txt&quot;, &quot;ol_opacity_offset&quot;, false)
ConditionalReader(&quot;xoffset.txt&quot;, &quot;ol_x_offset&quot;, false)</pre>
<p><b>xoffset.txt:</b>
<pre>Type int
Default -50

I 25 50 -50 100
R 50 250 100
I 250 275 100 250</pre>
<p><b>opacity.txt:</b>
<pre>Type float
Default 0.0

I 25 50 0.0 1.0
R 50 250 1.0
I 250 275 1.0 0.0</pre>
<p> V zásadì definuje&nbsp;klíèové snímky pro&nbsp;x-offset (horizontální posun) a&nbsp;opacity (neprùhlednost). Ve snímcích 25-&gt;50&nbsp;je neprùhlednost zvìt¹ena&nbsp;z 0.0&nbsp;na 1.0, zatímco text je
posunut zleva doprava. Potom text stojí na místì od snímku 50 po snímek&nbsp;250, a potom
jede text dále doprava a¾ postupnì zmizí.<br>
     Je jednodu¹¹í si klip prohlédnout,&nbsp;ne¾ podrobnì popisovat, co dìlá. 
<h4><a NAME="Applyrange"></a>Slo¾itý&nbsp;ApplyRange</h4>
<p>Jak jste si mohli v¹imnout&nbsp;pou¾ívání velkého poètu volání <A href="animate.htm">ApplyRange()</A>&nbsp;ve skriptu&nbsp;mù¾e vést&nbsp;k problémùm s resoursy. Pou¾ití&nbsp; <code>ConditionalReader</code>&nbsp;spolu s&nbsp;
<A href="conditionalfilter.htm">ConditionalFilter</A>  mù¾e vést k efektivnímu øe¹ení.</p>
<p>File.txt:
<pre>Type Bool
Default False

2 True
R 45 60 True
72 True
R 200 220 True
210 False
315 True</pre>
<p>            
         Uvedený skript&nbsp;vrátí logické hodnoty. Ve&nbsp;výchozím nastavení vrací False. Nicménì pro
snímky&nbsp;2, 45&nbsp;a¾ 60, 72, 200&nbsp;a¾ 220 a 315&nbsp;kromì 210 vrátí True. Mohli jste
si v¹imnout,&nbsp;¾e pozdìj¹í zmìny pøepisují nastavení provedená v souboru døíve. To ilustruje snímek&nbsp;'210' - i
kdy¾ je&nbsp;uvnitø intervalu 200-220, bude vrácena pozdìj¹í&nbsp;hodnota False.<br>
<br>
Skript pro pou¾ití tohoto souboru by mohl vypadat takto:
<pre>colorbars(512,512)
trim(0,500)
A=Last
FlipHorizontal() # Pøidá komplexní øetìzec filtrù
B=Last
ConditionalFilter(A, B, &quot;MyVar&quot;, &quot;==&quot;, &quot;False&quot;, false)
ConditionalReader(&quot;File.txt&quot;, &quot;MyVar&quot;, false)</pre>

<p>     To vlo¾í hodnoty do promìnné zvané "MyVar", kterou pou¾ívá
<A href="conditionalfilter.htm">ConditionalFilter</A>    
k výbìru mezi&nbsp;nezpracovanou a otoèenou verzí zdroje.</p>

<p><b>V¹imnìte 
si!</b>&nbsp;Øádek&nbsp; <code>ConditionalReader()</code>&nbsp;je umístìn&nbsp; <b>po</b>&nbsp;ka¾dém
pou¾ití "MyVar"&nbsp;v na¹em skriptu.</p>

<p><b>Seznam zmìn:</b></p>
<table border="1" cellpadding="4" cellspacing="1">
  <tbody>
    <tr>
      <td>v2.60</td>
      <td>Pøidáno OFFSET</td>
    </tr>
  </tbody>
</table>

<p><kbd>$English Date: 2008/10/26 14:19:43 $</kbd></p>
<P><KBD>Èeský pøeklad:18.9.2009</KBD></P>
<form><input TYPE="button" VALUE="Zpìt"
 onClick="history.go(-1)"></form>
</body>
</html>







