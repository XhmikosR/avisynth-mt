<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<title>AssumeFPS / AssumeScaledFPS / ChangeFPS / ConvertFPS AviSynth Filters</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
</head>
<body>
<h2><a name="AssumeFPS"></a>AssumeFPS</h2>
<p><code>AssumeFPS </code>(<var>clip, float fps, bool "sync_audio"</var>)<br>
   <code>AssumeFPS </code>(<var>clip, int numerator [, int denominator], bool "sync_audio"</var>)<br>
   <code>AssumeFPS </code>(<var>clip1, clip2, bool "sync_audio"</var>)<br>
   <code>AssumeFPS </code>(<var>clip, string preset, bool "sync_audio"</var>)</p>
<p>Filtr&nbsp; <code>AssumeFPS</code>&nbsp;mìní frekvenci snímkù&nbsp;beze zmìny poètu snímkù (ve 
  výsledku se video bude pøehrávat rychleji nebo pomaleji). Nastavuje se pouze parametr frekvence snímkù.<br>
  Pokud 
je&nbsp; <var>sync_audio</var>            &nbsp;true, mìní
  také vzorkovací frekvenci zvuku pomocí&nbsp;stejného pomìru,&nbsp;posunem vý¹ky zvuku.</p>
<p>    Je to také zpùsob zmìny vzorkovací frekvence jen pro audio samotné.</p>
<p> Ve&nbsp; <em>v2.55</em>,&nbsp;pokud 
je&nbsp; <var>clip2</var> &nbsp;pøítomen, snímková frekvence klipu&nbsp; <var>clip1</var> bude pøizpùsobena&nbsp;do souladu s&nbsp;klipem <var>clip2</var>. Je to u¾iteèné, kdy¾ chcete pøidat&nbsp;dva
klipy&nbsp;s mírnì rozdílnými snímkovými frekvencemi. </p>
<p>Ve&nbsp; <em>v2.57</em>  ,&nbsp;je 
re¾im práce s ohledem na frekvenci
snímkù trochu pozmìnìn. Hlavním problémem je, ¾e je u¾ivatelùm povoleno pracovat s desetinnou
snímkovou frekvencí, ale&nbsp;standarty NTSC (FILM a Video) a PAL&nbsp;vy¾adují snímkovou frekvenci jako
pomìr. Kromì toho&nbsp;AviSynth exportuje snímkovou frekvenci jako&nbsp;pomìr, tak¾e kdy¾ zadáte desetinné èíslo, bude pøevedeno na
zlomek. Pomìry standartù jsou dány takto&nbsp;24000/1001&nbsp;pro 23.976 (FILM) a 30000/1001&nbsp;pro 29.97 (Video). <b>Kdy¾ zadáte tato desetinná èísla, exportují se&nbsp;AviSynthem jako pomìry, ale ne
jako standartní&nbsp;pomìry.</b> Jedním z dùvodù je, ¾e takové desetinné&nbsp;hodnoty jsou jen
pøibli¾né&nbsp;(pøipomeòte si, ¾e &nbsp;24000/1001 =    
      23.9760239760...),&nbsp; tak¾e jak má&nbsp;AviSynth vìdìt&nbsp;jaký správný pomìr vybrat?
Pro pøekonání tohoto problému, mù¾e u¾ivatel&nbsp;pou¾ít AssumeFPS(24000,1001)&nbsp;nebo
jednodu¹e&nbsp;AssumeFPS("ntsc_film"). </p>
<p>Jiný problém je, ¾e&nbsp;pøevedené desetinné hodnoty 
byly&nbsp;(ve v2.56 a star¹ích) exportovány&nbsp;s 64 bitovou pøesností, vedoucí
k velmi velkým èitatelùm a jmenovatelùm, které zpùsobovali padání nìkterých pøehrávaèù.
Pro pøekonání tohoto problému, je pøidán vnitøní chytrý desetinný-pomìr&nbsp;(smart float-ratio), a snímkové
frekvence jsou pøesnì aproximovány&nbsp;pomìry malých èísel.&nbsp;Napøíklad, AssumeFPS(23.976) je
pøemìnìn na&nbsp;AssumeFPS(2997,125) co¾ si mù¾ete ovìøit&nbsp;pomocí <A href="info.htm">Info</A>. </p>
<p><b>Pøednastavení:</b> </p>
<table border="1" width="66%">
  <tr>
    <td width="33%" align="middle"><b>standart</b></td>
    <td width="33%" align="middle"><b>èitatel</b></td>
    <td width="34%" align="middle"><b>jmenovatel</b></td>
  </tr>
  <tr>
    <td width="33%" align="middle">"ntsc_film"</td>
    <td width="33%" align="middle">24000</td>
    <td width="34%" align="middle">1001</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"ntsc_video"&nbsp;</td>
    <td width="33%" align="middle">30000</td>
    <td width="34%" align="middle">1001</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"ntsc_double"</td>
    <td width="33%" align="middle">60000</td>
    <td width="34%" align="middle">1001</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"ntsc_quad"</td>
    <td width="33%" align="middle">120000</td>
    <td width="34%" align="middle">1001</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"ntsc_round_film"</td>
    <td width="33%" align="middle">2997</td>
    <td width="34%" align="middle">125</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"ntsc_round_video"</td>
    <td width="33%" align="middle">2997</td>
    <td width="34%" align="middle">100</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"ntsc_round_double"</td>
    <td width="33%" align="middle">2997</td>
    <td width="34%" align="middle">50</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"ntsc_round_quad"</td>
    <td width="33%" align="middle">2997</td>
    <td width="34%" align="middle">25</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"film"</td>
    <td width="33%" align="middle">24</td>
    <td width="34%" align="middle">1</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"pal_film"</td>
    <td width="33%" align="middle">25</td>
    <td width="34%" align="middle">1</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"pal_video"</td>
    <td width="33%" align="middle">25</td>
    <td width="34%" align="middle">1</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"pal_double"</td>
    <td width="33%" align="middle">50</td>
    <td width="34%" align="middle">1</td>
  </tr>
  <tr>
    <td width="33%" align="middle">"pal_quad"</td>
    <td width="33%" align="middle">100</td>
    <td width="34%" align="middle">1</td>
  </tr>
</table>
<p> <b> Pøíklady&nbsp;PAL +4% Telecine pøevod:</b></p>
<pre>
AVISource(&quot;FILM_clip.avi&quot;)			#Naèíst 24fps klip 
LanczosResize(768,576)				#Zmìnit velikost na rozmìr snímku PAL se ètvercovými pixely. 
AssumeFPS(25, 1, true)				#Pøevést frekvenci snímkù na PAL, také pøizpùsobit audio. 
SSRC(44100)					#Obnovit audio vzorkování na standardní hodnotu.
</pre>
<p> Zrychlení&nbsp;+4%&nbsp;se  obvykle pou¾ívá pro filmy s&nbsp;24fps&nbsp;na PAL televizích. Mírné zvý¹ení vý¹ky a tempa&nbsp;diváci&nbsp;PAL materiálù snadno akceptují.</p>

<h2><a name="AssumeScaledFPS"></a>AssumeScaledFPS</h2>
<p><code>AssumeScaledFPS </code>(<var>clip, int "multiplier", int "divisor", bool "sync_audio"</var>)</p>
<p>Filtr <code>AssumeScaledFPS</code>          
           &nbsp;mìní frekvenci snímkù&nbsp;beze zmìny poètu
  snímkù. Èitatel je násoben parametrem&nbsp;multiplier,&nbsp;jmenovatel je násoben parametrem divisor, výsledný zlomek pro FPS&nbsp;normalizován,
  pokud buï výsledný èitatel a nebo jmenovatel&nbsp;pøevy¹uje 31 bitù výsledek je zaokrouhlen a upraven.
  To umo¾òuje pøesné racionální zvìt¹ení, které se pou¾ije&nbsp;pro vlastnosti FPS klipu.</p>
<p>Pokud je&nbsp; <var>sync_audio</var>        &nbsp;true, mìní se také vzorkovací frekvence
  audia&nbsp;ve stejném pomìru, vý¹ky výsledného zvuku jsou posunuty.</p>
<p> Dostupný&nbsp;od&nbsp; <em>v2.56</em>. </p>

<h2><a name="ChangeFPS"></a>ChangeFPS</h2>
<p><code>ChangeFPS </code>(<var>clip, float fps, bool "linear"</var>)<br>
   <code>ChangeFPS </code>(<var>clip, int numerator [, int denominator], bool "linear"</var>)<br>
   <code>ChangeFPS </code>(<var>clip1, clip2, bool "linear"</var>)<br>
   <code>ChangeFPS </code>(<var>clip, string preset, bool "linear"</var>)</p>
<p><tt><code>ChangeFPS</code></tt> mìní&nbsp;frekvenci snímkù mazáním nebo duplikováním snímkù.</p> 
<p>Do&nbsp; <em>v2.05</em>          , se video
  prostøihávalo nebo vyplòovalo&nbsp;aby se zachovala rychlost a èas pøehrávání
  (poèet snímkù se nemìnil). V pozdìj¹ích verzích se zpùsob práce zmìnil a poèet snímkù&nbsp;je zvy¹ován nebo
  sni¾ován jako v&nbsp; <code>ConvertFPS</code>.</p>
<p>Ve&nbsp; <em>v2.54</em>, byla 
doplnìna volba&nbsp; <var>linear</var> = 
     true/false&nbsp;pro <code>ChangeFPS</code>. To 
nutí&nbsp;AviSynth po¾adovat&nbsp;snímky v&nbsp;lineární podobì, kdy¾ jsou snímky pøeskakovány. Výchozí je&nbsp;true.</p>
<p> Ve&nbsp; <em>v2.56</em>, 
pokud&nbsp;je pøítomen &nbsp; <var>clip2</var> &nbsp;, bude frekvence snímkù klipu&nbsp; <var>clip1</var>
 
     &nbsp;upravena&nbsp;podle klipu&nbsp; <var>clip2</var>.</p>
<p> Ve&nbsp; <em>v2.57</em>, bylo tochu pozmìnìno chování k
pomìru&nbsp;frekvence snímkù.&nbsp;Viz AssumeFPS.</p>
<p> <b>Pøíklady pøevodù&nbsp;PAL-&gt;NTSC :</b></p>
<pre>AVISource(&quot;PAL_clip.avi&quot;)			# Naèíst klip
Bob(height=480)					#Oddìlit pole a interpolovat je na plnou vý¹ku.                 
BicubicResize(640,480)				#Zmìna velikosti snímku na NTSC se ètvercovými pixely.                 
ChangeFPS(60000,1001)				# Pøevést frekvenci snímkù na NTSC, duplikováním polí.
SeparateFields.SelectEvery(4,0,3)		# Vypnout Bob, sudá pole první. Pou¾ijeme SelectEvery(4,1,2) pro liché pole první.
Weave						# Ukonèit vypnutí Bob.</pre>
<p>Efekt je podobný&nbsp;jako u&nbsp;3-2 telecine pull 
down. Pravidelní diváci&nbsp;PAL
  materiálù si mohou v¹imnout&nbsp;trhání pohybu, které&nbsp;diváci NTSC materiálù lehce&nbsp;ignorují jako&nbsp;u filmù zpracovaných pomocí telecine.</p>

<h2><a name="ConvertFPS"></a>ConvertFPS 
</h2>
<p><code>ConvertFPS </code>(<var>clip, float new_rate, int "zone", int "vbi"</var>)<br>
   <code>ConvertFPS </code>(<var>clip, int numerator [, int denominator], int "zone", int "vbi"</var>)<br>
   <code>ConvertFPS </code>(<var>clip1, clip2, int "zone", int "vbi"</var>)<br>
<code>ConvertFPS </code>(<var>clip, string preset, int "zone", int "vbi"</var>)</p>
<p> Tento&nbsp;filtr se pokou¹í&nbsp;pøevést frekvenci snímkù&nbsp;klipu <var>clip</var>&nbsp;na <var>new_rate</var>  bez vypou¹tìní 
  nebo vkládání snímkù, za pøedpokladu plynulého pøevodu s výsledkem podobným&nbsp;jako u&nbsp;speciálních&nbsp;pøevodních zaøízení. 
  Výstup&nbsp;bude mít&nbsp;(témìø) stejnou dobu&nbsp;jako&nbsp; <i>clip</i>      , ale poèet 
  snímkù bude proporcionálnì zmìnìn&nbsp;k pomìru&nbsp;cílové a zdrojové frekvence snímkù. </p>
<p> Ve&nbsp; <em>v2.56</em>, je-li 
pøítomen&nbsp;clip2, bude upravena&nbsp;frekvence snímkù klipu&nbsp;clip1&nbsp;podle klipu&nbsp;clip2.</p>
<p> Ve&nbsp; <em>v2.57</em>, bylo tochu pozmìnìno chování k
pomìru&nbsp;frekvence snímkù.&nbsp;Viz AssumeFPS.</p>
<p> Filtr má dva pracovní re¾imy. Pokud&nbsp;není&nbsp;volitelný argument <var>zone</var>  
      &nbsp;pøítomný, pak vá¾enì smíchá&nbsp;video snímky, s proporcionálním koeficientem smísení 
  snímku&nbsp;ve vztahu k délce ("Blend Mode"). Pokud je &nbsp; <var>zone</var>  
                
  &nbsp;pøítomen, pøepne se z jednoho video snímku na&nbsp;dal¹í ("Switch Mode") v¾dy kdy¾ zaène zdrojový snímek, 
  t.j, obvykle nìkde ve støedu cílového snímku. Switch Mode pøedpokládá, ¾e výstup bude zobrazen na 
  obrazovce TV kde je ka¾dý snímek&nbsp;skenován od shora dolù.&nbsp;Parameter <var>zone</var> udává&nbsp;vý¹ku pøechodové oblasti&nbsp;ve které&nbsp;ve které&nbsp;bude daný snímek&nbsp;smíchán 
  s následujícím. </p>
<p>             
    Blend Mode vyvolá viditelné, tøeba¾e slabé, rozmazaní pohybu. Je to typický&nbsp;artefakt pøevodu 
  snímkové frekvence&nbsp;a lze ho vidìt i na&nbsp;komerèních videokazetách&nbsp;a TV programech. Kdy¾ pracuje s prokládaným 
  videem, je dùle¾ité nechat filtr pracovat na jednotlivých polích, ne na prokládaných snímcích. 
  (Viz pøíklady ní¾e.) </p>
<p> Switch Mode je pokus vyhnout se&nbsp;rozmazání pohybu, ale toho je dosa¾eno za cenu&nbsp;mírného blikání a 
  pohybových artefaktù. Horizontální a vertikální rozta¾ení mù¾e&nbsp;ukázat slabé chvìní. Dále snímky&nbsp;z tohoto pøechodu&nbsp;ukazují 
  &nbsp;"lomené"&nbsp;nebo "køivé" vertikální èáry v pohyblivých scénách. Pøechod od scény ke scénì&nbsp;mù¾e nastat ve 
  støedu snímku. Pøesto v¹ak, výsledek vypadá ménì rozmazaný&nbsp;ne¾ v re¾imu&nbsp;"Blend Mode". </p>
<p> ®ádný re¾im není ideální. 
  Který pou¾ít, to závisí na&nbsp;osobních preferencích a na zaznamenaném materiálu, který budeme pøevádìt. Switch 
  Mode je pravdìpodobnì pou¾itelný pokud výstup budeme zobrazovat&nbsp;na TV, a ne na&nbsp;poèítaèovém monitoru. </p>
<p> Pøevod frekvence snímkù je v podstatì slo¾itý. Tento filtr&nbsp;implementuje dva roz¹íøené zpùsoby pou¾ívané&nbsp;komerèními poloprofesionálními (Prosumer-level) 
  pøevodními systémy. Výsledky bývají obvykle docela dobré. Slo¾itìj¹í systémy&nbsp;aplikují&nbsp;algoritmy interpolování 
  pohybu, co¾ je obtí¾né provést správnì, ale&nbsp;pokud se to správnì provede&nbsp;vede to k nejvy¹¹í 
  kvalitì. </p>
<p> Zaznamenaný materiál pøevedený tímto filtrem&nbsp;by nemìl být znovu&nbsp;pøevádìn. 
  Rozmazání pøi dal¹ích pøevodech rychle narùstá. </p>
<p>              
     Audio data nejsou tímto filtrem dotèena. Audio zùstává synchronní, nicménì délka audio 
  dat&nbsp;mù¾e být mírnì rozdílná&nbsp;ne¾ u video dat po pøevodu. Je to proto, ¾e mù¾e 
  obsahovat jen celý poèet snímkù. Tento efekt bude zøetelnìj¹í u krat¹ích klipù. Rozdíl 
  v délce by mìl být ignorován. </p>
<p>Parametery:
<table>
  <tbody> 
  <tr valign="top"> 
    <td width="80"><i>new_rate</i></td>
    <td>Cílová frekvence snímkù. Mù¾e to být celé nebo desetinné èíslo. V re¾imu Blend Mode, 
      <i>new_rate</i> 
      musí být&nbsp;nejménì 2/3 (66.7%) frekvence zdrojového videa, jinak se zobrazí zpráva o chybì. Je to ochrana 
      proti vynechávání snímkù. Pokud potøebujete ni¾¹í frekvenci snímkù,&nbsp;pou¾ijte re¾im&nbsp;Switch Mode. </td>
  </tr>
  <tr valign="top"> 
    <td>zone</td>
    <td>           
             (Volitelný) Je-li zadaný, pøepne filtr do re¾imu&nbsp;Switch 
      Mode. Celá èísla vìt¹í nebo rovná nule. Pokud je nula,&nbsp;filtr&nbsp;pou¾ije tvrdé pøepnutí,&nbsp;t.j. okam¾itì 
      zobrazí následující snímek&nbsp;pod linií pøepnutí. Pokud je vìt¹í&nbsp;ne¾ nula, udává vý¹ku (v 
      øádcích) pøechodové oblasti, kde jeden snímek plynule pøejde do druhého. zone=  
        80 pøiná¹í dobré výsledky&nbsp;pro video plné velikosti (480/576 
      aktivních øádkù). Pøechod je proveden stejným zpùsobem jako&nbsp;v PeculiarBlend(). <i>zone</i>    
                    
          musí být men¹í&nbsp;nebo rovno poètu øádkù cílového snímku co¾ koresponduje&nbsp;dobì zdrojového 
      snímku. To je typicky&nbsp;5/6&nbsp;nebo 6/5 vý¹ky cílového snímku,&nbsp;t.j.,&nbsp;nìkolik set øádkù. Pokud zadáte vy¹¹í hodnotu 
      zobrazí se chyba. </td>
  </tr>
  <tr valign="top"> 
    <td><i>vbi</i></td>
    <td> (Volitelný) V re¾imu&nbsp;Switch 
      Mode, zadává,&nbsp;¾e má filtr provést&nbsp; èasovou 
      korekci&nbsp;vertikálního&nbsp;intervalu zatemòování&nbsp;((Vertical Blanking 
      Interval-VBI). Celé èíslo&nbsp;vìt¹í ne¾ nula, ukazuje vý¹ku&nbsp;VBI 
      cílového snímku,&nbsp;v øádcích. Typicky vbi=    
            
         
             
       49&nbsp;pro PAL a vbi=         
                    
            45&nbsp;pro NTSC, ale tyto hodnoty nejsou kritické. Ignoruje 
      se v re¾imu&nbsp;Blend Mode. </td>
  </tr>
  </tbody> 
</table>
<p> <b>Pøíklady pøevodu&nbsp;NTSC-&gt;PAL:</b></p>
<pre>AVISource(&quot;NTSC_clip.avi&quot;)         	# Naèíst klip
Bob(height=576)				# Oddìlit pole a interpolovat je do plné vý¹ky. 
BicubicResize(768,576)			# Zmìna velikost snímku na PAL s ètvercovými pixely. (Pou¾ít 720,576 pro CCIR.)
ConvertFPS(50)                          # Pøevést frekvenci polí na PAL, pou¾itím Blend Mode.
SeparateFields.SelectEvery(4,0,3)       # Vypnout Bob, sudá pole první. Pou¾ít SelectEvery(4,1,2) pro liché pole první.
Weave                                   # Ukonèit vypnutí Bob.</pre>
<p> Tento pøíklad bude pracovat také&nbsp;s&nbsp;NTSC materiálem zalo¾eným na snímcích, dokonce s filmy 
  zpracovanými pomocí telecine. Pro filmový materál, získáte lep¹í&nbsp;výsledky&nbsp;pou¾itím filtru&nbsp;opaèného&nbsp;telecine&nbsp;a zvý¹ením&nbsp;snímkové frekvence&nbsp;z 23.976&nbsp;na 25fps.</p>
<p> Ne v¹echny hodnoty&nbsp;parameterù&nbsp;jsou kontrolovány na smysluplnost. </p>
<p> <b>Zmìny:</b> </p>
<table border="1" width="50%">
  <tr>
    <td width="25%"> v2.57</td>
    <td width="50%"> Pøidána volba pøednastavení; zmìnìno chování frekvence snímkù;
      YV12 a RGB podpora pro&nbsp;ConvertFPS, opraven&nbsp;pomìr smíchání</td>
  </tr>
  <tr>
    <td width="25%"> v2.56</td>
    <td width="50%"> pøidána volba clip2&nbsp;do ChangeFPS,&nbsp;pøidán AssumeScaledFPS</td>
  </tr>
  <tr>
    <td width="25%"> v2.55</td>
    <td width="50%"> pøidána volba clip2&nbsp;do AssumeFPS</td>
  </tr>
  <tr>
    <td width="25%"> v2.54</td>
    <td width="50%"> pøidán parametr&nbsp; linear=                                                                         true/false&nbsp;do ChangeFPS</td>
  </tr>
</table>
<p><kbd>$English Date: 2006/12/06 20:33:16 $</kbd></p>
<P><KBD>Èeský pøeklad:28.5.2008</KBD></P>
<FORM>
  <INPUT TYPE="button" VALUE="Zpìt"
 onClick="history.go(-1)">
</FORM>
</body>
</html>




































