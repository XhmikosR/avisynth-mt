<html>
<head>
<title>Convolution3D</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: convolution3d.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $ 
-->
</head>
<body>
<h1>Convolution3D</h1>
<h2>Pøehled</h2>
<b>autor:</b> Vlad59
<br><b>verze: - </b>1.01 (YUY2 verze)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
- beta 5 (YV12 verze s vypnutým èasovým (temporal) ovlivòováním)<br>
<b>stáhnout:</b> <a href="http://www.avisynth.org/warpenterprises/">http://www.avisynth.org/warpenterprises/</a><br>
<b>kategorie:</b> Prostorovì-èasové vyhlazovaèe
<br><b>požadavky:</b>&nbsp;
<ul>
  <li>YV12 nebo YUY2 (podle verze) barevné prostøedí</li>
  <li>ISSE podpora</li>
</ul>
<hr>
<h2>Popis</h2>
Convolution3D je avisynth filtr, který aplikuje 3D konvoluci na všechny pixely 
snímku.
<h2>1 - Jak ho použít</h2>
<p><code>Convolution3d</code> (<var>matrix=0, ythresh=3, cthresh=4, t_ythresh=3, t_cthresh=4, influence=3,
debug=0</var>)</p>
<p><b>Volba matice </b> : <br>
  0 : pùvodní matice : <br>
  1 2 1&nbsp;&nbsp; 2 4 2&nbsp;&nbsp; 1 2 1<br>
  2 4 1&nbsp;&nbsp; 4 8 4&nbsp;&nbsp; 2 4 1<br>
  1 2 1&nbsp;&nbsp; 2 4 2&nbsp;&nbsp; 1 2 1<br>
  Tato matice je užiteèná pro normální video (ne animované) protože zachovává více detailù<br>
  1 : nápad bb na matici ze samých 1 (ohromný nápad)<br>
  1 1 1&nbsp;&nbsp; 1 1 1&nbsp;&nbsp; 1 1 1<br>
  1 1 1&nbsp;&nbsp; 1 1 1&nbsp;&nbsp; 1 1 1<br>
  1 1 1&nbsp;&nbsp; 1 1 1&nbsp;&nbsp; 1 1 1<br>
  Tato matice je velmi užiteèná u animovaných nebo zdrojù špatné kvality, protože rozmazává 
  trochu více (tedy odstraòuje více šumu)</p>
<p><b>Èasové (temporal) ovlivnìní</b> :<br>
  Je použito zvláštì pro malé urychlení tohoto filtru a pro vyhnutí se použití èasových  
  informací, když nejsou potøeba <br>
  (zmìna scény, stmívání, ...)<br>
  Nejdøíve vypoèítám limit = Èasová prahová hodnota jasu * Èasové ovlivnìní<br>
  Pro každé 2 spoèítané pixely (kvùli MMX, 2 pixely ve stejný èas), nejdøíve zkontroluji 
  toto :<br>
  pokud <br>
  (Abs (Y0 - Y0[Pøedchozí snímek]) +<br>
  Abs (Y0 - Y0[Následující snímek]) +<br>
  Abs (Y1 - Y1[Pøedchozí snímek]) +<br>
  Abs (Y1 - Y1[Následující snímek])) &gt; limit<br>
  pak<br>
  provádíme prostorové zpracování (jen matice 3*3 )<br>
  jinak<br>
  provádíme prostorové i èasové zpracování (matice 3*3*3 )<br>
  Èím je hodnota nižší -&gt; tím bude filtr rychlejší, ale bude horší komprimovatelnost<br>
  Èím je hodnota vyšší -&gt; tím bude filtr pomalejší, ale bude lepší komprimovatelnost<br>
  pokud je èasové ovlivnìní nastaveno na -1 tak pracuje jen prostorovì (vysokou rychlostí).<br>
  Tento parametr je desetinný.</p>
<h2>2 - Pøíklady parametrù</h2>
<p>Sestavil jsem následující pøednastavení, aby bylo použití snazší :<br>
<b>Convolution3d (preset=&quot;movieHQ&quot;)</b><strong> </strong>// Video vysoké kvality (dobré DVD zdroje)<br>
  je jiný název pro Convolution3D (0, 3, 4, 3, 4, 2.8, 0) <br>
<b>Convolution3d (preset=&quot;movieLQ&quot;)</b><strong> <em> </em> </strong>// Video nízké kvality (zašumìlé DVD zdroje)<br>
  je jiný název pro Convolution3D (0, 6, 10, 6, 8, 2.8, 0) <br>
<b>Convolution3d (preset=&quot;animeHQ&quot;)</b> // Animované vysoké kvality (dobré DVD zdroje)<br>
  je jiný název pror Convolution3D (0, 6, 12, 6, 8, 2.8, 0) <br>
<b>Convolution3d (preset=&quot;animeLQ&quot;)</b><strong><em> </em> </strong>// Animované nízké kvality (zašumìlé DVD zdroje)<br>
  je jiný název pro Convolution3D (1, 8, 16, 8, 8, 2.8, 0) <br>
<b>Convolution3d (preset=&quot;animeBQ&quot;)</b> // Animované špatné kvality (???)<br>
  je jiný název pro Convolution3D (1, 12, 22, 8, 8, 2.8, 0) <br>
<b>Convolution3d (preset=&quot;vhsBQ&quot;)</b><strong><em> </em> </strong>// VHS nahrávky špatné kvality (???)<br>
  je jiný název pro for Convolution3D (0, 32, 128, 16, 64, 10, 0)</p>
<p>Testoval jsem Convolution3d s nekvalitními TV nahrávkami a v takovém pøípadì<br>
  budete muset zvýšit zvláštì prahové hodnoty barevnosti (což zpùsobuje nìjaké duchy 
  ale pøesto vypadá celková kvalita lépe).<br>
  Osobnì používám tyto parametry :</p>
<pre>Convolution3D (0, 32, 128, 32, 128, 10, 0)</pre>
<p>Prahové hodnoty Convolution3d jsou zde jen proto, aby dohlíželi na hrany a zmìny scén. 
  Mùžete zvýšit prostorovou (obzvláštì prahovou hodnotu pro barevnost)  
  ale zastavte jakmile uvidíte nìjaké rozmazání kolem hran (pokud chcete kvalitu). 
  S navrženými nastaveními by jste nemìli mít takový problém. <br>
  Èasová prahová hodnota by mìla zùstat pod 10, aby jste se vyhnuly duchùm.<br>
  Mìli by jste dbát zvláštní opatrnosti na prahovou hodnotu s maticí 1, protože s 
  touto maticí má aktuální snímek menší váhu, takže je snazší obdržet duchy.</p>
<p>Nìjaké informace o tom jak pracuje mùžete najít na : <a href="http://forum.doom9.org/showthread.php?s=&threadid=29829">
http://forum.doom9.org/showthread.php?s=&amp;threadid=29829</a></p>
<h2>3 - Souèasná omezení nebo známé problémy</h2>
<ul>
  <li>Pracuje jen s YUV2, PROVÌØENO.</li>
  <li>vyžaduje Integer SSE u CPU (ani PII ani K6-II), PROVÌØENO.</li>
</ul>
<p>UPOZORNÌNÍ : je pomalý, vím to a snažím se ho urychlit takže s tím na mì nespìchejte, 
  pøedem dìkuji.</p>
<h2>4 - Podìkování</h2>
<p>Díky<br>
  bb za pùvodní myšlenku a spoustu testù<br>
  iago, Koepi a TheReal za testy skuteèných videí plné délky (nebo nahrávek)<br>
  Tom Barry, Dividee a Sh0dan za jejich užiteèné technické informace nebo nápady<br>
  Ctrl-Alt-Suppr za francouzský tutorial<br>
  Defiler za hostování Convolution3d<br>
  všem uživatelùm Convolution3D</p>
<p>Vlad59 (babas.lucas@laposte.net)</p>
<h2>5 - Licence</h2>
<p><font size="-1">Copyright (c) 2002 S&eacute;bastien LUCAS. All rights reserved.<br>
  babas.lucas@laposte.net</p>
<p>Tento soubor je pøedmìtem podmínek GNU General Public License publikované Free Software Foundation. 
Kopie této licence je zahrnuta u této distribuce software v souboru COPYING. Pokud nemáte kopii, 
mùžete ji získat napsáním do Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.</p>
</font>
<p><font size="-1">Tento software je šíøen v nadìji, že bude užiteèný,
ale BEZ JAKÉKOLI ZÁRUKY; dokonce i bez pøedpokkládané záruky OBCHODOVATELNOSTI nebo POUŽITÍ PRO KONKRÉTNÍ ÚÈELY. Pro více
podrobností viz. GNU General Public License<br>
  </font> </p>
<p><font size="-1"><kbd>$English Date: 2004/08/13 21:57:25 $</kbd></font></p>
<p><font size="-1"><kbd>Èeský pøeklad:24.4.2009</kbd></font></p>
</body>
</html>
