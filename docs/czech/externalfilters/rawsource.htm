<html>
<head>
<title>RawSource</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: rawsource.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $
-->
</head>
<body>
<h1>RawSource</h1>
<h2>Pøehled</h2>
<b>autor:</b> Ernst Peché<br>
<b>verze:</b>      20060728<br>
<b>dowload:</b> <a href="http://www.avisynth.org/warpenterprises/">http://www.avisynth.org/warpenterprises/</a>
<br><b>kategorie:</b>  Rùzné pluginy
<br><b>požadavky:<br>
licence:</b>  GPL
<hr>
<font face="verdana">
<h2>Co to dìlá</h2>
<p>Tento filtr naèítá raw (syrová) video data.</p>
<h2>Použití</h2>
</font>
<p><code>RawSource</code> (<var>string &quot;file&quot;, int &quot;widht&quot;, 
  int &quot;height&quot;, string &quot;pixel_type&quot;, string &quot;index&quot;, 
  bool &quot;show&quot;</var>)</p>

<p> RawSource otvírá video soubory, které obsahují YUV2, YV16, YV12, RGB nebo Y8 video 
  data.<br>
  Existují tøi zpùsoby jak jsou pozice dat video snímkù poèítány:</p>
<ul>
  <li>je nalezena YUV4MPEG2-hlavièka (header), width/height/framerate/pixeltype je nastaveno v souladu 
    s daty hlavièky. Jsou podporovány jen hlavièky snímkù pevné délky (fixed-length FRAME headers).</li>
  <li>width, height a pixel_type jsou dány jako argumenty. Pak jsou pozice 
    vypoèteny za pøedpokladu, že jsou v souboru jen video data.</li>
  <li>øetìzec &quot;index&quot; (nebo soubor) je zadán spolu s width, height, 
    pixel_type. Øetìzec index mùže obsahovat všechny nebo èásteèné pozice snímkù.</li>
</ul>
<p>Podporované <var>pixel_type</var> jsou:<br>
  &nbsp;&nbsp;RGB, RGBA, BGR, BGRA (interleaved RGB bez podvzorkování, což vede k 
  formátùm AviSynthu RGB24 nebo RGB32)<br>
  &nbsp;&nbsp;YUYV, YVYU, UYVY, VYUY (interleaved horizontálnì podvzorkované což vede k 
  formátu AviSynthu YUV2)<br>
  &nbsp;&nbsp;YV16 (planární horizontálnì podvzorkovaný, je pøeveden do AviSynth formátu 
  YUV2)<br>
  &nbsp;&nbsp;I420, YV12 (planární horizontálnì a vertikálnì podvzorkované což vede k 
  formátu AviSynthu YV12)<br>
  &nbsp;&nbsp;Y8 (jen jas což vede k formátu AviSynthu YV12 grey, 
  èeká na Avisynth 2.6 s nativní podporou Y8)
  </p>
<p>Maximální šíøka <var>width</var> je 2880.<br>
  Frekvence snímkù je pevná 25fps, Mùžete ji zmìnit pomocí AssumeFPS, pokud potøebujete 
  (napø. pro NTSC-materiál).</p>
<p>Pøi <var>show</var>=true se zobrazí skuteènì použitá bajtová pozice pro zobrazený snímek, 
  následovaná:<br>
  &nbsp;K = použita je pozice daná v indexu<br>
  &nbsp;D = použita je pozice pøidáním aktuálního delta<br>
  &nbsp;B = použita je pozice pøidáním aktuálního big_delta</p>
<h4><b>Nìkolik jednoduchých pøíkladù:</b></h4>
<table width="75%" border="1">
  <tr> 
    <td> 
    <pre>RawSource(&quot;d:\yuv4mpeg.yuv&quot;)  #toto pøedpokládá, že je uvnitø platná YUV4MPEG2-hlavièka.
                              #Pokud ne, použijí se výchozí hodnoty: width=720, height=576, pixel_type=&quot;YUV2&quot;</pre>
    
</td>
  </tr>
</table>
<br>
<table width="75%" border="1">
  <tr> 
    <td> 

<pre>RawSource(&quot;d:\src6_625.raw&quot;,720,576,&quot;BGRA&quot;) # skuteèný raw (syrový) soubor<br>                                            # pokud si nejste jisti s pixel_type, jednoduše zkuste všechny možné hodnoty.</pre>
</td>
  </tr>
</table>    
<h4><b>Použití øetìzce index:</b></h4>
<p>Mùžete zadat bajtovou pozici video snímkù pøímo.</p>
<table width="75%" border="1">
  <tr> 
    <td>
<pre>RawSource(&quot;d:\yuv.mov&quot;,720,576,&quot;UYVY&quot;, index=&quot;0:192512 1:1021952 25:21120512 50:42048512 75:62976512&quot;)</pre>
</td>
  </tr>
</table>    

<p>Toto je užiteèné pokud to není skuteèné raw video, ale napø. nekomprimované MOV soubory 
  nebo soubor s nìjakým druhem hlavièky.<br>
  Bude to pracovat kdykoli jsou vzdálenosti mezi snímky pevné nebo mají alespoò dva pevné 
  intervaly (napø. audio data prolínaná (prokládaná) s videem každý 25tý snímek).<br>
  Zadáváte páry <i>framenumber:byteposition</i>.<br>
  Vnitønì jsou dva kroky hodnot (pro bajtové pozice): <var>delta</var> 
  a <var>big_delta</var>.<br>
  <var>delta</var> je uloženo vždy, když jsou dána <font color="#0033FF">èísla dvou sousedních snímkù</font>, 
  výchozí hodnotou je width*height*bytes_per_pixel.<br>
  <var>big_delta</var> je uloženo vždy, když jsou dány <font color="#0033FF">tøi èísla snímkù 
  stejných dvou intervalù</font>. Výchozí hodnota je 0 (to znamená, že není pøítomno 
  žádné užiteèné <var>big_delta</var> )..<br>
  Pokud tyto podmínky nejsou splnìny, vnitøní hodnoty delta a big_delta 
  nejsou aktualizovány, je použita jen daná bajtová pozice v indexu.<br>
  <var>big_delta</var> je resetováno na 0 jestliže výsledná pozice by byla za danou 
  (viz níže).</p>
<p>Zde je nìkolik možných pøípadù:</p>
<table width="75%" border="1">
  <tr valign="top"> 
    <td width="11%"> 
      <pre>  0:    0</pre>
    </td>
    <td width="89%"> 
      <pre>snímek 0 zaèíná na bajtu 0, krok na snímek 1 je výchozí = width*height*bytes_per_pixel</pre>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="11%"> 
      <pre>  0:10000</pre>
    </td>
    <td width="89%"> 
      <pre>snímek 0 zaèíná na 10000</pre>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="11%"> 
      <pre>  0: 5000
  1:15000</pre>
    </td>
    <td width="89%"> 
      <pre>snímek 0 na 5000
snímek 1 na 15000 (delta je nastaveno na 10000)
snímek 2 na 25000 (použití delta)
snímek 3 na 35000 (použití delta)</pre>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="11%"> 
      <pre>  0:  5000
  1: 15000


<br> 25:290000


 50:590000



 75:890000</pre>
    </td>
    <td width="89%"> 
      <pre>snímek 0 na 5000
snímek 1 na 15000 (delta=10000)
snímek 2 na 25000
...
snímek 25 na 290000 (použití hodnoty (entry) místo delta, které by bylo na 255000)
snímek 26 na 300000 (stálé použití delta)
...
snímek 50 na 590000 (použití hodnoty (entry) místo delta)
&gt;&gt; protože 25...50 = 50...75 nyní je big_delta nastaveno na 300000 (590000-290000)
snímek 51 na 600000 (stálé použití delta)
...
snímek 75 na 890000 (použití hodnoty (entry), která je stejná jako použití big_delta)
... 
snímek 100 na 1190000 (použití big_delta)
snímek 101 na 1200000 (použití delta)<br>...<br>snímek 125 na 1490000 (použití big_delta)</pre>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="11%"> 
      <pre>  0:  5000
  1: 15000
 25:290000
 50:590000
 75:890000<br>
100:950000</pre>
    </td>
    <td width="89%"> 
      <pre>stejné jako v pøedchozím pøíkladu<br><br><br><br>snímek 75 na 890000<br>&gt;&gt; protože 890000+300000 &gt; 950000 nyní je big_delta resetováno na 0.<br>snímek 100 na 950000<br>snímek 101 na 960000 (použití delta)<br>...<br>snímek 125 na 1200000 (není ŽÁDNÉ big_delta)</pre>
    </td>
  </tr>
</table>
<p>Øetìzec index je zpracován jako jméno souboru, pokud je uvnitø &quot;.&quot; . 
  Data jsou pak ètena z tohoto souboru, zalomení øádkù nevadí.</p>
<h4><b>Nalezení tìchto bajtových pozicí:</b></h4>
<p>Pomocí <font color="#0033FF">yuvscan.exe</font> mùžete zkusit analyzovat soubory, 
  které obsahují YUV-data s jen platnými jasovými (luma) a barevnostními (chroma) daty (~16-240).<br>
  Program hledá velké nepøerušené bloky bez bajtù &lt; 16 nebo &gt;240 
  a generuje soubor &quot;index.txt&quot;, který mùže být použit pøímo s 
  rawsource (pokud máte opravdu štìstí, pøinejmenším).<br>
  Je to jen verze pøíkazového øádku, mùžete zmìnit výchozí parametry. Pokud znáte výšku a šíøku
  dat, výstup bude mnohem lepší.</p>
<p><u>Použití:</u><br>
  <tt>yuvscan.exe filename triggerlength threshold round_by_bytes</tt><br>
  <br>
  <tt>triggerlength</tt>: jak dlouhý musí být jeden snímek (v bajtech)<br>
  <tt>threshold</tt>: co je považováno za platná YUV data (výchozí 10, což znamená 
  10 ... 255-10)<br>
  <tt>round_by_bytes</tt>: protože vìtšina dat je uložena v pìkných pozicích, výstup 
  mùže být zaokrouhlen. výchozí 9 což znamená 2^9 = $100</p>
<p>&nbsp;</p>
<h4>Ernst Pech&eacute;, 2005-10-13</h4>
Verze 2006-07-28 - Pøidána Y8 podpora (by Fizick,  http://avisynth.org.ru)
<p><kbd>Èeský pøeklad:17.2.2009</kbd></p>
</body>
</html>
