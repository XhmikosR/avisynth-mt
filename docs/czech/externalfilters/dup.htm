<html>
<head>
<title>Dup</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: dup.htm,v 1.1 2010/02/27 14:50:14 wilbertd Exp $ 
-->
</head>
<body>
<h1>Dup</h1>
<h2>Pøehled</h2>
<b>autor:</b> Donald A. Graft / Klaus Post / Alexander Balachnin
<br><b>verze:</b>  2.30<br>
<b>stáhnout: </b><a href="http://neuron2.net/mine.html">http://neuron2.net/mine.html</a>, 
<a href="http://avisynth.org/warpenterprises/">http://avisynth.org/warpenterprises/</a><br>
<b>kategorie:</b> Rùzné pluginy<br>
<b>požadavky:</b> &nbsp;YV12 &amp; YUY2 Barevné prostøedí
<hr>
<h2>Popis</h2>
<p>Tento plugin pro Avisynth implementuje robustní detektor duplikovaných snímkù. Pùvodnì
byl vytvoøen jako testovací podklad pro nový algoritmus rozlišení snímkù, ale aby byl 
proveden jako užiteèný filtr sám o sobì, byly do nìj implementovány funkce pro kopírování a smíchání
(blend), èímž øetìzec snímkù, které jsou všechny pod prahovou hodnotou rozdílu od
prvního snímku øetìzce, bude nahrazen øetìzcem snímkù identických s posledním 
snímkem zdrojového øetìzce. Místo prvního snímku je použit poslední, protože 
první snímek po zmìnì scény má èasto více blokových artefaktù, atd.
Když je zapnuta možnost smíchání (blend), nahrazovací snímek bude generován ze smíchání 
všech duplikátù v øetìzci (užiteèné pro redukci šumu).</p>
<p>
Toto je zamýšleno pro použití v klipech, které mají znaèné množství obsahovì duplikovaných
snímkù, ale které se liší šumem. Typicky animované filmy mají mnoho takových duplikátù.
Nahrazením zašumìlých duplikátù pøesnými duplikáty lze dosáhnout snížení datového toku. 
Je to zdarma! ('Marc FD' poprvé implementoval tuto kopírovací funkctionalitu.)
Doplòkovì lze u duplikovaných snímkù významnì snížit šum pøi zapnutí možnosti smíchání (blend).
<p>
Nìkteré detektory duplikátù
se nejsou schopny adaptovat ke zmìnám úrovnì jasu v rùzných scénách klipu,
a jsou zle ovlivnìny šumem. Mají ne jednoduché absolutní prahové hodnoty, které
musí být nastaveny uživatelem. Tento filtr se pokouší øešit všechny tyto problémy.
<p>
Dup používá malé okno, kterým skenuje snímek, takže je schopen uvidìt
velmi malé zmìny. Efekt šumu je redukován prostøednictvím automatického vyrušení
pøi procesu sumarizace. Rozdíl snímkù je normalizován do rozsahu 0-100%
pro intuitivnìjší nastavení prahové hodnoty.
<p>
Filtr pøijímá jak YUY2 tak YV12 vstup.
Není zatím optimalizován pro rychlost. Optimalizace budou zahrnuty
v pøíštích verzích.
<p>
Tato verze Dup vyžaduje Avisynth 2.5 a novìjší. Existuje starší verze Dup pro
použití s verzí Avisynth 2.0x .
<p><hr><h3>Syntaxe funkce Dup</h3>
Dup používá jmenné parametry. To znamená, že nemusíte mít obavy o 
poøadí parametrù a mùžete jednoduše na nì poukazovat pomocí názvù a vkládat je v jakémkoliv poøadí
do seznamu parametrù. Když vynecháte parametr tak bere své výchozí hodnoty.  Napøíklad, pokud
chcete použít Dup s deklarovanou úrovní duplikování 5% a se zapnutým ladìním, mùžete jednoduše øíci:
<p>
Dup(threshold=5,debug=true)
<p>
Je povolena jakákoliv kombinace a poøadí parametrù. Nicménì pamatujte, že
by jste mìli vždy vkládat prázdné závorky, pokud nespecifikujete žádné parametry.
<p><hr><h3>Zmìna výchozích hodnot parametrù</h3>
Pokud se vám nelíbí výchozí hodnoty parametrù uvedené níže, mùžete nastavit své vlastní výchozí hodnoty. Pro pøepsání výchozích hodnot nejdøíve vytvoøte složku s
pluginy AviSynhu a zaregistrujte ji. Zaregistrujete ji vložením následujících øádkù do
textového souboru nazvaného 'plugin.reg', zmìnte vhodnì cesty, a pak kliknìte pravým tlaèítkem myši
na ikonu souboru a vyberte Merge.
<pre>REGEDIT4

[HKEY_LOCAL_MACHINE\SOFTWARE\Avisynth]
&quot;plugindir2_5&quot;=&quot;d:\\avisynthplugins&quot;</pre>
<p>
Dále, vytvoøte výchozí soubory jak
je potøeba ve složce pluginù. Napøíklad, k nastavení výchozí hodnoty blend=true pro Dup(), vytvoøte soubor zvaný Dup.def a vložte do nìj tento øádek:
<p>
blend=true
<p>
Mùžete sepsat tolik pøiøazení parametrù kolik chcete, na každý øádek jeden.
Pøi nespecifikování zùstanou hodnoty 
uvedené níže. Samozøejmì mùžete vždy pøepsat tyto výchozí jinými hodnotami uvedenými ve vašem skriptu, když vyvoláváte 
funkci. Poznámka: Øádky ve výchozím souboru nesmí obsahovat žádné mezery nebo tabulátory.
<p><hr><p> 
Následující je syntaxe pro Dup (nahraïte <i>parameter_list</i> 
vaším èárkou oddìlovaným seznamem jmenných parametrù):
<p>
<b>Dup(<i>parameter_list</i>)</b>
<p>
<b><i>threshold</i></b> (0.0-100.0, výchozí 3.0):  Tento parametr definuje procentuální
zmìnu v 
nejodlišnìjším oknì 32x32-pixelù, které je dostaèující pro deklarování duplikovaného snímku. Dá se to chápat jako, 
že pokud je threshold (øeknìme) 7%, tak jestliže jakákoliv oblast 32x32 pixelù se zmìní o 7% nebo
více, není to duplikát, jinak jím je. Použijte možnost show pro zobrazení hodnot rozdílu snímkù
jako nápovìdu pøi nastavování prahové hodnoty threshold,
Pokud upøednostòujete jinou než výchozí.
<p>
Mìli by jste vždy nastavovat vaši prahovou hodnotu nad úroveò šumu v klipu. O kolik výše, 
závisí na tom, kolik duplikátù chcete generovat, t.j. na žádaném snížení datového toku.
Pro urèení úrovnì šumu vyzkoušejte snímky a hledejte takové, které mají duplikovaný obsah,
tøebaže s rozdílem vyvolaným šumem.
Mùžete najít takové snímky, které jsou obsahovými duplikáty zobrazují metriku rozdílu nìkolik procent 
(kvùli šumu). Stanovte nejvyšší metriku, kterou obdržíte pro duplikáty se stejným obsahem.
Pak nastavte vaši threshold nad touto úrovní s takovou rezervou jakou chcete pro dosažení 
žádaného snížení datového toku.
<p>
<b><i>chroma</i></b> (true/false, výchozí true): Nastavte chroma=false pro vylouèení barevnosti (chroma) z
rozlišování snímkù.
<p>
<b><i>show</i></b> (true/false, výchozí false): Když nastavíte na true, do levého horního rohu snímku je pøekrytím
vložena informace. Když je copy=false,
oblast 32x32 pixelù, která se nejvíce liší od stejné oblasti v dalším snímku,
je vybarvena bílým ètvereèkem, a zobrazí se metrika rozdílu.
Pokud má ètvereèek pøes sebe X , snímek byl
oznaèen jako duplikát v souladu s nakonfigurovaným procentuálním rozdílem (threshold).
Když je copy=true, ètvereèek se nezobrazí. Textová  informace vám øekne, které snímky jsou duplikovány
a ze kterého zdrojového snímku.
<p>
<b><i>copy</i></b> (true/false, výchozí true): Pokud je tato možnost nastavena na true, oznaèené duplikáty 
budou nahrazeny jednou kopií. Pokud je øetìzec duplikátù, použije se poslední snímek 
v øetìzci pro všechny kopie. Pokud je blend=true, kopírovaný snímek bude generován smícháním
všech duplikátù v øetìzci dohromady.
<p>
<b><i>maxcopies</i></b> (1-20, výchozí 20): Urèuje maximální poèet kopií, které 
mohou být vyslány kvùli oznámení duplikátu. Nicménì, pokud má vstupní stream více než 
maximální poèet
duplikátù v øetìzci, pak samozøejmì budou vyslány všechny. Toto omezení prostì donutí
aktuální duplikovanou sekvenci skonèit; srovnání se znovu spustí od následujícího snímku.
<p>
<b><i>blend</i></b> (true/false, výchozí false): Pokud je tato možnost nastavena na true, tak chování <i>copy</i> bude upraveno
tak, že místo použití posledního snímku z øetìzce duplikátù, bude snímek vytvoøen a použit ze smíchání (blend)
všech duplikátù v øetìzci. To je užiteèné pro redukci šumu. Tato možnost vyžaduje copy=true. Také si všimnìte,
že smíchaný snímek je generován, když je žádaný prvním snímkem øetìzce. Takže náhodný pøístup do støedu 
øetìzce nevyvolá smíchání. Pro správnou funkci proto pøehrávejte klip pøímo od poèáteèního místa.
<p>
<b><i>debug</i></b> (true/false, výchozí false): Tento parametr zapíná ladící (debug) výstup do utility DebugView. 
Tuto utilitu mùžete stáhnout z mé webové stránky uvedené níže.
</p>
<p>&nbsp;
<hr size="2" width="100%" align="center">
<p>Copyright © 2003, Donald A. Graft, All Rights Reserved.</p>
<p>Pro aktualizace a jiné filtry/nástroje, navštivte moji webovou stránku:<br>
<a target="_top" href="http://neuron2.net/">http://neuron2.net/</a></p>
<p><kbd>$English Date: 2005/07/27 17:51:01 $</kbd></p>
<p><kbd>Èeský pøeklad:25.3.2009</kbd></p>
</body>
</html>