<html>
<head>
<title>STMedianFilter</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: stmedianfilter.htm,v 1.1 2006/03/26 18:11:54 wilbertd Exp $ 
-->
</head>
<body>
<h1>STMedianFilter</h1>
<h2>Abstrato</h2>
<b>autor:</b>   Tom Barry
<br><b>versão:</b>     0.1.0.0<br>
<b>download:</b> <a href="http://mywebpages.comcast.net/trbarry/downloads.htm">http://mywebpages.comcast.net/trbarry/downloads.htm</a>
<br><b>categoria:</b>   <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">suavizadores Spatio-temporal</span>
<br><b><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">requisitos</span>:</b>&nbsp;
<ul>
  <li>YV12 &amp; YUY2 Colorspace</li>
  <li>Suporte SSEMMX (=ISSE)</li>
</ul>

<hr size=2 width="100%" align=center>

<!-- #EndTemplate -->
<h2>Descrição</h2>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">STMedianFilter é um filtro mediano (de movimento
ligeiramente compensado) spatial/temporal.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">De razoavelmente muito boa granulação, usando só
píxeis adjacentes em espaço e tempo, olha em 26 locais adjacentes para os
filtrar. Filtra luma e croma, mas em croma é um pouco mais limitado, como
descrito depois.</span></p>
<p><b><span lang="ES-TRAD" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:
&quot;Times New Roman&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
ES-TRAD;mso-fareast-language:PT-BR;mso-bidi-language:AR-SA">USO - para usá-lo</span>:</b></p>
<p>1) <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Coloque o STMedianFilter.dll em qualquer lugar
num diretório. Você pode obtê-lo em</span> <a href="http://www.trbarry.com/STMedianFilter.zip">www.trbarry.com/STMedianFilter.zip</a></p>
<p>2) <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Em seu arquivo Avisynth use comandos semelhantes
para</span>&nbsp;</p>
<pre>LoadPlugin(&quot;F:\STMedianFilter\STMedianFilter.dll&quot;)
Avisource(&quot;D:\wherever\myfile.avi&quot;)
STMedianFilter(S_FilterThreshHold, S_EdgeThreshHold, T_FilterThreshHold, T_MotionThreshHold)&nbsp;</pre>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">E claro, substitua os nomes dos arquivos e diretório
com o seu próprio e dê os valores inteiros como parâmetros. Os valores válidos
para cada, são de 0 a 255.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">S e T acima, postos para espaço e temporal,
respectivamente.</span></p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Um bom ponto de partida para valores de parâmetros
pode ser</span>&nbsp;</p>
<pre>STMedianFilter(8,15,4,7)</pre>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Valores maiores filtram mais, mas mais artefatos.
Descrições de parâmetros:</span></p>
<p><var>S_FilterThreshHold</var> - <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">não filtre píxel de espaço se muda mais que
estes. Maiores valores podem causar perda de detalhe de linha, mas não é
extremamente sensível.</span></p>
<p><var>S_EdgeThreshHold</var> - <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">não filtre píxel de espaço se em uma
extremidade onde os valores mudam mais que isto. Parece ceder razoavelmente,
assim pode ser elevado muito se desejado.</span></p>
<p><var>T_FilterThreshHold</var> - <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">não filtre píxel Temporal se mudar isto mais
que estes. Grandes valores causarão fantasmas. Não fixe mais de 5-10 para
evitar fantasma.</span></p>
<p><var>T_MotionThreshHold</var> - <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">não filtre píxel Temporal se valores de
movimento não compensados mudarem mais que isto. Não fixe mais de 10 para
evitar fantasma.</span></p>
<h2>Método de operação</h2>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Mas se eu entendo isso como um simples filtro
mediano é um passo de corte onde um valor é fixado para não ir além de seus
limites alto e baixo.</span>&nbsp;
</p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Por exemplo, se tivesse 3 píxeis seguidos com
valores &lt; 5,8,7 &gt; você poderia cortar o do centro para não estar fora o
baixo 5 ou o alto 7, assim o fixaria em 7.</span>&nbsp;
</p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Agora imagine você tinha uma pequena tela de vídeo
3x3, como uma superfície de um cubo de Rubik. Imagine o quadro prévio como a
camada inferior do cubo, o quadro atual como a camada do meio e o próximo
quadro o topo.</span>&nbsp;
</p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Então o píxel de centro atual seria o centro do
cubo de Rubik e haveria 13 modos de você desenhar uma linha por ele e um par de
dois vizinhos mais próximos.</span>&nbsp;
</p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">O que eu fiz foi comparar cada um desses pares de
vizinhos para ver qual par era mais concordante em valor. Eu usei esse par para
cortar o valor do píxel central.</span>
</p>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Eu também cortei o valor do píxel só se ambos:</span>
</p>
<p>1) <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Não mudassem o valor do píxel por mais que o
valor do parâmetro do FilterThreshold, e</span>&nbsp;
</p>
<p>2) <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">A quantia do 'movimento não compensado' (acordo
em valor pelos vizinhos) fosse menos que o valor do parâmetro MotionThreshHold.</span>
</p>
<p><kbd>$Date: 2006/03/26 18:11:54 $ Portuguese translation by RoLon</kbd>
</p>
</body>
</html>
