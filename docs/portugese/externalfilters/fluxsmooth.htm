<html>
<head>
<title>FluxSmooth</title>
<link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: fluxsmooth.htm,v 1.1 2006/03/26 18:11:53 wilbertd Exp $ 
-->
</head>
<body>
<h1>FluxSmooth</h1>
<h2>Abstrato</h2>
<b>autor:</b>  Ross Thomas (Sansgrip)
<br><b>versão:</b>     1.1a<br>
<b>download:</b> <a href="http://www.avisynth.org/warpenterprises/">http://www.avisynth.org/warpenterprises/</a>
<br><b>categoria:</b>   <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Suavizadores Spatio-temporal</span>
<br><b><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">requisitos</span>:</b>&nbsp;
<ul>
  <li>YV12 &amp; YUY2 Colorspace</li>
  <li>Suporte ISSE&nbsp;</li>
</ul>

<hr size=2 width="100%" align=center>

<!-- #EndTemplate -->
<h2>Descrição</h2>
<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Uma das propriedades fundamentais dos ruídos é
que são fortuitos. Uma das propriedades fundamentais de movimento é que não são.
Esta é a premissa atrás de FluxSmooth que examina cada píxel e o compara ao
correspondente prévio e último quadro. A suavização acontece se o valor de
ambos são maiores, ou se ambos são menos que o valor no quadro atual.</span><br>
<br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Eu gosto de chamar isto de &quot;píxel
flutuante&quot;, então eu gosto de apagar da existência esse píxel calculando
a média com seus vizinhos. Para FluxSmoothST, isto é feito (padrão) de uma
maneira spatio-temporal, que para cada píxel flutuante, seus 8 vizinhos de espaço
imediato como também seu 2 vizinhos temporais (o píxel acima mencionado das
quadros prévios e próximos correspondentes) são considerados para inclusão
na média. Se o valor de cada píxel estiver dentro do percentual especificado,
é incluído. Se não, não é. FluxSmoothT executa só o calculo da média
temporal.</span><br>
<br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Este filtro parece remover quase todos os ruídos
de fontes de baixo ruído (como DVD) e muito ruído de fontes de alto ruído
(como captura de TV a cabo), mantendo uma boa quantia de detalhes.</span><br>
<br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Se sua CPU suporta operações de inteiros SSE
(Intel Pentium III e melhor, AMD Athlon e melhor) uma versão aperfeiçoada do
algoritmo será usada.</span><br>
<br>
<span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Usando FluxSmoothT em vez de FluxSmoothST para
suavização só temporal é muito, muito mais rápido (50% mais rápido em meu
sistema).</span></p>
<h2>Uso</h2>
<blockquote>
  <p><code>FluxSmoothT</code> (<var>clip, int &quot;temporal_threshold&quot;</var>)<br>
  <br>
  <code>FluxSmoothST</code> (<var>clip, int &quot;temporal_threshold&quot;, int
  &quot;spatial_threshold&quot;</var>)</p>
</blockquote>
<table border="1">
  <tbody>
    <tr>
      <th>Parâmetro</th>
      <th>Significado</th>
      <th><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Padrão</span></th>
    </tr>
    <tr>
      <td><i>temporal_threshold</i></td>
      <td>
        <p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Píxeis vizinhos de temporal dentro deste
        percentual do píxel atual são incluídos na média.</span></p>
        <p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Se fixo para -1, nenhum suavizador temporal
        acontece. (Não pode ser fixo a –1 em</span> <code>FluxSmoothT</code>).</p>
      </td>
      <td>7</td>
    </tr>
    <tr>
      <td><i>spatial_threshold</i></td>
      <td>
        <p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Píxeis vizinhos de </span>Spatial <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">dentro deste percentual do píxel atual são
        incluídos na média.</span></p>
        <p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Se fixo para -1, nenhum suavizador de espaço
        acontece</span></p>
      </td>
      <td>7</td>
    </tr>
  </tbody>
</table>
<h2>Assuntos Conhecidos</h2>
<ul>
  <li><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">As extremidades do quadro não são processadas.</span>
  <li><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">O primeiro e último quadro de um clipe não são
    processados.</span>
  <li> <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Parece causar uma violação de acesso quando
    usado com codificação n-pass em CCE. Eu não pude duplicar isto. Pode ter
    sido relacionado ao esvaziamento de memória fixado por fabrice.</span></li>
</ul>
<h2>TODO</h2>
<ul>
  <li><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Aperfeiçoa código SSE com respeito a
    emparelhar, baias e assim por diante.</span></li>
</ul>
<h2>Autor</h2>
<p>Ross Thomas &lt;<a href="mailto:ross@grinfinity.com">ross at grinfinity.com</a>&gt;</p>
<h2>História</h2>
<ul>
  <li>1.1a <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Ainda outro lançamento &quot;oops&quot;. O píxel
    atual é considerado uma vez mais no código do cálculo da média - eu
    achei a falta disto muito agressiva, especialmente durante movimento rápido.
    Também fixado o estúpido &quot;3am bug&quot; que envolve um par de variáveis.
    Eu tinha declarado estática que não deve ter sido. Graças a krieger2005
    por descobrir isso e ARDA por diagnosticá-lo.</span></li>
  <li>1.1 <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Mudado o código do cálculo da média de forma
    que o píxel atual é excluído e produz melhor redução de ruídos. Também
    divide o código em dois filtros diferentes, FluxSmoothT e FluxSmoothST. O
    anterior faz suavização só temporal (equivalente a fixar
    &quot;spatial_threshold=-1 &quot; em FluxSmoothST) e é aproximadamente 50%
    mais rápido. Removida a versão Avisynth 2.0x para arrumar a base de código.
    Alguém ainda o usa? Meu agradecimento a fabrice e sh0dan para o lançamento
    1.01 durante minha ausência estendida</span> :).</li>
  <li>1.01 <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Incluído por </span>sh0dan:<br>
    - <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Removido leak em AviSynth 2.5 modo YV12 (código
    por fabrice)</span><br>
    - <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Tabelas e variáveis alinhadas.</span><br>
    - <span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-US;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Usar AviSynth BitBlt para copiar croma.</span><br>
    - <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Não use salvar fluxo. (movntq)</span><br>
    <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Ao todo um aumento aproximado de 15% de
    velocidade comparado à versão anterior. Todas as mudanças são marcadas
    com &quot;sh0&quot;:.</span></li>
  <li>1.0 <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Primeira &quot;liberação estável&quot;. Eu
    acho que está bem testada, mas espere emergir uma porção de bugs e me
    chamar de mentiroso... Fixado um bug que, junto com um no resizers embutido,
    causou uma violação de acesso sob certas circunstâncias. Graças a sh0dan
    por descobrir isso:). Incluído SetCacheHints e atualizado no
    &quot;AvisynthPluginInit2&quot; na versão 2.5.</span></li>
  <li>0.4 <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Implementada a versão iSSE aperfeiçoada que
    roda com aproximadamente o dobro da velocidade da versão C++. Algumas
    pequenas otimizações para a versão C++. Agora suavisa croma e também
    luma.</span></li>
  <li>0.3 <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Fixado bug ruim que causou suavização
    incorreta: nenhum filtro no lugar mais. Padrões mudados para onde eles
    estavam, agora que o algoritmo trabalha corretamente. Gastado algum tempo
    testando o nível e afinando vários pedaços de código, assim deve ser
    agora significativamente mais rápido.</span></li>
  <li>0.2 <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Fixado bug não fatal que causou um pedido para
    um quadro além do fim do clipe. Mudado para filtro no lugar, assim pode
    pressionar algumas otimizações aqui e lá. Mudados padrões muito alto.
    Primeira liberação Avisynth 2.5/YV12.</span></li>
  <li>0.1 <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Primeira liberação</span>. <span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Microsoft Sans Serif&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:PT-BR;mso-fareast-language:
PT-BR;mso-bidi-language:AR-SA">Código alfa</span>.</li>
</ul>
<p><kbd>$Date: 2006/03/26 18:11:53 $ Portuguese translation by RoLon</kbd></p>
</body>
</html>
