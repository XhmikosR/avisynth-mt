<HTML>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2" />   
<TITLE>DirectShowSource</TITLE>

<link rel="stylesheet" type="text/css" href="style2.css">

</HEAD>

<h1>DirectShowSource</h1>
<h2><b>DirectShowSource</b>(string filename, int fps, bool "seek", bool "audio", bool
&quot;video&quot;)</h2>

<hr>

<p><i><b>filename</b></i>: dok³adna ¶cie¿ka do pliku
<br>
<br>
<i><b>fps</b></i>: prêdko¶æ klatek w klipie wynikowym (ilo¶æ klatek na sekundê)
<br>
<br>
<i><b>seek</b></i>: true - w³±cza, false - wy³±cza wyszukiwanie w klipie
<br>
<br>
<i><b>audio/video</b></i>: przyjmuje warto¶æ true (prawda) - w³±cza ¶cie¿kê audio/video (warto¶æ domy¶lna) - a false (fa³sz)
wy³±cza
<br>
</p>

<hr>

<p><b>DirectShowSource</b> wczytuje klip video wykorzystuj±cy DirectShow. Filtr ten mo¿e wczytaæ wiêkszo¶æ formatów, które potrafi odtworzyæ Media Player - w tym MPEG, MP3 i QuickTime, tak¿e pliki AVI, których nie wczytuje
<b>  AVISource</b> (takie jak DV typ 1, lub pliki korzystaj±ce tylko z kodeka DirectShow). Przy plikach AVI najpierw spróbuj wczytaæ taki klip video poprzez
<b> AVISource</b>, dopiero po nieudanej próbie siêgnij po filtr <b> DirectShowSource</b>.<br>
<br>
<font color="#FF0000"><b>UWAGA:</b></font><br>
- niektóre dekodery (zw³aszcza MS MPEG-4) bêd± wytwarzaæ video &#8216;do góry nogami&#8217;. Do zniwelowania tego mo¿na u¿yæ filtr
<b> FlipVertical</b><br>
- dekodery DirectShow nie wspomagaj± dok³adnego wyszukiwania klatek (w wiêkszo¶ci przypadkach wyszukiwanie powinno dzia³aæ, ale czasem mog± byæ z tym problemy)<br>
- dekodery DirectShow czasami nie informuj± o prêdko¶ci klatek w klipie video (w wiêkszo¶ci przypadków informacja ta jest odczytywana z nag³ówka pliku jednak nie przy plikach ASF), tak wiêc je¶li fps jest równy, np. 15 to linijka skryptu powinna wygl±daæ nastêpuj±co:
<i> DirectShowSource("video.asf", fps=15)</i>.<br>
<br>
<b><i>Pocz±wszy od wersji 2.53 dodano:</i></b><br>
- wspomaganie audio w <b> DirectShowSource</b>. <b> DirectShowSource</b> mo¿e otwieraæ formaty takie jak: WAV/DTS/AC3/MP3 pod warunkiem, ¿e mo¿na je odtworzyæ, np. w WMP. (bardziej dok³adnie: pod warunkiem, ¿e s± poprawnie render&#8217;owane w graphedit). Kolejno¶æ kana³ów jest taka sama jak w rozszerzonym formacie wave, poniewa¿ materia³ wej¶ciowy jest zawsze dekompresowany do WAV. Wiêcej informacji na ten temat jest przy opisie filtra
<b> GetChannel</b><br>
- wczytywanie audio o próbkowaniu, które wyra¿aj± liczby ca³kowite: 8, 16, 24 i 32 bitów, jak i liczby wyra¿one w postaci u³amka dziesiêtnego, w formacie PCM i ka¿d± ilo¶ci± kana³ów.<br>
- wspomaganie pe³nego wyszukiwania klatek (dostêpne w wiêkszo¶ci formatach)<br>
- wspomaganie dla plików GraphEdit (grf)<br>
<br>
Domy¶lnie AviSynth bêdzie otwiera³ multimedia, które nie maj± ¿adnych b³êdów, czyli w przypadku problemu z jakim¶ elementem (audio, video) to po prostu nie bêdzie on dodany w materiale wyj¶ciowym. Oznacza to równie¿, ¿e problem z danym elementem nie zostanie okre¶lony. By otrzymaæ komunikat o b³êdzie trzeba wy³±czyæ jeden z elementów, poprzez argument
<i> audio=false</i> lub <i>video=false</i>. Tym sposobem AviSynth bêdzie wy¶wietla³ wiadomo¶æ o b³êdzie, który nie dzia³a prawid³owo.<br>
<br>
<b>Filtr Graph nie dzia³a</b><br>
Jest to znany b³±d, który wystêpuje gdy DirectShow nie mo¿e dostarczyæ formatu, który by³by czytelny dla AviSynth. W tym przypadku mo¿esz sam napisaæ filtr graph lub ¶ci±gn±æ dodatkowe filtry DirectShow, które potrafi± dostarczyæ poprawny materia³.<br>
<br>
<b>B³êdna prêdko¶æ próbkowania</b><br>
Niektóre filtry mog± mieæ problem z niepoprawn± prêdko¶ci± próbkowania. Mo¿na spróbowaæ uruchomiæ skrypt AviSynth przy odtwarzaniu danego pliku (z b³êdn± prêdko¶cia próbkowania), jednak nie jest to idealne rozwi±zanie dla AviSynth. Praktyczniej bêdzie skorzystanie z filtra
<b> AssumeSampleRate</b> i tam nale¿y ustawiæ prawid³ow± prêdko¶æ próbkowania.<br>
<br>
<b>Lekko wzburzony d¼wiêk w AviSynth</b><br>
Niestety AviSynth, w DirectShow, nie potrafi jeszcze wyszukiwaæ dok³adnie w 100%. Najlepiej bêdzie wczytanie d¼wiêku innym sposobem lub zdemux&#8217;owanie ¶cie¿ki audio z klipu video i wtedy wczytaæ do AviSynth. Poza tym mo¿na równie¿ okre¶liæ argument
&quot;<i>seek = false</i>&quot;.<br>
<br>
<b>The filter graph won't talk to me</b><br>
GraphEdit, pliki GRF, s± automatycznie wykrywane i ³adowane przez <b>DirectShowSource</b>. AviSynth mo¿e ³±czyæ te pliki jednak musisz zostawiæ, w GraphEdit, otwarte  pin&#8217;y tych plików. AviSynth nie bêdzie od³±cza³ ka¿dego filtru, wiêc wa¿ne jest by format materia³u wyj¶ciowego by³ poprawny.<br>
<br>
<b>Konwersja AC3 do stereo</b><br>
W AviSynth, d¼wiêk stereo z AC3 mo¿na otrzymaæ na dwa sposoby. Jednym jest ustawienie konwersji w konfiguracji dekodera AC3, a drugim jest u¿ycie zewnêtrznego konwertora Trombettworks.&nbsp;<br>
<br>
1) Zainstaluj AC3filter. Otwórz plik AC3 w WMP6.4 i wybierz w³a¶ciwo¶ci pliku. Ustaw materia³ wyj¶ciowy na
<i> AC3Filter on 2/0 &#8211; stereo</i> i je¶li chcesz uzyskaæ jak najlepsz± jako¶æ to przy
<i> Sample format</i> zaznacz <i> PCM Float</i>.<br>
<br>
Stwórz nastêpuj±cy skrypt:&nbsp;<br>
<br>
v = Mpeg2Source("e:\movie.d2v")<br>
a = DirectShowSource("e:\Temp\Test2\test.ac3")<br>
AudioDub(v,a)<br>
<br>
Otwórz skrypt w VD zrzutuj strumieñ audio do MP3 (oczywi¶cie mo¿esz równie¿ zdemuxowaæ do WAV, je¶li potrzebujesz).&nbsp;<br>
<br>
2) Uruchom rejestr filtru directshow (<i>start -> uruchom&#8230;</i>):<br>
<br>
<i>
    regsvr32 ChannelDownmixer.ax&nbsp;</i><br>
<br>
Otwórz plik AC3 w WMP6.4 i wybierz w³a¶ciwo¶ci pliku. Ustaw materia³ wyj¶ciowy na
<i> AC3Filter on 3/2+SW 5.1 channels</i> (ta konwersja nie radzi sobie z <i> PCM
Float</i>, tak wiêc zaznaczamy <i> PCM 16 bit</i>). Numery kana³ów d¼wiêku materia³u wej¶ciowego i wyj¶ciowego powinny ustaliæ siê automatycznie. Sprawd¼ czy rzeczywi¶cie automatyczne
ustawienie jest poprawne.&nbsp;<br>
<br>
Stwórz nastêpuj±cy skrypt:&nbsp;<br>
<br>
v = Mpeg2Source("e:\movie.d2v")<br>
a = DirectShowSource("e:\Temp\Test2\test.ac3")<br>
AudioDub(v,a)<br>
<br>
Otwórz skrypt w VD zrzutuj strumieñ audio do MP3 (oczywi¶cie mo¿esz równie¿ zdemuxowaæ do WAV, je¶li potrzebujesz).&nbsp;<br>
<br>
Przy pracy z plikami DTS mog± pojawiæ siê problemy.</p>
<hr>

<h3>translated by Slim</h3>
</HTML>